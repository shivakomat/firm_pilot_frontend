"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[463],{8463:(ds,oe,h)=>{h.r(oe),h.d(oe,{ClientPortalModule:()=>ls});var v=h(177),d=h(9417),O=h(803),Me=h(8032),k=h.n(Me),e=h(4438),ie=h(9386);const Te=["uploadModal"];function Se(o,i){if(1&o){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"div",26),e.nrm(3,"i",27),e.EFF(4),e.k0s()(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.nI1(11,"date"),e.k0s(),e.j41(12,"td")(13,"span"),e.EFF(14),e.nI1(15,"titlecase"),e.k0s()(),e.j41(16,"td")(17,"button",28),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.downloadDocument(n))}),e.nrm(18,"i",29),e.k0s()()()}if(2&o){const t=i.$implicit,s=e.XpG();e.R7$(4),e.SpI(" ",t.name," "),e.R7$(2),e.JRh(t.type),e.R7$(2),e.JRh(t.size),e.R7$(2),e.JRh(e.i5U(11,7,t.uploadDate,"shortDate")),e.R7$(3),e.HbH(s.getStatusClass(t.status)),e.R7$(),e.SpI(" ",e.bMT(15,10,t.status)," ")}}function Pe(o,i){1&o&&(e.j41(0,"tr")(1,"td",30),e.EFF(2," No documents found matching your criteria. "),e.k0s()())}function Ee(o,i){if(1&o){const t=e.RV6();e.j41(0,"li",52)(1,"div",53)(2,"div",54)(3,"div",55)(4,"div",56),e.nrm(5,"i",57),e.k0s()(),e.j41(6,"div",58)(7,"div",59)(8,"h6",60),e.EFF(9),e.k0s(),e.j41(10,"p",61),e.EFF(11),e.k0s()()(),e.j41(12,"div",62)(13,"button",63),e.bIt("click",function(){const n=e.eBV(t).index,r=e.XpG(3);return e.Njj(r.removeUploadedFile(n))}),e.nrm(14,"i",64),e.k0s()()()()()}if(2&o){const t=i.$implicit,s=e.XpG(3);e.R7$(9),e.JRh(t.name),e.R7$(2),e.JRh(s.formatFileSize(t.size))}}function Re(o,i){if(1&o&&(e.j41(0,"div")(1,"h6",49),e.EFF(2,"Selected Files:"),e.k0s(),e.j41(3,"ul",50),e.DNE(4,Ee,15,2,"li",51),e.k0s()()),2&o){const t=e.XpG(2);e.R7$(4),e.Y8G("ngForOf",t.uploadedFiles)}}function $e(o,i){1&o&&e.nrm(0,"span",65)}function De(o,i){if(1&o){const t=e.RV6();e.j41(0,"div",6)(1,"div",31)(2,"div",0)(3,"div",32)(4,"div",33)(5,"h5",3),e.EFF(6,"Upload Document"),e.k0s(),e.j41(7,"button",34),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeUploadModal())}),e.k0s()()(),e.j41(8,"div",1)(9,"form")(10,"div",35)(11,"div",36)(12,"label",37),e.EFF(13,"Document Category *"),e.k0s(),e.j41(14,"select",38),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.uploadForm.category,n)||(r.uploadForm.category=n),e.Njj(n)}),e.j41(15,"option",39),e.EFF(16,"Select Category"),e.k0s(),e.j41(17,"option",11),e.EFF(18,"Tax Documents"),e.k0s(),e.j41(19,"option",12),e.EFF(20,"Financial Statements"),e.k0s(),e.j41(21,"option",13),e.EFF(22,"Receipts"),e.k0s(),e.j41(23,"option",14),e.EFF(24,"Other"),e.k0s()()(),e.j41(25,"div",36)(26,"label",40),e.EFF(27,"Description (Optional)"),e.k0s(),e.j41(28,"input",41),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.uploadForm.description,n)||(r.uploadForm.description=n),e.Njj(n)}),e.k0s()()(),e.j41(29,"div",42)(30,"label",43),e.EFF(31,"Upload Files"),e.k0s(),e.j41(32,"dropzone",44),e.bIt("success",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.onUploadSuccess(n))}),e.k0s(),e.DNE(33,Re,5,1,"div",21),e.k0s()(),e.j41(34,"div",45)(35,"button",46),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeUploadModal())}),e.EFF(36,"Cancel"),e.k0s(),e.j41(37,"button",47),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.submitUpload())}),e.DNE(38,$e,1,0,"span",48),e.EFF(39),e.k0s()()()()()()}if(2&o){const t=e.XpG();e.R7$(14),e.R50("ngModel",t.uploadForm.category),e.R7$(14),e.R50("ngModel",t.uploadForm.description),e.R7$(4),e.Y8G("config",t.dropzoneConfig)("message","Drop files here or click to upload."),e.R7$(),e.Y8G("ngIf",t.uploadedFiles.length>0),e.R7$(4),e.Y8G("disabled",0===t.uploadedFiles.length||!t.uploadForm.category||t.isUploading),e.R7$(),e.Y8G("ngIf",t.isUploading),e.R7$(),e.SpI(" ",t.isUploading?"Uploading...":"Upload "+t.uploadedFiles.length+" File(s)"," ")}}let Oe=(()=>{class o{constructor(){this.documents=[],this.filteredDocuments=[],this.selectedCategory="all",this.searchTerm="",this.selectedFile=null,this.isUploading=!1,this.showUploadModal=!1,this.uploadedFiles=[],this.uploadForm={category:"",description:""},this.dropzoneConfig={url:"/upload",clickable:!0,addRemoveLinks:!1,previewsContainer:!1,acceptedFiles:".pdf,.jpg,.jpeg,.png,.doc,.docx",maxFilesize:10,maxFiles:10,autoProcessQueue:!1}}ngOnInit(){this.loadDocuments()}loadDocuments(){this.documents=[{id:1,name:"W2_2024.pdf",type:"PDF",size:"245 KB",uploadDate:"2024-01-15",status:"approved",category:"tax-documents"},{id:2,name:"Bank_Statement_Jan2024.pdf",type:"PDF",size:"1.2 MB",uploadDate:"2024-02-01",status:"reviewed",category:"financial-statements"},{id:3,name:"Receipt_Office_Supplies.jpg",type:"Image",size:"890 KB",uploadDate:"2024-02-10",status:"pending",category:"receipts"}],this.filteredDocuments=[...this.documents]}filterDocuments(){this.filteredDocuments=this.documents.filter(t=>{const s="all"===this.selectedCategory||t.category===this.selectedCategory,n=t.name.toLowerCase().includes(this.searchTerm.toLowerCase());return s&&n})}onCategoryChange(){this.filterDocuments()}onSearchChange(){this.filterDocuments()}getStatusClass(t){switch(t){case"approved":return"badge bg-success";case"reviewed":return"badge bg-info";case"pending":return"badge bg-warning";default:return"badge bg-secondary"}}downloadDocument(t){k().fire({title:"Download Started",text:`Downloading ${t.name}...`,icon:"info",timer:2e3,showConfirmButton:!1}),console.log("Downloading document:",t.name)}uploadDocument(){this.selectedFile=null,this.uploadForm={category:"",description:""},this.showUploadModal=!0}closeUploadModal(){this.showUploadModal=!1}onUploadSuccess(t){setTimeout(()=>{this.uploadedFiles.push(t[0])},0)}removeUploadedFile(t){this.uploadedFiles.splice(t,1)}formatFileSize(t){if(0===t)return"0 Bytes";const r=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,r)).toFixed(2))+" "+["Bytes","KB","MB","GB"][r]}submitUpload(){!this.selectedFile||!this.uploadForm.category||(this.isUploading=!0,setTimeout(()=>{this.uploadedFiles.forEach(t=>{const s={id:this.documents.length+1,name:t.name,type:this.getFileTypeDisplay(t.type),size:this.formatFileSize(t.size),uploadDate:(new Date).toISOString(),status:"pending",category:this.uploadForm.category};this.documents.unshift(s)}),this.filterDocuments(),this.uploadedFiles=[],this.isUploading=!1,this.showUploadModal=!1,k().fire({title:"Upload Successful!",text:"Your document has been uploaded and is pending review.",icon:"success",timer:3e3,showConfirmButton:!1})},2e3))}getFileTypeDisplay(t){switch(t){case"application/pdf":return"PDF";case"image/jpeg":case"image/jpg":case"image/png":return"Image";case"application/msword":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return"Document";default:return"File"}}static{this.\u0275fac=function(s){return new(s||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-documents"]],viewQuery:function(s,n){if(1&s&&e.GBs(Te,5),2&s){let r;e.mGM(r=e.lsd())&&(n.uploadModal=r.first)}},decls:59,vars:5,consts:[[1,"card"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"card-title","mb-0"],["type","button",1,"btn","btn-primary",3,"click"],[1,"ri-upload-cloud-line","me-1"],[1,"row","mb-4"],[1,"col-md-6"],["for","categoryFilter",1,"form-label"],["id","categoryFilter",1,"form-select",3,"ngModelChange","change","ngModel"],["value","all"],["value","tax-documents"],["value","financial-statements"],["value","receipts"],["value","other"],["for","searchInput",1,"form-label"],["type","text","id","searchInput","placeholder","Search by document name...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"table-responsive"],[1,"table","table-nowrap","table-hover"],[1,"table-light"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","row mb-4",4,"ngIf"],[1,"alert","alert-info","mt-4"],[1,"alert-heading"],[1,"mb-0"],[1,"d-flex","align-items-center"],[1,"ri-file-text-line","me-2","text-muted"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"ri-download-line"],["colspan","6",1,"text-center","text-muted","py-4"],[1,"col-12"],[1,"card-header"],[1,"d-flex","justify-content-between","align-items-center"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"row"],[1,"col-md-6","mb-3"],["for","documentCategory",1,"form-label"],["id","documentCategory","name","category","required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],["for","documentDescription",1,"form-label"],["type","text","id","documentDescription","name","description","placeholder","Add notes about this document...",1,"form-control",3,"ngModelChange","ngModel"],[1,"mb-3"],[1,"form-label"],[1,"dropzone",3,"success","config","message"],[1,"d-flex","justify-content-end","gap-2"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm me-2","role","status",4,"ngIf"],[1,"mt-3"],[1,"list-unstyled","mb-0"],["class","mt-2",4,"ngFor","ngForOf"],[1,"mt-2"],[1,"border","rounded"],[1,"d-flex","p-2"],[1,"flex-shrink-0","me-3"],[1,"avatar-sm","bg-light","rounded","d-flex","align-items-center","justify-content-center"],[1,"ri-file-text-line","text-muted"],[1,"flex-grow-1"],[1,"pt-1"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"flex-shrink-0","ms-3"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"ri-delete-bin-line"],["role","status",1,"spinner-border","spinner-border-sm","me-2"]],template:function(s,n){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),e.EFF(4,"Documents"),e.k0s(),e.j41(5,"button",4),e.bIt("click",function(){return n.uploadDocument()}),e.nrm(6,"i",5),e.EFF(7,"Upload Document "),e.k0s()(),e.j41(8,"div",6)(9,"div",7)(10,"label",8),e.EFF(11,"Filter by Category"),e.k0s(),e.j41(12,"select",9),e.mxI("ngModelChange",function(a){return e.DH7(n.selectedCategory,a)||(n.selectedCategory=a),a}),e.bIt("change",function(){return n.onCategoryChange()}),e.j41(13,"option",10),e.EFF(14,"All Categories"),e.k0s(),e.j41(15,"option",11),e.EFF(16,"Tax Documents"),e.k0s(),e.j41(17,"option",12),e.EFF(18,"Financial Statements"),e.k0s(),e.j41(19,"option",13),e.EFF(20,"Receipts"),e.k0s(),e.j41(21,"option",14),e.EFF(22,"Other"),e.k0s()()(),e.j41(23,"div",7)(24,"label",15),e.EFF(25,"Search Documents"),e.k0s(),e.j41(26,"input",16),e.mxI("ngModelChange",function(a){return e.DH7(n.searchTerm,a)||(n.searchTerm=a),a}),e.bIt("input",function(){return n.onSearchChange()}),e.k0s()()(),e.j41(27,"div",17)(28,"table",18)(29,"thead",19)(30,"tr")(31,"th"),e.EFF(32,"Document Name"),e.k0s(),e.j41(33,"th"),e.EFF(34,"Type"),e.k0s(),e.j41(35,"th"),e.EFF(36,"Size"),e.k0s(),e.j41(37,"th"),e.EFF(38,"Upload Date"),e.k0s(),e.j41(39,"th"),e.EFF(40,"Status"),e.k0s(),e.j41(41,"th"),e.EFF(42,"Actions"),e.k0s()()(),e.j41(43,"tbody"),e.DNE(44,Se,19,12,"tr",20)(45,Pe,3,0,"tr",21),e.k0s()()(),e.DNE(46,De,40,8,"div",22),e.j41(47,"div",23)(48,"h6",24),e.EFF(49,"Upload Guidelines:"),e.k0s(),e.j41(50,"ul",25)(51,"li"),e.EFF(52,"Accepted formats: PDF, JPG, PNG, DOC, DOCX"),e.k0s(),e.j41(53,"li"),e.EFF(54,"Maximum file size: 10MB"),e.k0s(),e.j41(55,"li"),e.EFF(56,"Please organize documents by category for easier processing"),e.k0s(),e.j41(57,"li"),e.EFF(58,"Uploaded documents will be reviewed within 1-2 business days"),e.k0s()()()()()),2&s&&(e.R7$(12),e.R50("ngModel",n.selectedCategory),e.R7$(14),e.R50("ngModel",n.searchTerm),e.R7$(18),e.Y8G("ngForOf",n.filteredDocuments),e.R7$(),e.Y8G("ngIf",0===n.filteredDocuments.length),e.R7$(),e.Y8G("ngIf",n.showUploadModal))},dependencies:[v.Sq,v.bT,d.qT,d.xH,d.y7,d.me,d.wz,d.BC,d.cb,d.YS,d.vS,d.cV,ie.HF,v.PV,v.vh],styles:[".table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;border-top:none}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem}.alert-info[_ngcontent-%COMP%]{border-left:4px solid #17a2b8}.card-title[_ngcontent-%COMP%]{font-weight:600}"]})}}return o})();function Ae(o,i){1&o&&(e.j41(0,"span"),e.nrm(1,"i",20),e.EFF(2,"Completed "),e.k0s())}function Ne(o,i){1&o&&(e.j41(0,"span"),e.nrm(1,"i",21),e.EFF(2,"Continue "),e.k0s())}function Ge(o,i){1&o&&(e.j41(0,"span"),e.nrm(1,"i",22),e.EFF(2,"Start Form "),e.k0s())}function Be(o,i){if(1&o){const t=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",1)(3,"div",10),e.nrm(4,"i",11),e.j41(5,"span"),e.EFF(6),e.nI1(7,"titlecase"),e.nI1(8,"replace"),e.k0s()(),e.j41(9,"h5",12),e.EFF(10),e.k0s(),e.j41(11,"p",13),e.EFF(12),e.k0s(),e.j41(13,"div",14)(14,"small",15),e.nrm(15,"i",16),e.EFF(16),e.nI1(17,"date"),e.k0s(),e.nrm(18,"br"),e.j41(19,"small",15),e.nrm(20,"i",17),e.EFF(21),e.k0s()(),e.j41(22,"button",18),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.openForm(n))}),e.DNE(23,Ae,3,0,"span",19)(24,Ne,3,0,"span",19)(25,Ge,3,0,"span",19),e.k0s()()()()}if(2&o){const t=i.$implicit,s=e.XpG();e.R7$(),e.AVh("border-success","completed"===t.status)("border-warning","in-progress"===t.status),e.R7$(3),e.HbH(s.getStatusIcon(t.status)),e.R7$(),e.HbH(s.getStatusClass(t.status)),e.R7$(),e.JRh(e.brH(8,19,e.bMT(7,17,t.status),"-"," ")),e.R7$(4),e.JRh(t.title),e.R7$(2),e.JRh(t.description),e.R7$(4),e.SpI(" Due: ",e.i5U(17,23,t.dueDate,"shortDate")," "),e.R7$(5),e.SpI(" ",t.category," "),e.R7$(),e.Y8G("disabled","completed"===t.status),e.R7$(),e.Y8G("ngIf","completed"===t.status),e.R7$(),e.Y8G("ngIf","in-progress"===t.status),e.R7$(),e.Y8G("ngIf","not-started"===t.status)}}function Ye(o,i){if(1&o){const t=e.RV6();e.j41(0,"div",23)(1,"div",24)(2,"div",25)(3,"div",26)(4,"h5",27),e.EFF(5),e.k0s(),e.j41(6,"button",28),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeForm())}),e.k0s()(),e.j41(7,"div",29)(8,"form",30)(9,"div",4)(10,"div",31)(11,"label",32),e.EFF(12,"Business Name *"),e.k0s(),e.nrm(13,"input",33),e.k0s(),e.j41(14,"div",31)(15,"label",34),e.EFF(16,"Business Type *"),e.k0s(),e.j41(17,"select",35)(18,"option",36),e.EFF(19,"Select Business Type"),e.k0s(),e.j41(20,"option",37),e.EFF(21,"LLC"),e.k0s(),e.j41(22,"option",38),e.EFF(23,"Corporation"),e.k0s(),e.j41(24,"option",39),e.EFF(25,"Partnership"),e.k0s(),e.j41(26,"option",40),e.EFF(27,"Sole Proprietorship"),e.k0s()()()(),e.j41(28,"div",4)(29,"div",31)(30,"label",41),e.EFF(31,"Tax ID (EIN) *"),e.k0s(),e.nrm(32,"input",42),e.k0s(),e.j41(33,"div",31)(34,"label",43),e.EFF(35,"Phone Number *"),e.k0s(),e.nrm(36,"input",44),e.k0s()(),e.j41(37,"div",14)(38,"label",45),e.EFF(39,"Business Address *"),e.k0s(),e.nrm(40,"textarea",46),e.k0s(),e.j41(41,"div",4)(42,"div",31)(43,"label",47),e.EFF(44,"Email Address *"),e.k0s(),e.nrm(45,"input",48),e.k0s(),e.j41(46,"div",31)(47,"label",49),e.EFF(48,"Annual Revenue"),e.k0s(),e.nrm(49,"input",50),e.k0s()(),e.j41(50,"div",4)(51,"div",31)(52,"label",51),e.EFF(53,"Number of Employees"),e.k0s(),e.nrm(54,"input",52),e.k0s()(),e.j41(55,"div",14)(56,"label",53),e.EFF(57,"Business Description"),e.k0s(),e.nrm(58,"textarea",54),e.k0s()()(),e.j41(59,"div",55)(60,"button",56),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeForm())}),e.EFF(61,"Cancel"),e.k0s(),e.j41(62,"button",57),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.saveForm())}),e.EFF(63,"Save Draft"),e.k0s(),e.j41(64,"button",58),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.submitForm())}),e.EFF(65,"Submit Form"),e.k0s()()()()()}if(2&o){const t=e.XpG();e.xc7("display",t.showFormModal?"block":"none"),e.AVh("show",t.showFormModal),e.R7$(5),e.JRh(null==t.selectedForm?null:t.selectedForm.title),e.R7$(3),e.Y8G("formGroup",t.currentForm),e.R7$(54),e.Y8G("disabled",!t.currentForm.valid),e.R7$(2),e.Y8G("disabled",!t.currentForm.valid)}}function ze(o,i){if(1&o&&e.nrm(0,"div",59),2&o){const t=e.XpG();e.AVh("show",t.showFormModal)}}let Le=(()=>{class o{constructor(t){this.fb=t,this.intakeForms=[],this.selectedForm=null,this.showFormModal=!1,this.currentForm=this.fb.group({businessName:["",d.k0.required],businessType:["",d.k0.required],taxId:["",d.k0.required],address:["",d.k0.required],phone:["",d.k0.required],email:["",[d.k0.required,d.k0.email]],annualRevenue:[""],numberOfEmployees:[""],businessDescription:[""]})}ngOnInit(){this.loadIntakeForms()}loadIntakeForms(){this.intakeForms=[{id:1,title:"Business Information Form",description:"Basic business details and contact information",status:"completed",dueDate:"2024-01-15",category:"Business Setup"},{id:2,title:"Tax Preparation Questionnaire",description:"Annual tax preparation information and documentation requirements",status:"in-progress",dueDate:"2024-03-15",category:"Tax Preparation"},{id:3,title:"Bookkeeping Services Setup",description:"Monthly bookkeeping service preferences and requirements",status:"not-started",dueDate:"2024-02-28",category:"Bookkeeping"}]}getStatusClass(t){switch(t){case"completed":return"badge bg-success";case"in-progress":return"badge bg-warning";default:return"badge bg-secondary"}}getStatusIcon(t){switch(t){case"completed":return"ri-check-line";case"in-progress":return"ri-time-line";default:return"ri-file-list-line"}}openForm(t){this.selectedForm=t,this.showFormModal=!0,1===t.id&&this.currentForm.patchValue({businessName:"Sample Business LLC",businessType:"LLC",taxId:"12-3456789",address:"123 Main St, City, State 12345",phone:"(555) 123-4567",email:"business@example.com",annualRevenue:"500000",numberOfEmployees:"5",businessDescription:"Professional services company"})}closeForm(){this.showFormModal=!1,this.selectedForm=null}saveForm(){this.currentForm.valid&&this.selectedForm&&(console.log("Saving form data:",this.currentForm.value),this.selectedForm.status="in-progress",this.closeForm())}submitForm(){this.currentForm.valid&&this.selectedForm&&(console.log("Submitting form data:",this.currentForm.value),this.selectedForm.status="completed",this.closeForm())}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(d.ok))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-intake"]],decls:10,vars:3,consts:[[1,"card"],[1,"card-body"],[1,"card-title","mb-4"],[1,"text-muted","mb-4"],[1,"row"],["class","col-lg-4 col-md-6 mb-4",4,"ngFor","ngForOf"],["class","modal fade","tabindex","-1",3,"show","display",4,"ngIf"],["class","modal-backdrop fade",3,"show",4,"ngIf"],[1,"col-lg-4","col-md-6","mb-4"],[1,"card","border","h-100"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"font-size-24","text-primary"],[1,"card-title"],[1,"card-text","text-muted"],[1,"mb-3"],[1,"text-muted"],[1,"ri-calendar-line","me-1"],[1,"ri-folder-line","me-1"],["type","button",1,"btn","btn-primary","btn-sm",3,"click","disabled"],[4,"ngIf"],[1,"ri-check-line","me-1"],[1,"ri-edit-line","me-1"],[1,"ri-play-line","me-1"],["tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[3,"formGroup"],[1,"col-md-6","mb-3"],["for","businessName",1,"form-label"],["type","text","id","businessName","formControlName","businessName",1,"form-control"],["for","businessType",1,"form-label"],["id","businessType","formControlName","businessType",1,"form-select"],["value",""],["value","LLC"],["value","Corporation"],["value","Partnership"],["value","Sole Proprietorship"],["for","taxId",1,"form-label"],["type","text","id","taxId","formControlName","taxId",1,"form-control"],["for","phone",1,"form-label"],["type","tel","id","phone","formControlName","phone",1,"form-control"],["for","address",1,"form-label"],["id","address","rows","2","formControlName","address",1,"form-control"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control"],["for","annualRevenue",1,"form-label"],["type","number","id","annualRevenue","formControlName","annualRevenue",1,"form-control"],["for","numberOfEmployees",1,"form-label"],["type","number","id","numberOfEmployees","formControlName","numberOfEmployees",1,"form-control"],["for","businessDescription",1,"form-label"],["id","businessDescription","rows","3","formControlName","businessDescription",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-outline-primary",3,"click","disabled"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"modal-backdrop","fade"]],template:function(s,n){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"h4",2),e.EFF(3,"Intake Forms"),e.k0s(),e.j41(4,"p",3),e.EFF(5,"Complete the required forms below to help us serve you better. Click on any form to get started."),e.k0s(),e.j41(6,"div",4),e.DNE(7,Be,26,26,"div",5),e.k0s()()(),e.DNE(8,Ye,66,8,"div",6)(9,ze,1,2,"div",7)),2&s&&(e.R7$(7),e.Y8G("ngForOf",n.intakeForms),e.R7$(),e.Y8G("ngIf",n.showFormModal),e.R7$(),e.Y8G("ngIf",n.showFormModal))},dependencies:[v.Sq,v.bT,d.qT,d.xH,d.y7,d.me,d.Q0,d.wz,d.BC,d.cb,d.j4,d.JD,v.PV,v.vh],styles:[".card.border-success[_ngcontent-%COMP%]{border-color:#28a745!important}.card.border-warning[_ngcontent-%COMP%]{border-color:#ffc107!important}.card-title[_ngcontent-%COMP%]{font-weight:600}.modal.show[_ngcontent-%COMP%]{background-color:#00000080}.modal-backdrop.show[_ngcontent-%COMP%]{opacity:.5}.btn-sm[_ngcontent-%COMP%]{padding:.375rem .75rem}.form-label[_ngcontent-%COMP%]{font-weight:500}"]})}}return o})();var L=h(1413),w=h(6977),Ve=h(152),Ue=h(3294),re=h(6344);function Xe(o,i){1&o&&(e.j41(0,"span",16),e.EFF(1,"Saving..."),e.k0s())}function qe(o,i){1&o&&e.nrm(0,"i",20)}function He(o,i){if(1&o){const t=e.RV6();e.j41(0,"button",17),e.bIt("click",function(){const n=e.eBV(t).index,r=e.XpG();return e.Njj(r.goToSection(n))}),e.nrm(1,"i",18),e.EFF(2),e.DNE(3,qe,1,0,"i",19),e.k0s()}if(2&o){const t=i.$implicit;e.R7$(),e.HbH(t.icon),e.R7$(),e.SpI(" ",t.title," "),e.R7$(),e.Y8G("ngIf",t.completed)}}function Je(o,i){1&o&&e.nrm(0,"i",64)}function Qe(o,i){1&o&&e.nrm(0,"i",65)}function Ze(o,i){1&o&&e.nrm(0,"i",64)}function We(o,i){1&o&&e.nrm(0,"i",65)}function Ke(o,i){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"div",1)(2,"div",35)(3,"label",36),e.EFF(4,"Spouse's Name"),e.k0s(),e.nrm(5,"input",66),e.k0s(),e.j41(6,"div",35)(7,"label",36),e.EFF(8,"Spouse's SSN"),e.k0s(),e.j41(9,"div",39)(10,"input",40),e.bIt("input",function(n){e.eBV(t);const r=e.XpG(3);return e.Njj(r.formatSSNInput(n,"personalInformation.spouseSsn"))}),e.k0s(),e.j41(11,"button",41),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.toggleSSNMask("spouse-ssn"))}),e.DNE(12,Ze,1,0,"i",42)(13,We,1,0,"i",43),e.k0s()()()()()}if(2&o){let t;const s=e.XpG(3);e.R7$(10),e.Y8G("value",s.getDisplaySSN(null==(t=s.intakeForm.get("personalInformation.spouseSsn"))?null:t.value,"spouse-ssn")),e.R7$(2),e.Y8G("ngIf",s.isSSNMasked("spouse-ssn")),e.R7$(),e.Y8G("ngIf",!s.isSSNMasked("spouse-ssn"))}}function et(o,i){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"div",30)(2,"h5",31),e.EFF(3,"\u{1f510} Section A. Personal Information"),e.k0s(),e.j41(4,"button",32),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.clearSection(0))}),e.nrm(5,"i",33),e.EFF(6,"Clear Section "),e.k0s()(),e.j41(7,"div",34)(8,"div",1)(9,"div",35)(10,"label",36),e.EFF(11,"Full Name *"),e.k0s(),e.nrm(12,"input",37),e.k0s(),e.j41(13,"div",35)(14,"label",36),e.EFF(15,"Date of Birth *"),e.k0s(),e.nrm(16,"input",38),e.k0s()(),e.j41(17,"div",1)(18,"div",35)(19,"label",36),e.EFF(20,"SSN/ITIN *"),e.k0s(),e.j41(21,"div",39)(22,"input",40),e.bIt("input",function(n){e.eBV(t);const r=e.XpG(2);return e.Njj(r.formatSSNInput(n,"personalInformation.ssn"))}),e.k0s(),e.j41(23,"button",41),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.toggleSSNMask("personal-ssn"))}),e.DNE(24,Je,1,0,"i",42)(25,Qe,1,0,"i",43),e.k0s()()(),e.j41(26,"div",35)(27,"label",36),e.EFF(28,"Marital Status *"),e.k0s(),e.j41(29,"select",44)(30,"option",45),e.EFF(31,"Select Status"),e.k0s(),e.j41(32,"option",46),e.EFF(33,"Single"),e.k0s(),e.j41(34,"option",47),e.EFF(35,"Married Filing Jointly"),e.k0s(),e.j41(36,"option",48),e.EFF(37,"Married Filing Separately"),e.k0s(),e.j41(38,"option",49),e.EFF(39,"Head of Household"),e.k0s(),e.j41(40,"option",50),e.EFF(41,"Qualifying Widower"),e.k0s()()()(),e.DNE(42,Ke,14,3,"div",22),e.j41(43,"div",51)(44,"div",1)(45,"div",52)(46,"label",36),e.EFF(47,"Street Address *"),e.k0s(),e.nrm(48,"input",53),e.k0s()(),e.j41(49,"div",1)(50,"div",54)(51,"label",36),e.EFF(52,"City *"),e.k0s(),e.nrm(53,"input",55),e.k0s(),e.j41(54,"div",54)(55,"label",36),e.EFF(56,"State *"),e.k0s(),e.nrm(57,"input",56),e.k0s(),e.j41(58,"div",54)(59,"label",36),e.EFF(60,"ZIP Code *"),e.k0s(),e.nrm(61,"input",57),e.k0s()()(),e.j41(62,"div",1)(63,"div",35)(64,"label",36),e.EFF(65,"Phone *"),e.k0s(),e.j41(66,"input",58),e.bIt("input",function(n){e.eBV(t);const r=e.XpG(2);return e.Njj(r.formatPhoneInput(n,"personalInformation.phone"))}),e.k0s()(),e.j41(67,"div",35)(68,"label",36),e.EFF(69,"Email *"),e.k0s(),e.nrm(70,"input",59),e.k0s()(),e.j41(71,"div",60)(72,"h6",61),e.EFF(73,"Driver's License / State ID"),e.k0s(),e.j41(74,"div",1)(75,"div",54)(76,"label",36),e.EFF(77,"License Number"),e.k0s(),e.nrm(78,"input",62),e.k0s(),e.j41(79,"div",54)(80,"label",36),e.EFF(81,"State"),e.k0s(),e.nrm(82,"input",56),e.k0s(),e.j41(83,"div",54)(84,"label",36),e.EFF(85,"Expiration Date"),e.k0s(),e.nrm(86,"input",63),e.k0s()()()()()}if(2&o){let t,s;const n=e.XpG(2);e.R7$(22),e.Y8G("value",n.getDisplaySSN(null==(t=n.intakeForm.get("personalInformation.ssn"))?null:t.value,"personal-ssn")),e.R7$(2),e.Y8G("ngIf",n.isSSNMasked("personal-ssn")),e.R7$(),e.Y8G("ngIf",!n.isSSNMasked("personal-ssn")),e.R7$(17),e.Y8G("ngIf","married-jointly"===(null==(s=n.intakeForm.get("personalInformation.maritalStatus"))?null:s.value)||"married-separately"===(null==(s=n.intakeForm.get("personalInformation.maritalStatus"))?null:s.value))}}function tt(o,i){1&o&&(e.j41(0,"div",72),e.nrm(1,"i",73),e.j41(2,"p"),e.EFF(3,'No dependents added yet. Click "Add Dependent" to get started.'),e.k0s()())}function nt(o,i){1&o&&e.nrm(0,"i",64)}function st(o,i){1&o&&e.nrm(0,"i",65)}function ot(o,i){1&o&&(e.j41(0,"div",1)(1,"div",35)(2,"label",36),e.EFF(3,"Child Care Amount"),e.k0s(),e.nrm(4,"input",90),e.k0s()())}function it(o,i){if(1&o){const t=e.RV6();e.j41(0,"div",74)(1,"div",75)(2,"h6",31),e.EFF(3),e.k0s(),e.j41(4,"button",32),e.bIt("click",function(){const n=e.eBV(t).index,r=e.XpG(3);return e.Njj(r.removeDependent(n))}),e.nrm(5,"i",76),e.k0s()(),e.j41(6,"div",77)(7,"div",1)(8,"div",35)(9,"label",36),e.EFF(10,"Name *"),e.k0s(),e.nrm(11,"input",78),e.k0s(),e.j41(12,"div",35)(13,"label",36),e.EFF(14,"SSN/ITIN *"),e.k0s(),e.j41(15,"div",39)(16,"input",40),e.bIt("input",function(n){const r=e.eBV(t).index,a=e.XpG(3);return e.Njj(a.formatSSNInput(n,"dependents."+r+".ssn"))}),e.k0s(),e.j41(17,"button",41),e.bIt("click",function(){const n=e.eBV(t).index,r=e.XpG(3);return e.Njj(r.toggleSSNMask("dependent-ssn-"+n))}),e.DNE(18,nt,1,0,"i",42)(19,st,1,0,"i",43),e.k0s()()()(),e.j41(20,"div",1)(21,"div",54)(22,"label",36),e.EFF(23,"Date of Birth *"),e.k0s(),e.nrm(24,"input",38),e.k0s(),e.j41(25,"div",54)(26,"label",36),e.EFF(27,"Relationship *"),e.k0s(),e.j41(28,"select",79)(29,"option",45),e.EFF(30,"Select Relationship"),e.k0s(),e.j41(31,"option",80),e.EFF(32,"Son"),e.k0s(),e.j41(33,"option",81),e.EFF(34,"Daughter"),e.k0s(),e.j41(35,"option",82),e.EFF(36,"Stepchild"),e.k0s(),e.j41(37,"option",83),e.EFF(38,"Grandchild"),e.k0s(),e.j41(39,"option",84),e.EFF(40,"Other"),e.k0s()()(),e.j41(41,"div",54)(42,"label",36),e.EFF(43,"Months Lived With You"),e.k0s(),e.nrm(44,"input",85),e.k0s()(),e.j41(45,"div",1)(46,"div",35)(47,"div",86),e.nrm(48,"input",87),e.j41(49,"label",88),e.EFF(50,"Lived with you full year"),e.k0s()()(),e.j41(51,"div",35)(52,"div",86),e.nrm(53,"input",89),e.j41(54,"label",88),e.EFF(55,"Child care expenses paid"),e.k0s()()()(),e.DNE(56,ot,5,0,"div",15),e.k0s()()}if(2&o){let t,s;const n=i.$implicit,r=i.index,a=e.XpG(3);e.R7$(3),e.SpI("Dependent ",r+1,""),e.R7$(3),e.Y8G("formGroup",n),e.R7$(10),e.Y8G("value",a.getDisplaySSN(null==(t=n.get("ssn"))?null:t.value,"dependent-ssn-"+r)),e.R7$(2),e.Y8G("ngIf",a.isSSNMasked("dependent-ssn-"+r)),e.R7$(),e.Y8G("ngIf",!a.isSSNMasked("dependent-ssn-"+r)),e.R7$(29),e.Mz_("id","fullYear_",r,""),e.R7$(),e.Mz_("for","fullYear_",r,""),e.R7$(4),e.Mz_("id","childCare_",r,""),e.R7$(),e.Mz_("for","childCare_",r,""),e.R7$(2),e.Y8G("ngIf",null==(s=n.get("childCareExpenses"))?null:s.value)}}function rt(o,i){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"div",30)(2,"h5",31),e.EFF(3,"\u{1f468}\u200d\u{1f469}\u200d\u{1f467} Section B. Dependents"),e.k0s(),e.j41(4,"div",67)(5,"button",32),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.clearSection(1))}),e.nrm(6,"i",33),e.EFF(7,"Clear Section "),e.k0s(),e.j41(8,"button",68),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.addDependent())}),e.nrm(9,"i",69),e.EFF(10,"Add Dependent "),e.k0s()()(),e.DNE(11,tt,4,0,"div",70)(12,it,57,14,"div",71),e.k0s()}if(2&o){const t=e.XpG(2);e.R7$(11),e.Y8G("ngIf",0===t.dependentsArray.length),e.R7$(),e.Y8G("ngForOf",t.dependentsArray.controls)}}function at(o,i){1&o&&(e.j41(0,"div",72),e.nrm(1,"i",91),e.j41(2,"p"),e.EFF(3,'No income sources added yet. Click "Add Income Source" to get started.'),e.k0s()())}function lt(o,i){1&o&&(e.j41(0,"div",1)(1,"div",35)(2,"label",36),e.EFF(3,"Employer Name"),e.k0s(),e.nrm(4,"input",105),e.k0s()())}function ct(o,i){if(1&o){const t=e.RV6();e.j41(0,"div",74)(1,"div",75)(2,"h6",31),e.EFF(3),e.k0s(),e.j41(4,"button",32),e.bIt("click",function(){const n=e.eBV(t).index,r=e.XpG(3);return e.Njj(r.removeIncomeSource(n))}),e.nrm(5,"i",76),e.k0s()(),e.j41(6,"div",77)(7,"div",1)(8,"div",54)(9,"label",36),e.EFF(10,"Income Type *"),e.k0s(),e.j41(11,"select",92)(12,"option",45),e.EFF(13,"Select Type"),e.k0s(),e.j41(14,"option",93),e.EFF(15,"W-2 Employment Income"),e.k0s(),e.j41(16,"option",94),e.EFF(17,"1099-NEC (Freelance/Contractor)"),e.k0s(),e.j41(18,"option",95),e.EFF(19,"1099-MISC"),e.k0s(),e.j41(20,"option",96),e.EFF(21,"1099-INT (Interest)"),e.k0s(),e.j41(22,"option",97),e.EFF(23,"1099-DIV (Dividends)"),e.k0s(),e.j41(24,"option",98),e.EFF(25,"1099-B (Stock Sales)"),e.k0s(),e.j41(26,"option",99),e.EFF(27,"1099-R (Retirement)"),e.k0s(),e.j41(28,"option",100),e.EFF(29,"SSA-1099 (Social Security)"),e.k0s(),e.j41(30,"option",101),e.EFF(31,"Rental Income"),e.k0s(),e.j41(32,"option",102),e.EFF(33,"Business/Self-Employment"),e.k0s(),e.j41(34,"option",84),e.EFF(35,"Other Income"),e.k0s()()(),e.j41(36,"div",54)(37,"label",36),e.EFF(38,"Description *"),e.k0s(),e.nrm(39,"input",103),e.k0s(),e.j41(40,"div",54)(41,"label",36),e.EFF(42,"Amount *"),e.k0s(),e.nrm(43,"input",104),e.k0s()(),e.DNE(44,lt,5,0,"div",15),e.k0s()()}if(2&o){let t;const s=i.$implicit,n=i.index;e.R7$(3),e.SpI("Income Source ",n+1,""),e.R7$(3),e.Y8G("formGroup",s),e.R7$(38),e.Y8G("ngIf","w2"===(null==(t=s.get("type"))?null:t.value))}}function dt(o,i){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"div",30)(2,"h5",31),e.EFF(3,"\u{1f4bc} Section C. Income"),e.k0s(),e.j41(4,"div",67)(5,"button",32),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.clearSection(2))}),e.nrm(6,"i",33),e.EFF(7,"Clear Section "),e.k0s(),e.j41(8,"button",68),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.addIncomeSource())}),e.nrm(9,"i",69),e.EFF(10,"Add Income Source "),e.k0s()()(),e.DNE(11,at,4,0,"div",70)(12,ct,45,3,"div",71),e.k0s()}if(2&o){const t=e.XpG(2);e.R7$(11),e.Y8G("ngIf",0===t.incomeArray.length),e.R7$(),e.Y8G("ngForOf",t.incomeArray.controls)}}function pt(o,i){1&o&&(e.j41(0,"div",124),e.nrm(1,"input",125),e.k0s())}function ut(o,i){1&o&&(e.j41(0,"div",124),e.nrm(1,"input",126),e.k0s())}function mt(o,i){1&o&&(e.j41(0,"div",124),e.nrm(1,"input",127),e.k0s())}function ht(o,i){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"div",30)(2,"h5",31),e.EFF(3,"\u{1f4b8} Section D. Deductions & Adjustments"),e.k0s(),e.j41(4,"button",32),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.clearSection(3))}),e.nrm(5,"i",33),e.EFF(6,"Clear Section "),e.k0s()(),e.j41(7,"div",106)(8,"div",1)(9,"div",35)(10,"div",86),e.nrm(11,"input",107),e.j41(12,"label",108),e.EFF(13,"Mortgage Interest Paid"),e.k0s()(),e.DNE(14,pt,2,0,"div",109),e.k0s(),e.j41(15,"div",35)(16,"div",86),e.nrm(17,"input",110),e.j41(18,"label",111),e.EFF(19,"Property Taxes Paid"),e.k0s()(),e.DNE(20,ut,2,0,"div",109),e.k0s()(),e.j41(21,"div",1)(22,"div",35)(23,"label",36),e.EFF(24,"Charitable Contributions (Cash)"),e.k0s(),e.nrm(25,"input",112),e.k0s(),e.j41(26,"div",35)(27,"label",36),e.EFF(28,"Charitable Contributions (Non-Cash)"),e.k0s(),e.nrm(29,"input",113),e.k0s()(),e.j41(30,"div",1)(31,"div",35)(32,"div",86),e.nrm(33,"input",114),e.j41(34,"label",115),e.EFF(35,"Student Loan Interest Paid"),e.k0s()(),e.DNE(36,mt,2,0,"div",109),e.k0s(),e.j41(37,"div",35)(38,"label",36),e.EFF(39,"IRA/401(k) Contributions"),e.k0s(),e.nrm(40,"input",116),e.k0s()(),e.j41(41,"div",1)(42,"div",35)(43,"label",36),e.EFF(44,"IRA Type"),e.k0s(),e.j41(45,"select",117)(46,"option",45),e.EFF(47,"Select Type"),e.k0s(),e.j41(48,"option",118),e.EFF(49,"Traditional IRA"),e.k0s(),e.j41(50,"option",119),e.EFF(51,"Roth IRA"),e.k0s(),e.j41(52,"option",120),e.EFF(53,"401(k)"),e.k0s(),e.j41(54,"option",121),e.EFF(55,"403(b)"),e.k0s()()(),e.j41(56,"div",35)(57,"label",36),e.EFF(58,"Medical Expenses (Out-of-Pocket)"),e.k0s(),e.nrm(59,"input",122),e.k0s()(),e.j41(60,"div",61)(61,"label",36),e.EFF(62,"Other Adjustments"),e.k0s(),e.nrm(63,"textarea",123),e.k0s()()()}if(2&o){let t,s,n;const r=e.XpG(2);e.R7$(14),e.Y8G("ngIf",null==(t=r.intakeForm.get("deductionsAdjustments.mortgageInterest"))?null:t.value),e.R7$(6),e.Y8G("ngIf",null==(s=r.intakeForm.get("deductionsAdjustments.propertyTaxes"))?null:s.value),e.R7$(16),e.Y8G("ngIf",null==(n=r.intakeForm.get("deductionsAdjustments.studentLoanInterest"))?null:n.value)}}function gt(o,i){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"div",30)(2,"h5",31),e.EFF(3,"\u{1f3e5} Section E. Health Coverage"),e.k0s(),e.j41(4,"button",32),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.clearSection(4))}),e.nrm(5,"i",33),e.EFF(6,"Clear Section "),e.k0s()(),e.j41(7,"div",128)(8,"div",129)(9,"label",36),e.EFF(10,"Did you have health insurance all year? *"),e.k0s(),e.j41(11,"div",86),e.nrm(12,"input",130),e.j41(13,"label",131),e.EFF(14,"Yes"),e.k0s()(),e.j41(15,"div",86),e.nrm(16,"input",132),e.j41(17,"label",133),e.EFF(18,"No"),e.k0s()()(),e.j41(19,"div",1)(20,"div",54)(21,"div",86),e.nrm(22,"input",134),e.j41(23,"label",135),e.EFF(24,"Marketplace Coverage"),e.k0s()()(),e.j41(25,"div",54)(26,"div",86),e.nrm(27,"input",136),e.j41(28,"label",137),e.EFF(29,"Employer Coverage"),e.k0s()()()(),e.j41(30,"div",1)(31,"div",54)(32,"div",86),e.nrm(33,"input",138),e.j41(34,"label",139),e.EFF(35,"Form 1095-A (Marketplace)"),e.k0s()()(),e.j41(36,"div",54)(37,"div",86),e.nrm(38,"input",140),e.j41(39,"label",141),e.EFF(40,"Form 1095-B"),e.k0s()()(),e.j41(41,"div",54)(42,"div",86),e.nrm(43,"input",142),e.j41(44,"label",143),e.EFF(45,"Form 1095-C"),e.k0s()()()()()()}2&o&&(e.R7$(12),e.Y8G("value",!0),e.R7$(4),e.Y8G("value",!1))}function ft(o,i){1&o&&(e.j41(0,"div",1)(1,"div",35)(2,"label",36),e.EFF(3,"Care Provider Name"),e.k0s(),e.nrm(4,"input",152),e.k0s(),e.j41(5,"div",35)(6,"label",36),e.EFF(7,"Care Provider EIN/SSN"),e.k0s(),e.nrm(8,"input",153),e.k0s()())}function bt(o,i){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"div",30)(2,"h5",31),e.EFF(3,"\u{1f393} Section F. Credits"),e.k0s(),e.j41(4,"button",32),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.clearSection(5))}),e.nrm(5,"i",33),e.EFF(6,"Clear Section "),e.k0s()(),e.j41(7,"div",144)(8,"div",1)(9,"div",35)(10,"label",36),e.EFF(11,"Education Expenses"),e.k0s(),e.nrm(12,"input",145),e.k0s(),e.j41(13,"div",35)(14,"div",146),e.nrm(15,"input",147),e.j41(16,"label",148),e.EFF(17,"Have Form 1098-T (Tuition Statement)"),e.k0s()()()(),e.j41(18,"div",1)(19,"div",35)(20,"label",36),e.EFF(21,"Child & Dependent Care Expenses"),e.k0s(),e.nrm(22,"input",149),e.k0s()(),e.DNE(23,ft,9,0,"div",15),e.j41(24,"div",1)(25,"div",35)(26,"label",36),e.EFF(27,"Adoption Expenses"),e.k0s(),e.nrm(28,"input",150),e.k0s(),e.j41(29,"div",35)(30,"label",36),e.EFF(31,"Energy-Efficient Home Upgrades"),e.k0s(),e.nrm(32,"input",151),e.k0s()()()()}if(2&o){let t;const s=e.XpG(2);e.R7$(23),e.Y8G("ngIf",(null==(t=s.intakeForm.get("credits.childCareExpenses"))?null:t.value)>0)}}function _t(o,i){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"div",30)(2,"h5",31),e.EFF(3,"\u{1f4c2} Section G. Prior Year & IRS Notices"),e.k0s(),e.j41(4,"button",32),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.clearSection(6))}),e.nrm(5,"i",33),e.EFF(6,"Clear Section "),e.k0s()(),e.j41(7,"div",154)(8,"div",129)(9,"label",36),e.EFF(10,"Did you file taxes last year?"),e.k0s(),e.j41(11,"div",86),e.nrm(12,"input",155),e.j41(13,"label",156),e.EFF(14,"Yes"),e.k0s()(),e.j41(15,"div",86),e.nrm(16,"input",157),e.j41(17,"label",158),e.EFF(18,"No"),e.k0s()()(),e.j41(19,"div",129)(20,"div",86),e.nrm(21,"input",159),e.j41(22,"label",160),e.EFF(23,"Received IRS or State Notices"),e.k0s()()(),e.j41(24,"div",61)(25,"label",36),e.EFF(26,"Other Notes or Questions"),e.k0s(),e.nrm(27,"textarea",161),e.k0s()()()}2&o&&(e.R7$(12),e.Y8G("value",!0),e.R7$(4),e.Y8G("value",!1))}function kt(o,i){if(1&o){const t=e.RV6();e.j41(0,"button",162),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.submitForm())}),e.nrm(1,"i",163),e.EFF(2,"Submit Form "),e.k0s()}if(2&o){const t=e.XpG(2);e.Y8G("disabled",!t.intakeForm.valid||t.isLoading)}}function vt(o,i){if(1&o){const t=e.RV6();e.j41(0,"button",164),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.nextSection())}),e.EFF(1," Next"),e.nrm(2,"i",165),e.k0s()}}function xt(o,i){if(1&o){const t=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"form",21),e.DNE(5,et,87,4,"div",22)(6,rt,13,2,"div",22)(7,dt,13,2,"div",22)(8,ht,64,3,"div",22)(9,gt,46,2,"div",22)(10,bt,33,1,"div",22)(11,_t,28,2,"div",22),e.j41(12,"div",23)(13,"button",24),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.previousSection())}),e.nrm(14,"i",25),e.EFF(15,"Previous "),e.k0s(),e.j41(16,"div")(17,"button",26),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.autoSave())}),e.nrm(18,"i",27),e.EFF(19,"Save Draft "),e.k0s(),e.DNE(20,kt,3,1,"button",28)(21,vt,3,0,"button",29),e.k0s()()()()()()()}if(2&o){const t=e.XpG();e.R7$(4),e.Y8G("formGroup",t.intakeForm),e.R7$(),e.Y8G("ngIf",0===t.currentSection),e.R7$(),e.Y8G("ngIf",1===t.currentSection),e.R7$(),e.Y8G("ngIf",2===t.currentSection),e.R7$(),e.Y8G("ngIf",3===t.currentSection),e.R7$(),e.Y8G("ngIf",4===t.currentSection),e.R7$(),e.Y8G("ngIf",5===t.currentSection),e.R7$(),e.Y8G("ngIf",6===t.currentSection),e.R7$(2),e.Y8G("disabled",0===t.currentSection),e.R7$(4),e.Y8G("disabled",t.isSaving),e.R7$(3),e.Y8G("ngIf",t.currentSection===t.sections.length-1),e.R7$(),e.Y8G("ngIf",t.currentSection<t.sections.length-1)}}function Ct(o,i){1&o&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",166)(4,"div",167)(5,"span",12),e.EFF(6,"Loading..."),e.k0s()(),e.j41(7,"p",168),e.EFF(8,"Loading your intake form..."),e.k0s()()()()())}let Ft=(()=>{class o{constructor(t,s,n){this.fb=t,this.apiService=s,this.route=n,this.destroy$=new L.B,this.currentSection=0,this.progress=0,this.isLoading=!1,this.isSaving=!1,this.formId=1,this.projectId=null,this.clientId=null,this.ssnMasked={},this.sections=[{id:0,title:"Personal Information",description:"Basic personal and contact information",icon:"ri-user-line",completed:!1,required:!0},{id:1,title:"Dependents",description:"Information about dependents and children",icon:"ri-group-line",completed:!1,required:!1},{id:2,title:"Income",description:"All sources of income for the tax year",icon:"ri-money-dollar-circle-line",completed:!1,required:!0},{id:3,title:"Deductions & Adjustments",description:"Itemized deductions and income adjustments",icon:"ri-calculator-line",completed:!1,required:!1},{id:4,title:"Health Coverage",description:"Health insurance coverage information",icon:"ri-heart-pulse-line",completed:!1,required:!0},{id:5,title:"Credits",description:"Tax credits and education expenses",icon:"ri-award-line",completed:!1,required:!1},{id:6,title:"Prior Year & IRS Notices",description:"Previous year information and IRS correspondence",icon:"ri-file-text-line",completed:!1,required:!1}],this.initializeForm();const r=localStorage.getItem("currentUser");r&&(this.currentUser=JSON.parse(r))}ngOnInit(){this.route.queryParams.subscribe(t=>{this.projectId=t.projectId?+t.projectId:null,this.clientId=t.clientId?+t.clientId:null}),this.loadExistingData(),this.setupAutoSave(),this.progress=0}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeForm(){this.intakeForm=this.fb.group({personalInformation:this.fb.group({fullName:["",d.k0.required],dateOfBirth:["",d.k0.required],ssn:["",[d.k0.required,d.k0.pattern(/^\d{3}-\d{2}-\d{4}$/)]],maritalStatus:["",d.k0.required],spouseName:[""],spouseSsn:[""],address:this.fb.group({street:["",d.k0.required],city:["",d.k0.required],state:["",d.k0.required],zipCode:["",[d.k0.required,d.k0.pattern(/^\d{5}(-\d{4})?$/)]]}),phone:["",[d.k0.required,d.k0.pattern(/^\(\d{3}\) \d{3}-\d{4}$/)]],email:["",[d.k0.required,d.k0.email]],driverLicense:this.fb.group({number:[""],state:[""],expiration:[""]})}),dependents:this.fb.array([]),incomeSource:this.fb.array([]),deductionsAdjustments:this.fb.group({mortgageInterest:[!1],mortgageAmount:[0],propertyTaxes:[!1],propertyTaxAmount:[0],charitableCash:[0],charitableNonCash:[0],studentLoanInterest:[!1],studentLoanAmount:[0],iraContributions:[0],iraType:[""],medicalExpenses:[0],otherAdjustments:[""]}),healthCoverage:this.fb.group({hadInsuranceAllYear:[null,d.k0.required],marketplaceCoverage:[!1],employerCoverage:[!1],form1095A:[!1],form1095B:[!1],form1095C:[!1]}),credits:this.fb.group({educationExpenses:[0],tuition1098T:[!1],childCareExpenses:[0],childCareProviderName:[""],childCareProviderEin:[""],adoptionExpenses:[0],energyEfficiencyUpgrades:[0]}),priorYearInfo:this.fb.group({filedLastYear:[null],estimatedTaxPayments:this.fb.array([]),irsNotices:[!1],otherNotes:[""]})})}loadExistingData(){this.isLoading=!0,console.log("\u{1f504} Loading existing intake data"),console.log("Form ID:",this.formId),console.log("Auth token exists:",!!localStorage.getItem("authToken")),this.apiService.getMyIntakeResponse(this.formId).pipe((0,w.Q)(this.destroy$)).subscribe({next:t=>{console.log("\u2705 Load response received:",t),t.success&&t.response?(console.log("\u{1f4cb} Populating form with existing data"),console.log("Raw response data:",t.response),this.populateFormFromAPI(t.response)):console.log("\u2139\ufe0f No existing data found or response not successful"),this.isLoading=!1},error:t=>{console.error("\u274c Error loading intake form:",t),console.error("Error details:",{status:t.status,statusText:t.statusText,message:t.message,error:t.error}),404!==t.status?401===t.status||400===t.status?(console.error("\u{1f6a8} Authentication issue while loading data"),k().fire({title:"Authentication Error",text:"Your session may have expired. Please log in again.",icon:"warning",confirmButtonText:"Login",showCancelButton:!0}).then(s=>{s.isConfirmed&&(window.location.href="/account/login")})):k().fire({title:"Error",text:"Failed to load existing form data.",icon:"error"}):console.log("\u2139\ufe0f No existing data found (404)"),this.isLoading=!1}})}populateFormFromAPI(t){try{let s;if(console.log("\u{1f50d} Parsing form data:",t),t.answersJson?(s="string"==typeof t.answersJson?JSON.parse(t.answersJson):t.answersJson,console.log("\u{1f4ca} Parsed answersJson:",s)):t.responseJson&&"string"==typeof t.responseJson?(s=JSON.parse(t.responseJson),console.log("\u{1f4ca} Parsed responseJson (fallback):",s)):t.responseJson&&"object"==typeof t.responseJson?(s=t.responseJson,console.log("\u{1f4ca} Using responseJson object (fallback):",s)):(s=t,console.log("\u{1f4ca} Using data directly:",s)),s.personalInfo){const n={...s.personalInfo};n.firstName&&n.lastName&&!n.fullName&&(n.fullName=`${n.firstName} ${n.lastName}`),this.intakeForm.get("personalInformation")?.patchValue(n)}if(s.incomeInfo){if(s.incomeInfo.sources&&s.incomeInfo.sources.length>0){const n=this.intakeForm.get("incomeSource");s.incomeInfo.sources.forEach(r=>{n.push(this.createIncomeGroup(r))})}if(s.incomeInfo.dependents&&s.incomeInfo.dependents.length>0){const n=this.intakeForm.get("dependents");s.incomeInfo.dependents.forEach(r=>{n.push(this.createDependentGroup(r))})}}if(s.deductionsInfo){const n={...s.deductionsInfo};n.healthCoverage&&(this.intakeForm.get("healthCoverage")?.patchValue(n.healthCoverage),delete n.healthCoverage),n.credits&&(this.intakeForm.get("credits")?.patchValue(n.credits),delete n.credits),n.priorYearInfo&&(this.intakeForm.get("priorYearInfo")?.patchValue(n.priorYearInfo),delete n.priorYearInfo),this.intakeForm.get("deductionsAdjustments")?.patchValue(n)}this.updateProgress()}catch(s){console.error("Error parsing intake form data:",s),this.updateProgress()}}setupAutoSave(){this.intakeForm.valueChanges.pipe((0,Ve.B)(2e3),(0,Ue.F)(),(0,w.Q)(this.destroy$)).subscribe(()=>{this.autoSave()})}autoSave(){if(!this.isSaving){this.isSaving=!0;const t=this.prepareAPIFormData();console.log("\u{1f504} Auto-save triggered"),console.log("\u{1f4cb} Form data structure:",Object.keys(JSON.parse(t.responseJson))),console.log("\u{1f511} Auth token check:",!!localStorage.getItem("authToken"));const s={...t,projectId:this.projectId,clientId:this.clientId};this.apiService.saveMyIntakeDraft(this.formId,s).pipe((0,w.Q)(this.destroy$)).subscribe({next:n=>{if(this.isSaving=!1,this.updateProgress(),console.log("\u2705 Auto-save successful:",n),n.success){const r=document.createElement("div");r.className="toast-container position-fixed top-0 end-0 p-3",r.innerHTML='\n                <div class="toast show" role="alert">\n                  <div class="toast-body bg-success text-white">\n                    <i class="ri-check-line me-1"></i>Draft saved successfully\n                  </div>\n                </div>\n              ',document.body.appendChild(r),setTimeout(()=>document.body.removeChild(r),3e3)}},error:n=>{this.isSaving=!1,console.error("\u274c Auto-save failed:",n),console.error("Error details:",{status:n.status,statusText:n.statusText,message:n.message,error:n.error}),401===n.status||400===n.status?(console.error("\u{1f6a8} Authentication issue detected"),console.error("Current token:",localStorage.getItem("authToken")?"exists":"missing"),k().fire({title:"Authentication Error",text:"Your session may have expired. Please log in again.",icon:"warning",confirmButtonText:"Login",showCancelButton:!0}).then(r=>{r.isConfirmed&&(window.location.href="/account/login")})):k().fire({title:"Save Failed",text:"Unable to save draft. Please try again.",icon:"error",timer:3e3,showConfirmButton:!1})}})}}prepareAPIFormData(){const t=this.intakeForm.value,s={personalInfo:{firstName:t.personalInformation?.fullName?.split(" ")[0]||"",lastName:t.personalInformation?.fullName?.split(" ").slice(1).join(" ")||"",email:t.personalInformation?.email||"",phone:t.personalInformation?.phone||"",dateOfBirth:t.personalInformation?.dateOfBirth||"",ssn:t.personalInformation?.ssn||"",maritalStatus:t.personalInformation?.maritalStatus||"",address:t.personalInformation?.address||{}},incomeInfo:{sources:t.incomeSource||[],dependents:t.dependents||[],estimatedIncome:this.calculateTotalIncome(t.incomeSource||[])},deductionsInfo:{...t.deductionsAdjustments,healthCoverage:t.healthCoverage,credits:t.credits,priorYearInfo:t.priorYearInfo},documentsInfo:{currentSection:this.currentSection,progress:this.progress,lastSaved:(new Date).toISOString(),completedSections:this.sections.filter(n=>n.completed).length},additionalInfo:{formVersion:"1.0",submissionSource:"client-portal"}};return{responseJson:JSON.stringify(s)}}prepareLegacyAPIFormData(){const t=this.prepareAPIFormData();return{formId:1,responseJson:JSON.stringify(t)}}calculateTotalIncome(t){return t.reduce((s,n)=>s+(n.amount||0),0)}updateProgress(){this.progress=this.calculateProgress()}calculateProgress(){this.sections.forEach((n,r)=>{n.completed=this.isSectionCompleted(r)});const t=this.sections.length,s=this.sections.filter(n=>n.completed).length;return Math.round(s/t*100)}isSectionCompleted(t){const s=this.intakeForm.value;switch(t){case 0:const n=s.personalInformation;return!!(n?.fullName&&n?.ssn&&n?.address?.street);case 1:case 3:case 5:return!0;case 2:return s.incomeSource&&s.incomeSource.length>0;case 4:return null!==s.healthCoverage?.hadInsuranceAllYear;case 6:return null!==s.priorYearInfo?.filedLastYear;default:return!1}}goToSection(t){this.currentSection=t}nextSection(){this.currentSection<this.sections.length-1&&this.currentSection++}previousSection(){this.currentSection>0&&this.currentSection--}get dependentsArray(){return this.intakeForm.get("dependents")}get incomeArray(){return this.intakeForm.get("incomeSource")}createDependentGroup(t){return this.fb.group({id:[t?.id||this.generateId()],name:[t?.name||"",d.k0.required],ssn:[t?.ssn||"",[d.k0.required,d.k0.pattern(/^\d{3}-\d{2}-\d{4}$/)]],dateOfBirth:[t?.dateOfBirth||"",d.k0.required],relationship:[t?.relationship||"",d.k0.required],monthsLivedWithYou:[t?.monthsLivedWithYou||12,[d.k0.min(1),d.k0.max(12)]],fullYear:[void 0===t?.fullYear||t.fullYear],childCareExpenses:[t?.childCareExpenses||!1],childCareAmount:[t?.childCareAmount||0]})}createIncomeGroup(t){return this.fb.group({id:[t?.id||this.generateId()],type:[t?.type||"",d.k0.required],description:[t?.description||"",d.k0.required],amount:[t?.amount||0,[d.k0.required,d.k0.min(0)]],employerName:[t?.employerName||""],details:[t?.details||{}]})}addDependent(){this.dependentsArray.push(this.createDependentGroup())}removeDependent(t){this.dependentsArray.removeAt(t)}addIncomeSource(){this.incomeArray.push(this.createIncomeGroup())}removeIncomeSource(t){this.incomeArray.removeAt(t)}toggleSSNMask(t){this.ssnMasked[t]=!this.ssnMasked[t]}isSSNMasked(t){return!1!==this.ssnMasked[t]}getDisplaySSN(t,s){return this.isSSNMasked(s)?this.maskSSN(t):t}maskSSN(t){if(!t)return"";const s=t.replace(/\D/g,"");return s.length>=9?`***-**-${s.slice(-4)}`:t}formatSSNInput(t,s){const r=this.formatSSN(t.target.value);this.intakeForm.get(s)?.setValue(r)}formatSSN(t){const s=t.replace(/\D/g,"");return s.length>=9?`${s.slice(0,3)}-${s.slice(3,5)}-${s.slice(5,9)}`:s.length>=5?`${s.slice(0,3)}-${s.slice(3,5)}-${s.slice(5)}`:s.length>=3?`${s.slice(0,3)}-${s.slice(3)}`:s}generateId(){return Math.random().toString(36).substr(2,9)}formatPhoneInput(t,s){const n=t.target.value.replace(/\D/g,"");let r="";r=n.length>=10?`(${n.slice(0,3)}) ${n.slice(3,6)}-${n.slice(6,10)}`:n.length>=6?`(${n.slice(0,3)}) ${n.slice(3,6)}-${n.slice(6)}`:n.length>=3?`(${n.slice(0,3)}) ${n.slice(3)}`:n,this.intakeForm.get(s)?.setValue(r)}clearSection(t){k().fire({title:"Clear Section",text:`Are you sure you want to clear all data in the "${this.sections[t].title}" section?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, Clear Section",cancelButtonText:"Cancel"}).then(s=>{s.isConfirmed&&this.performClearSection(t)})}performClearSection(t){switch(t){case 0:this.intakeForm.get("personalInformation")?.reset();break;case 1:const s=this.intakeForm.get("dependents");for(;0!==s.length;)s.removeAt(0);break;case 2:const n=this.intakeForm.get("incomeSource");for(;0!==n.length;)n.removeAt(0);break;case 3:this.intakeForm.get("deductionsAdjustments")?.reset();break;case 4:this.intakeForm.get("healthCoverage")?.reset();break;case 5:this.intakeForm.get("credits")?.reset();break;case 6:this.intakeForm.get("priorYearInfo")?.reset();const r=this.intakeForm.get("priorYearInfo.estimatedTaxPayments");if(r)for(;0!==r.length;)r.removeAt(0)}this.updateProgress(),k().fire({title:"Section Cleared",text:`The "${this.sections[t].title}" section has been cleared.`,icon:"success",timer:2e3,showConfirmButton:!1})}submitForm(){this.intakeForm.valid?k().fire({title:"Submit Intake Form",text:"Are you sure you want to submit your tax intake form? You won't be able to make changes after submission.",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Submit"}).then(t=>{t.isConfirmed&&this.performSubmit()}):k().fire({title:"Form Incomplete",text:"Please complete all required sections before submitting.",icon:"warning"})}performSubmit(){this.isLoading=!0;const t=this.prepareAPIFormData(),s=JSON.parse(t.responseJson);s.documentsInfo={...s.documentsInfo,status:"submitted",submittedAt:(new Date).toISOString()};const r={responseJson:JSON.stringify(s),projectId:this.projectId,clientId:this.clientId};this.apiService.submitMyIntakeResponse(this.formId,r).pipe((0,w.Q)(this.destroy$)).subscribe({next:a=>{this.isLoading=!1,a.success?k().fire({title:"Success!",text:"Your tax intake form has been submitted successfully.",icon:"success"}):k().fire({title:"Error",text:a.message||"There was an error submitting your form.",icon:"error"})},error:a=>{this.isLoading=!1,k().fire({title:"Error",text:"There was an error submitting your form. Please try again.",icon:"error"}),console.error("Submit error:",a)}})}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(d.ok),e.rXU(re.G),e.rXU(O.nX))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-tax-intake"]],decls:20,vars:10,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"card-title","mb-0"],[1,"d-flex","align-items-center"],["class","badge bg-info me-2",4,"ngIf"],[1,"text-muted"],[1,"progress","mb-3",2,"height","12px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-info"],[1,"visually-hidden"],[1,"d-flex","flex-wrap","gap-2"],["type","button","class","btn btn-sm btn-info",3,"click",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"badge","bg-info","me-2"],["type","button",1,"btn","btn-sm","btn-info",3,"click"],[1,"me-1"],["class","ri-check-line ms-1",4,"ngIf"],[1,"ri-check-line","ms-1"],[3,"formGroup"],[4,"ngIf"],[1,"d-flex","justify-content-between","mt-4"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"ri-arrow-left-line","me-1"],["type","button",1,"btn","btn-info","me-2",3,"click","disabled"],[1,"ri-save-line","me-1"],["type","button","class","btn btn-info",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-info",3,"click",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"mb-0"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"ri-delete-bin-line","me-1"],["formGroupName","personalInformation"],[1,"col-md-6","mb-3"],[1,"form-label"],["type","text","formControlName","fullName",1,"form-control"],["type","date","formControlName","dateOfBirth",1,"form-control"],[1,"input-group"],["type","text","placeholder","***-**-****",1,"form-control",3,"input","value"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["class","ri-eye-line",4,"ngIf"],["class","ri-eye-off-line",4,"ngIf"],["formControlName","maritalStatus",1,"form-select"],["value",""],["value","single"],["value","married-jointly"],["value","married-separately"],["value","head-of-household"],["value","qualifying-widower"],["formGroupName","address"],[1,"col-12","mb-3"],["type","text","formControlName","street",1,"form-control"],[1,"col-md-4","mb-3"],["type","text","formControlName","city",1,"form-control"],["type","text","formControlName","state",1,"form-control"],["type","text","formControlName","zipCode",1,"form-control"],["type","tel","formControlName","phone","placeholder","(555) 123-4567",1,"form-control",3,"input"],["type","email","formControlName","email",1,"form-control"],["formGroupName","driverLicense"],[1,"mb-3"],["type","text","formControlName","number",1,"form-control"],["type","date","formControlName","expiration",1,"form-control"],[1,"ri-eye-line"],[1,"ri-eye-off-line"],["type","text","formControlName","spouseName",1,"form-control"],[1,"d-flex","gap-2"],["type","button",1,"btn","btn-info","btn-sm",3,"click"],[1,"ri-add-line","me-1"],["class","text-center text-muted py-4",4,"ngIf"],["class","card mb-3",4,"ngFor","ngForOf"],[1,"text-center","text-muted","py-4"],[1,"ri-group-line","font-size-48","mb-3","d-block"],[1,"card","mb-3"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"ri-delete-bin-line"],[1,"card-body",3,"formGroup"],["type","text","formControlName","name",1,"form-control"],["formControlName","relationship",1,"form-select"],["value","son"],["value","daughter"],["value","stepchild"],["value","grandchild"],["value","other"],["type","number","formControlName","monthsLivedWithYou","min","1","max","12",1,"form-control"],[1,"form-check"],["type","checkbox","formControlName","fullYear",1,"form-check-input",3,"id"],[1,"form-check-label",3,"for"],["type","checkbox","formControlName","childCareExpenses",1,"form-check-input",3,"id"],["type","number","formControlName","childCareAmount","min","0",1,"form-control"],[1,"ri-money-dollar-circle-line","font-size-48","mb-3","d-block"],["formControlName","type",1,"form-select"],["value","w2"],["value","1099-nec"],["value","1099-misc"],["value","1099-int"],["value","1099-div"],["value","1099-b"],["value","1099-r"],["value","ssa-1099"],["value","rental"],["value","business"],["type","text","formControlName","description","placeholder","e.g., ABC Company, Rental Property",1,"form-control"],["type","number","formControlName","amount","min","0","step","0.01",1,"form-control"],["type","text","formControlName","employerName",1,"form-control"],["formGroupName","deductionsAdjustments"],["type","checkbox","formControlName","mortgageInterest","id","mortgageInterest",1,"form-check-input"],["for","mortgageInterest",1,"form-check-label"],["class","mt-2",4,"ngIf"],["type","checkbox","formControlName","propertyTaxes","id","propertyTaxes",1,"form-check-input"],["for","propertyTaxes",1,"form-check-label"],["type","number","formControlName","charitableCash","min","0",1,"form-control"],["type","number","formControlName","charitableNonCash","min","0",1,"form-control"],["type","checkbox","formControlName","studentLoanInterest","id","studentLoanInterest",1,"form-check-input"],["for","studentLoanInterest",1,"form-check-label"],["type","number","formControlName","iraContributions","min","0",1,"form-control"],["formControlName","iraType",1,"form-select"],["value","traditional"],["value","roth"],["value","401k"],["value","403b"],["type","number","formControlName","medicalExpenses","min","0",1,"form-control"],["formControlName","otherAdjustments","rows","3","placeholder","Describe any other deductions or adjustments",1,"form-control"],[1,"mt-2"],["type","number","formControlName","mortgageAmount","placeholder","Amount","min","0",1,"form-control"],["type","number","formControlName","propertyTaxAmount","placeholder","Amount","min","0",1,"form-control"],["type","number","formControlName","studentLoanAmount","placeholder","Amount","min","0",1,"form-control"],["formGroupName","healthCoverage"],[1,"mb-4"],["type","radio","formControlName","hadInsuranceAllYear","id","insurance_yes",1,"form-check-input",3,"value"],["for","insurance_yes",1,"form-check-label"],["type","radio","formControlName","hadInsuranceAllYear","id","insurance_no",1,"form-check-input",3,"value"],["for","insurance_no",1,"form-check-label"],["type","checkbox","formControlName","marketplaceCoverage","id","marketplace",1,"form-check-input"],["for","marketplace",1,"form-check-label"],["type","checkbox","formControlName","employerCoverage","id","employer",1,"form-check-input"],["for","employer",1,"form-check-label"],["type","checkbox","formControlName","form1095A","id","form1095A",1,"form-check-input"],["for","form1095A",1,"form-check-label"],["type","checkbox","formControlName","form1095B","id","form1095B",1,"form-check-input"],["for","form1095B",1,"form-check-label"],["type","checkbox","formControlName","form1095C","id","form1095C",1,"form-check-input"],["for","form1095C",1,"form-check-label"],["formGroupName","credits"],["type","number","formControlName","educationExpenses","min","0",1,"form-control"],[1,"form-check","mt-4"],["type","checkbox","formControlName","tuition1098T","id","tuition1098T",1,"form-check-input"],["for","tuition1098T",1,"form-check-label"],["type","number","formControlName","childCareExpenses","min","0",1,"form-control"],["type","number","formControlName","adoptionExpenses","min","0",1,"form-control"],["type","number","formControlName","energyEfficiencyUpgrades","min","0",1,"form-control"],["type","text","formControlName","childCareProviderName",1,"form-control"],["type","text","formControlName","childCareProviderEin",1,"form-control"],["formGroupName","priorYearInfo"],["type","radio","formControlName","filedLastYear","id","filed_yes",1,"form-check-input",3,"value"],["for","filed_yes",1,"form-check-label"],["type","radio","formControlName","filedLastYear","id","filed_no",1,"form-check-input",3,"value"],["for","filed_no",1,"form-check-label"],["type","checkbox","formControlName","irsNotices","id","irsNotices",1,"form-check-input"],["for","irsNotices",1,"form-check-label"],["formControlName","otherNotes","rows","4","placeholder","Any additional information, questions, or special circumstances you'd like your accountant to know about",1,"form-control"],["type","button",1,"btn","btn-info",3,"click","disabled"],[1,"ri-send-plane-line","me-1"],["type","button",1,"btn","btn-info",3,"click"],[1,"ri-arrow-right-line","ms-1"],[1,"card-body","text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"mt-3","text-muted"]],template:function(s,n){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4",6),e.EFF(7,"\u{1f4c4} Client Tax Intake Form"),e.k0s(),e.j41(8,"div",7),e.DNE(9,Xe,2,0,"span",8),e.j41(10,"span",9),e.EFF(11),e.k0s()()(),e.j41(12,"div",10)(13,"div",11)(14,"span",12),e.EFF(15),e.k0s()()(),e.j41(16,"div",13),e.DNE(17,He,4,4,"button",14),e.k0s()()()()(),e.DNE(18,xt,22,12,"div",15)(19,Ct,9,0,"div",15),e.k0s()),2&s&&(e.R7$(9),e.Y8G("ngIf",n.isSaving),e.R7$(2),e.Lme("Step ",n.currentSection+1," of ",n.sections.length,""),e.R7$(2),e.xc7("width",n.progress,"%"),e.BMQ("aria-valuenow",n.progress),e.R7$(2),e.SpI("",n.progress,"% Complete"),e.R7$(2),e.Y8G("ngForOf",n.sections),e.R7$(),e.Y8G("ngIf",!n.isLoading),e.R7$(),e.Y8G("ngIf",n.isLoading))},dependencies:[v.Sq,v.bT,d.qT,d.xH,d.y7,d.me,d.Q0,d.Zm,d.wz,d.Fm,d.BC,d.cb,d.VZ,d.zX,d.j4,d.JD,d.$R],styles:['.progress[_ngcontent-%COMP%]{background-color:#e9ecef;border-radius:8px;height:12px!important}.progress-bar[_ngcontent-%COMP%]{background-color:#17a2b8!important;border-radius:8px;transition:width .6s ease}.progress-bar.bg-info[_ngcontent-%COMP%]{background-color:#17a2b8!important}.btn-sm[_ngcontent-%COMP%]{font-size:.875rem;padding:.375rem .75rem;border-radius:6px}.btn-sm.btn-success[_ngcontent-%COMP%]{background-color:#28a745;border-color:#28a745}.btn-sm.btn-success[_ngcontent-%COMP%]:hover{background-color:#218838;border-color:#1e7e34}.btn-sm.btn-primary[_ngcontent-%COMP%]{background-color:#405189;border-color:#405189}.btn-sm.btn-primary[_ngcontent-%COMP%]:hover{background-color:#364574;border-color:#2f3d66}.card[_ngcontent-%COMP%]{border:1px solid #e9ecef;border-radius:8px;box-shadow:0 .125rem .25rem #00000013}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #e9ecef;padding:1rem 1.25rem}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#495057;font-weight:600}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#495057;margin-bottom:.5rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:6px;padding:.5rem .75rem;font-size:.875rem}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#405189;box-shadow:0 0 0 .2rem #40518940}.form-control.is-invalid[_ngcontent-%COMP%], .form-select.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.form-control.is-invalid[_ngcontent-%COMP%]:focus, .form-select.is-invalid[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem #dc354540}.input-group[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]{border-color:#ced4da;color:#6c757d}.input-group[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;border-color:#adb5bd;color:#495057}.input-group[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #6c757d40}.form-check[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked{background-color:#405189;border-color:#405189}.form-check[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:focus{border-color:#405189;box-shadow:0 0 0 .2rem #40518940}.form-check[_ngcontent-%COMP%]   .form-check-label[_ngcontent-%COMP%]{font-weight:500;color:#495057}.text-muted[_ngcontent-%COMP%]{color:#6c757d!important}.font-size-48[_ngcontent-%COMP%]{font-size:3rem!important}.badge.bg-info[_ngcontent-%COMP%]{background-color:#17a2b8!important}.btn-outline-danger[_ngcontent-%COMP%]{color:#dc3545;border-color:#dc3545}.btn-outline-danger[_ngcontent-%COMP%]:hover{background-color:#dc3545;border-color:#dc3545;color:#fff}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}h5[_ngcontent-%COMP%]{color:#405189;font-weight:600;margin-bottom:1.5rem}h6[_ngcontent-%COMP%]{color:#495057;font-weight:600}@media (max-width: 768px){.d-flex.flex-wrap.gap-2[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-bottom:.5rem;font-size:.75rem}.d-flex.flex-wrap.gap-2[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem}.card-body[_ngcontent-%COMP%]{padding:1rem}.container-fluid[_ngcontent-%COMP%]{padding-left:.75rem;padding-right:.75rem}}.card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.form-label[_ngcontent-%COMP%]:after{content:""}.form-label[_ngcontent-%COMP%]:has( + input[required])[_ngcontent-%COMP%]:after, .form-label[_ngcontent-%COMP%]:has( + select[required])[_ngcontent-%COMP%]:after, .form-label[_ngcontent-%COMP%]:has( + textarea[required])[_ngcontent-%COMP%]:after{content:" *";color:#dc3545}.input-group[_ngcontent-%COMP%]   .form-control[placeholder*="***"][_ngcontent-%COMP%]{font-family:monospace;letter-spacing:1px}.progress[_ngcontent-%COMP%]{position:relative}.progress[_ngcontent-%COMP%]:after{content:attr(data-progress) "%";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:.75rem;font-weight:600;color:#495057}']})}}return o})();var M={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function ae(o){M=o}var S={exec:()=>null};function m(o,i=""){let t="string"==typeof o?o:o.source,s={replace:(n,r)=>{let a="string"==typeof r?r:r.source;return a=a.replace(x.caret,"$1"),t=t.replace(n,a),s},getRegex:()=>new RegExp(t,i)};return s}var x={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:o=>new RegExp(`^( {0,3}${o})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:o=>new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:o=>new RegExp(`^ {0,${Math.min(3,o-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:o=>new RegExp(`^ {0,${Math.min(3,o-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:o=>new RegExp(`^ {0,${Math.min(3,o-1)}}#`),htmlBeginRegex:o=>new RegExp(`^ {0,${Math.min(3,o-1)}}<(?:[a-z].*>|!--)`,"i")},P=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,U=/(?:[*+-]|\d{1,9}[.)])/,le=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,ce=m(le).replace(/bull/g,U).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Mt=m(le).replace(/bull/g,U).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),X=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,q=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,St=m(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",q).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Pt=m(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,U).getRegex(),A="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",H=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Et=m("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",H).replace("tag",A).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),de=m(X).replace("hr",P).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",A).getRegex(),J={blockquote:m(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",de).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:St,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:P,html:Et,lheading:ce,list:Pt,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:de,table:S,text:/^[^\n]+/},pe=m("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",P).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",A).getRegex(),$t={...J,lheading:Mt,table:pe,paragraph:m(X).replace("hr",P).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",pe).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",A).getRegex()},Dt={...J,html:m("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",H).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:S,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:m(X).replace("hr",P).replace("heading"," *#{1,6} *[^\n]").replace("lheading",ce).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},ue=/^( {2,}|\\)\n(?!\s*$)/,N=/[\p{P}\p{S}]/u,Q=/[\s\p{P}\p{S}]/u,me=/[^\s\p{P}\p{S}]/u,Gt=m(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Q).getRegex(),he=/(?!~)[\p{P}\p{S}]/u,ge=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Lt=m(ge,"u").replace(/punct/g,N).getRegex(),Vt=m(ge,"u").replace(/punct/g,he).getRegex(),fe="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Ut=m(fe,"gu").replace(/notPunctSpace/g,me).replace(/punctSpace/g,Q).replace(/punct/g,N).getRegex(),Xt=m(fe,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,he).getRegex(),qt=m("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,me).replace(/punctSpace/g,Q).replace(/punct/g,N).getRegex(),Ht=m(/\\(punct)/,"gu").replace(/punct/g,N).getRegex(),Jt=m(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Qt=m(H).replace("(?:--\x3e|$)","--\x3e").getRegex(),Zt=m("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Qt).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),G=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`[^`]*`|[^\[\]\\`])*?/,Wt=m(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",G).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),be=m(/^!?\[(label)\]\[(ref)\]/).replace("label",G).replace("ref",q).getRegex(),_e=m(/^!?\[(ref)\](?:\[\])?/).replace("ref",q).getRegex(),Z={_backpedal:S,anyPunctuation:Ht,autolink:Jt,blockSkip:/\[[^\[\]]*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,br:ue,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:S,emStrongLDelim:Lt,emStrongRDelimAst:Ut,emStrongRDelimUnd:qt,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:Wt,nolink:_e,punctuation:Gt,reflink:be,reflinkSearch:m("reflink|nolink(?!\\()","g").replace("reflink",be).replace("nolink",_e).getRegex(),tag:Zt,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:S},en={...Z,link:m(/^!?\[(label)\]\((.*?)\)/).replace("label",G).getRegex(),reflink:m(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",G).getRegex()},W={...Z,emStrongRDelimAst:Xt,emStrongLDelim:Vt,url:m(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},tn={...W,br:m(ue).replace("{2,}","*").getRegex(),text:m(W.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},B={normal:J,gfm:$t,pedantic:Dt},E={normal:Z,gfm:W,breaks:tn,pedantic:en},nn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ke=o=>nn[o];function y(o,i){if(i){if(x.escapeTest.test(o))return o.replace(x.escapeReplace,ke)}else if(x.escapeTestNoEncode.test(o))return o.replace(x.escapeReplaceNoEncode,ke);return o}function ve(o){try{o=encodeURI(o).replace(x.percentDecode,"%")}catch{return null}return o}function xe(o,i){let s=o.replace(x.findPipe,(r,a,l)=>{let c=!1,p=a;for(;--p>=0&&"\\"===l[p];)c=!c;return c?"|":" |"}).split(x.splitPipe),n=0;if(s[0].trim()||s.shift(),s.length>0&&!s.at(-1)?.trim()&&s.pop(),i)if(s.length>i)s.splice(i);else for(;s.length<i;)s.push("");for(;n<s.length;n++)s[n]=s[n].trim().replace(x.slashPipe,"|");return s}function R(o,i,t){let s=o.length;if(0===s)return"";let n=0;for(;n<s;){let r=o.charAt(s-n-1);if(r!==i||t){if(r===i||!t)break;n++}else n++}return o.slice(0,s-n)}function Ce(o,i,t,s,n){let r=i.href,a=i.title||null,l=o[1].replace(n.other.outputLinkReplace,"$1");s.state.inLink=!0;let c={type:"!"===o[0].charAt(0)?"image":"link",raw:t,href:r,title:a,text:l,tokens:s.inlineTokens(l)};return s.state.inLink=!1,c}var Y=class{options;rules;lexer;constructor(o){this.options=o||M}space(o){let i=this.rules.block.newline.exec(o);if(i&&i[0].length>0)return{type:"space",raw:i[0]}}code(o){let i=this.rules.block.code.exec(o);if(i){let t=i[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:i[0],codeBlockStyle:"indented",text:this.options.pedantic?t:R(t,"\n")}}}fences(o){let i=this.rules.block.fences.exec(o);if(i){let t=i[0],s=function on(o,i,t){let s=o.match(t.other.indentCodeCompensation);if(null===s)return i;let n=s[1];return i.split("\n").map(r=>{let a=r.match(t.other.beginningSpace);if(null===a)return r;let[l]=a;return l.length>=n.length?r.slice(n.length):r}).join("\n")}(t,i[3]||"",this.rules);return{type:"code",raw:t,lang:i[2]?i[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):i[2],text:s}}}heading(o){let i=this.rules.block.heading.exec(o);if(i){let t=i[2].trim();if(this.rules.other.endingHash.test(t)){let s=R(t,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(t=s.trim())}return{type:"heading",raw:i[0],depth:i[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(o){let i=this.rules.block.hr.exec(o);if(i)return{type:"hr",raw:R(i[0],"\n")}}blockquote(o){let i=this.rules.block.blockquote.exec(o);if(i){let t=R(i[0],"\n").split("\n"),s="",n="",r=[];for(;t.length>0;){let c,a=!1,l=[];for(c=0;c<t.length;c++)if(this.rules.other.blockquoteStart.test(t[c]))l.push(t[c]),a=!0;else{if(a)break;l.push(t[c])}t=t.slice(c);let p=l.join("\n"),u=p.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}\n${p}`:p,n=n?`${n}\n${u}`:u;let b=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,r,!0),this.lexer.state.top=b,0===t.length)break;let f=r.at(-1);if("code"===f?.type)break;if("blockquote"===f?.type){let C=f,_=C.raw+"\n"+t.join("\n"),F=this.blockquote(_);r[r.length-1]=F,s=s.substring(0,s.length-C.raw.length)+F.raw,n=n.substring(0,n.length-C.text.length)+F.text;break}if("list"!==f?.type);else{let C=f,_=C.raw+"\n"+t.join("\n"),F=this.list(_);r[r.length-1]=F,s=s.substring(0,s.length-f.raw.length)+F.raw,n=n.substring(0,n.length-C.raw.length)+F.raw,t=_.substring(r.at(-1).raw.length).split("\n")}}return{type:"blockquote",raw:s,tokens:r,text:n}}}list(o){let i=this.rules.block.list.exec(o);if(i){let t=i[1].trim(),s=t.length>1,n={type:"list",raw:"",ordered:s,start:s?+t.slice(0,-1):"",loose:!1,items:[]};t=s?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=s?t:"[*+-]");let r=this.rules.other.listItemRegex(t),a=!1;for(;o;){let c=!1,p="",u="";if(!(i=r.exec(o))||this.rules.block.hr.test(o))break;p=i[0],o=o.substring(p.length);let b=i[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,ee=>" ".repeat(3*ee.length)),f=o.split("\n",1)[0],C=!b.trim(),_=0;if(this.options.pedantic?(_=2,u=b.trimStart()):C?_=i[1].length+1:(_=i[2].search(this.rules.other.nonSpaceChar),_=_>4?1:_,u=b.slice(_),_+=i[1].length),C&&this.rules.other.blankLine.test(f)&&(p+=f+"\n",o=o.substring(f.length+1),c=!0),!c){let ee=this.rules.other.nextBulletRegex(_),Ie=this.rules.other.hrRegex(_),je=this.rules.other.fencesBeginRegex(_),we=this.rules.other.headingBeginRegex(_),cs=this.rules.other.htmlBeginRegex(_);for(;o;){let D,te=o.split("\n",1)[0];if(f=te,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),D=f):D=f.replace(this.rules.other.tabCharGlobal,"    "),je.test(f)||we.test(f)||cs.test(f)||ee.test(f)||Ie.test(f))break;if(D.search(this.rules.other.nonSpaceChar)>=_||!f.trim())u+="\n"+D.slice(_);else{if(C||b.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||je.test(b)||we.test(b)||Ie.test(b))break;u+="\n"+f}!C&&!f.trim()&&(C=!0),p+=te+"\n",o=o.substring(te.length+1),b=D.slice(_)}}n.loose||(a?n.loose=!0:this.rules.other.doubleBlankLine.test(p)&&(a=!0));let ye,F=null;this.options.gfm&&(F=this.rules.other.listIsTask.exec(u),F&&(ye="[ ] "!==F[0],u=u.replace(this.rules.other.listReplaceTask,""))),n.items.push({type:"list_item",raw:p,task:!!F,checked:ye,loose:!1,text:u,tokens:[]}),n.raw+=p}let l=n.items.at(-1);if(!l)return;l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd(),n.raw=n.raw.trimEnd();for(let c=0;c<n.items.length;c++)if(this.lexer.state.top=!1,n.items[c].tokens=this.lexer.blockTokens(n.items[c].text,[]),!n.loose){let p=n.items[c].tokens.filter(b=>"space"===b.type),u=p.length>0&&p.some(b=>this.rules.other.anyLine.test(b.raw));n.loose=u}if(n.loose)for(let c=0;c<n.items.length;c++)n.items[c].loose=!0;return n}}html(o){let i=this.rules.block.html.exec(o);if(i)return{type:"html",block:!0,raw:i[0],pre:"pre"===i[1]||"script"===i[1]||"style"===i[1],text:i[0]}}def(o){let i=this.rules.block.def.exec(o);if(i){let t=i[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=i[2]?i[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=i[3]?i[3].substring(1,i[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):i[3];return{type:"def",tag:t,raw:i[0],href:s,title:n}}}table(o){let i=this.rules.block.table.exec(o);if(!i||!this.rules.other.tableDelimiter.test(i[2]))return;let t=xe(i[1]),s=i[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=i[3]?.trim()?i[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],r={type:"table",raw:i[0],header:[],align:[],rows:[]};if(t.length===s.length){for(let a of s)this.rules.other.tableAlignRight.test(a)?r.align.push("right"):this.rules.other.tableAlignCenter.test(a)?r.align.push("center"):this.rules.other.tableAlignLeft.test(a)?r.align.push("left"):r.align.push(null);for(let a=0;a<t.length;a++)r.header.push({text:t[a],tokens:this.lexer.inline(t[a]),header:!0,align:r.align[a]});for(let a of n)r.rows.push(xe(a,r.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:r.align[c]})));return r}}lheading(o){let i=this.rules.block.lheading.exec(o);if(i)return{type:"heading",raw:i[0],depth:"="===i[2].charAt(0)?1:2,text:i[1],tokens:this.lexer.inline(i[1])}}paragraph(o){let i=this.rules.block.paragraph.exec(o);if(i){let t="\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1];return{type:"paragraph",raw:i[0],text:t,tokens:this.lexer.inline(t)}}}text(o){let i=this.rules.block.text.exec(o);if(i)return{type:"text",raw:i[0],text:i[0],tokens:this.lexer.inline(i[0])}}escape(o){let i=this.rules.inline.escape.exec(o);if(i)return{type:"escape",raw:i[0],text:i[1]}}tag(o){let i=this.rules.inline.tag.exec(o);if(i)return!this.lexer.state.inLink&&this.rules.other.startATag.test(i[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(i[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(i[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(i[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:i[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:i[0]}}link(o){let i=this.rules.inline.link.exec(o);if(i){let t=i[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let r=R(t.slice(0,-1),"\\");if((t.length-r.length)%2==0)return}else{let r=function sn(o,i){if(-1===o.indexOf(i[1]))return-1;let t=0;for(let s=0;s<o.length;s++)if("\\"===o[s])s++;else if(o[s]===i[0])t++;else if(o[s]===i[1]&&(t--,t<0))return s;return t>0?-2:-1}(i[2],"()");if(-2===r)return;if(r>-1){let a=(0===i[0].indexOf("!")?5:4)+i[1].length+r;i[2]=i[2].substring(0,r),i[0]=i[0].substring(0,a).trim(),i[3]=""}}let s=i[2],n="";if(this.options.pedantic){let r=this.rules.other.pedanticHrefTitle.exec(s);r&&(s=r[1],n=r[3])}else n=i[3]?i[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(s=this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?s.slice(1):s.slice(1,-1)),Ce(i,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},i[0],this.lexer,this.rules)}}reflink(o,i){let t;if((t=this.rules.inline.reflink.exec(o))||(t=this.rules.inline.nolink.exec(o))){let n=i[(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!n){let r=t[0].charAt(0);return{type:"text",raw:r,text:r}}return Ce(t,n,t[0],this.lexer,this.rules)}}emStrong(o,i,t=""){let s=this.rules.inline.emStrongLDelim.exec(o);if(!(!s||s[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!s[1]&&!s[2]||!t||this.rules.inline.punctuation.exec(t))){let r,a,n=[...s[0]].length-1,l=n,c=0,p="*"===s[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(p.lastIndex=0,i=i.slice(-1*o.length+n);null!=(s=p.exec(i));){if(r=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!r)continue;if(a=[...r].length,s[3]||s[4]){l+=a;continue}if((s[5]||s[6])&&n%3&&!((n+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);let u=[...s[0]][0].length,b=o.slice(0,n+s.index+u+a);if(Math.min(n,a)%2){let C=b.slice(1,-1);return{type:"em",raw:b,text:C,tokens:this.lexer.inlineTokens(C)}}let f=b.slice(2,-2);return{type:"strong",raw:b,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(o){let i=this.rules.inline.code.exec(o);if(i){let t=i[2].replace(this.rules.other.newLineCharGlobal," "),s=this.rules.other.nonSpaceChar.test(t),n=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return s&&n&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:i[0],text:t}}}br(o){let i=this.rules.inline.br.exec(o);if(i)return{type:"br",raw:i[0]}}del(o){let i=this.rules.inline.del.exec(o);if(i)return{type:"del",raw:i[0],text:i[2],tokens:this.lexer.inlineTokens(i[2])}}autolink(o){let i=this.rules.inline.autolink.exec(o);if(i){let t,s;return"@"===i[2]?(t=i[1],s="mailto:"+t):(t=i[1],s=t),{type:"link",raw:i[0],text:t,href:s,tokens:[{type:"text",raw:t,text:t}]}}}url(o){let i;if(i=this.rules.inline.url.exec(o)){let t,s;if("@"===i[2])t=i[0],s="mailto:"+t;else{let n;do{n=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])?.[0]??""}while(n!==i[0]);t=i[0],s="www."===i[1]?"http://"+i[0]:i[0]}return{type:"link",raw:i[0],text:t,href:s,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(o){let i=this.rules.inline.text.exec(o);if(i)return{type:"text",raw:i[0],text:i[0],escaped:this.lexer.state.inRawBlock}}},I=class ne{tokens;options;state;tokenizer;inlineQueue;constructor(i){this.tokens=[],this.tokens.links=Object.create(null),this.options=i||M,this.options.tokenizer=this.options.tokenizer||new Y,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:x,block:B.normal,inline:E.normal};this.options.pedantic?(t.block=B.pedantic,t.inline=E.pedantic):this.options.gfm&&(t.block=B.gfm,t.inline=this.options.breaks?E.breaks:E.gfm),this.tokenizer.rules=t}static get rules(){return{block:B,inline:E}}static lex(i,t){return new ne(t).lex(i)}static lexInline(i,t){return new ne(t).inlineTokens(i)}lex(i){i=i.replace(x.carriageReturn,"\n"),this.blockTokens(i,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let s=this.inlineQueue[t];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(i,t=[],s=!1){for(this.options.pedantic&&(i=i.replace(x.tabCharGlobal,"    ").replace(x.spaceLine,""));i;){let n;if(this.options.extensions?.block?.some(a=>!!(n=a.call({lexer:this},i,t))&&(i=i.substring(n.raw.length),t.push(n),!0)))continue;if(n=this.tokenizer.space(i)){i=i.substring(n.raw.length);let a=t.at(-1);1===n.raw.length&&void 0!==a?a.raw+="\n":t.push(n);continue}if(n=this.tokenizer.code(i)){i=i.substring(n.raw.length);let a=t.at(-1);"paragraph"===a?.type||"text"===a?.type?(a.raw+=(a.raw.endsWith("\n")?"":"\n")+n.raw,a.text+="\n"+n.text,this.inlineQueue.at(-1).src=a.text):t.push(n);continue}if(n=this.tokenizer.fences(i)){i=i.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.heading(i)){i=i.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.hr(i)){i=i.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.blockquote(i)){i=i.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.list(i)){i=i.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.html(i)){i=i.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(i)){i=i.substring(n.raw.length);let a=t.at(-1);"paragraph"===a?.type||"text"===a?.type?(a.raw+=(a.raw.endsWith("\n")?"":"\n")+n.raw,a.text+="\n"+n.raw,this.inlineQueue.at(-1).src=a.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title},t.push(n));continue}if(n=this.tokenizer.table(i)){i=i.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.lheading(i)){i=i.substring(n.raw.length),t.push(n);continue}let r=i;if(this.options.extensions?.startBlock){let c,a=1/0,l=i.slice(1);this.options.extensions.startBlock.forEach(p=>{c=p.call({lexer:this},l),"number"==typeof c&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(r=i.substring(0,a+1))}if(this.state.top&&(n=this.tokenizer.paragraph(r))){let a=t.at(-1);s&&"paragraph"===a?.type?(a.raw+=(a.raw.endsWith("\n")?"":"\n")+n.raw,a.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):t.push(n),s=r.length!==i.length,i=i.substring(n.raw.length)}else if(n=this.tokenizer.text(i)){i=i.substring(n.raw.length);let a=t.at(-1);"text"===a?.type?(a.raw+=(a.raw.endsWith("\n")?"":"\n")+n.raw,a.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):t.push(n)}else if(i){let a="Infinite loop on byte: "+i.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,t}inline(i,t=[]){return this.inlineQueue.push({src:i,tokens:t}),t}inlineTokens(i,t=[]){let s=i,n=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;null!=(n=this.tokenizer.rules.inline.reflinkSearch.exec(s));)l.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(n=this.tokenizer.rules.inline.anyPunctuation.exec(s));)s=s.slice(0,n.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(n=this.tokenizer.rules.inline.blockSkip.exec(s));)s=s.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);s=this.options.hooks?.emStrongMask?.call({lexer:this},s)??s;let r=!1,a="";for(;i;){let l;if(r||(a=""),r=!1,this.options.extensions?.inline?.some(p=>!!(l=p.call({lexer:this},i,t))&&(i=i.substring(l.raw.length),t.push(l),!0)))continue;if(l=this.tokenizer.escape(i)){i=i.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.tag(i)){i=i.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.link(i)){i=i.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.reflink(i,this.tokens.links)){i=i.substring(l.raw.length);let p=t.at(-1);"text"===l.type&&"text"===p?.type?(p.raw+=l.raw,p.text+=l.text):t.push(l);continue}if(l=this.tokenizer.emStrong(i,s,a)){i=i.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.codespan(i)){i=i.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.br(i)){i=i.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.del(i)){i=i.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.autolink(i)){i=i.substring(l.raw.length),t.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(i))){i=i.substring(l.raw.length),t.push(l);continue}let c=i;if(this.options.extensions?.startInline){let b,p=1/0,u=i.slice(1);this.options.extensions.startInline.forEach(f=>{b=f.call({lexer:this},u),"number"==typeof b&&b>=0&&(p=Math.min(p,b))}),p<1/0&&p>=0&&(c=i.substring(0,p+1))}if(l=this.tokenizer.inlineText(c)){i=i.substring(l.raw.length),"_"!==l.raw.slice(-1)&&(a=l.raw.slice(-1)),r=!0;let p=t.at(-1);"text"===p?.type?(p.raw+=l.raw,p.text+=l.text):t.push(l)}else if(i){let p="Infinite loop on byte: "+i.charCodeAt(0);if(this.options.silent){console.error(p);break}throw new Error(p)}}return t}},z=class{options;parser;constructor(o){this.options=o||M}space(o){return""}code({text:o,lang:i,escaped:t}){let s=(i||"").match(x.notSpaceStart)?.[0],n=o.replace(x.endingNewline,"")+"\n";return s?'<pre><code class="language-'+y(s)+'">'+(t?n:y(n,!0))+"</code></pre>\n":"<pre><code>"+(t?n:y(n,!0))+"</code></pre>\n"}blockquote({tokens:o}){return`<blockquote>\n${this.parser.parse(o)}</blockquote>\n`}html({text:o}){return o}def(o){return""}heading({tokens:o,depth:i}){return`<h${i}>${this.parser.parseInline(o)}</h${i}>\n`}hr(o){return"<hr>\n"}list(o){let i=o.ordered,t=o.start,s="";for(let a=0;a<o.items.length;a++)s+=this.listitem(o.items[a]);let n=i?"ol":"ul";return"<"+n+(i&&1!==t?' start="'+t+'"':"")+">\n"+s+"</"+n+">\n"}listitem(o){let i="";if(o.task){let t=this.checkbox({checked:!!o.checked});o.loose?"paragraph"===o.tokens[0]?.type?(o.tokens[0].text=t+" "+o.tokens[0].text,o.tokens[0].tokens&&o.tokens[0].tokens.length>0&&"text"===o.tokens[0].tokens[0].type&&(o.tokens[0].tokens[0].text=t+" "+y(o.tokens[0].tokens[0].text),o.tokens[0].tokens[0].escaped=!0)):o.tokens.unshift({type:"text",raw:t+" ",text:t+" ",escaped:!0}):i+=t+" "}return i+=this.parser.parse(o.tokens,!!o.loose),`<li>${i}</li>\n`}checkbox({checked:o}){return"<input "+(o?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:o}){return`<p>${this.parser.parseInline(o)}</p>\n`}table(o){let i="",t="";for(let n=0;n<o.header.length;n++)t+=this.tablecell(o.header[n]);i+=this.tablerow({text:t});let s="";for(let n=0;n<o.rows.length;n++){let r=o.rows[n];t="";for(let a=0;a<r.length;a++)t+=this.tablecell(r[a]);s+=this.tablerow({text:t})}return s&&(s=`<tbody>${s}</tbody>`),"<table>\n<thead>\n"+i+"</thead>\n"+s+"</table>\n"}tablerow({text:o}){return`<tr>\n${o}</tr>\n`}tablecell(o){let i=this.parser.parseInline(o.tokens),t=o.header?"th":"td";return(o.align?`<${t} align="${o.align}">`:`<${t}>`)+i+`</${t}>\n`}strong({tokens:o}){return`<strong>${this.parser.parseInline(o)}</strong>`}em({tokens:o}){return`<em>${this.parser.parseInline(o)}</em>`}codespan({text:o}){return`<code>${y(o,!0)}</code>`}br(o){return"<br>"}del({tokens:o}){return`<del>${this.parser.parseInline(o)}</del>`}link({href:o,title:i,tokens:t}){let s=this.parser.parseInline(t),n=ve(o);if(null===n)return s;let r='<a href="'+(o=n)+'"';return i&&(r+=' title="'+y(i)+'"'),r+=">"+s+"</a>",r}image({href:o,title:i,text:t,tokens:s}){s&&(t=this.parser.parseInline(s,this.parser.textRenderer));let n=ve(o);if(null===n)return y(t);let r=`<img src="${o=n}" alt="${t}"`;return i&&(r+=` title="${y(i)}"`),r+=">",r}text(o){return"tokens"in o&&o.tokens?this.parser.parseInline(o.tokens):"escaped"in o&&o.escaped?o.text:y(o.text)}},K=class{strong({text:o}){return o}em({text:o}){return o}codespan({text:o}){return o}del({text:o}){return o}html({text:o}){return o}text({text:o}){return o}link({text:o}){return""+o}image({text:o}){return""+o}br(){return""}},j=class se{options;renderer;textRenderer;constructor(i){this.options=i||M,this.options.renderer=this.options.renderer||new z,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new K}static parse(i,t){return new se(t).parse(i)}static parseInline(i,t){return new se(t).parseInline(i)}parse(i,t=!0){let s="";for(let n=0;n<i.length;n++){let r=i[n];if(this.options.extensions?.renderers?.[r.type]){let l=r,c=this.options.extensions.renderers[l.type].call({parser:this},l);if(!1!==c||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(l.type)){s+=c||"";continue}}let a=r;switch(a.type){case"space":s+=this.renderer.space(a);continue;case"hr":s+=this.renderer.hr(a);continue;case"heading":s+=this.renderer.heading(a);continue;case"code":s+=this.renderer.code(a);continue;case"table":s+=this.renderer.table(a);continue;case"blockquote":s+=this.renderer.blockquote(a);continue;case"list":s+=this.renderer.list(a);continue;case"html":s+=this.renderer.html(a);continue;case"def":s+=this.renderer.def(a);continue;case"paragraph":s+=this.renderer.paragraph(a);continue;case"text":{let l=a,c=this.renderer.text(l);for(;n+1<i.length&&"text"===i[n+1].type;)l=i[++n],c+="\n"+this.renderer.text(l);s+=t?this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c,escaped:!0}]}):c;continue}default:{let l='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return s}parseInline(i,t=this.renderer){let s="";for(let n=0;n<i.length;n++){let r=i[n];if(this.options.extensions?.renderers?.[r.type]){let l=this.options.extensions.renderers[r.type].call({parser:this},r);if(!1!==l||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){s+=l||"";continue}}let a=r;switch(a.type){case"escape":case"text":s+=t.text(a);break;case"html":s+=t.html(a);break;case"link":s+=t.link(a);break;case"image":s+=t.image(a);break;case"strong":s+=t.strong(a);break;case"em":s+=t.em(a);break;case"codespan":s+=t.codespan(a);break;case"br":s+=t.br(a);break;case"del":s+=t.del(a);break;default:{let l='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return s}},$=class{options;block;constructor(o){this.options=o||M}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(o){return o}postprocess(o){return o}processAllTokens(o){return o}emStrongMask(o){return o}provideLexer(){return this.block?I.lex:I.lexInline}provideParser(){return this.block?j.parse:j.parseInline}},T=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=j;Renderer=z;TextRenderer=K;Lexer=I;Tokenizer=Y;Hooks=$;constructor(...o){this.use(...o)}walkTokens(o,i){let t=[];for(let s of o)switch(t=t.concat(i.call(this,s)),s.type){case"table":{let n=s;for(let r of n.header)t=t.concat(this.walkTokens(r.tokens,i));for(let r of n.rows)for(let a of r)t=t.concat(this.walkTokens(a.tokens,i));break}case"list":t=t.concat(this.walkTokens(s.items,i));break;default:{let n=s;this.defaults.extensions?.childTokens?.[n.type]?this.defaults.extensions.childTokens[n.type].forEach(r=>{let a=n[r].flat(1/0);t=t.concat(this.walkTokens(a,i))}):n.tokens&&(t=t.concat(this.walkTokens(n.tokens,i)))}}return t}use(...o){let i=this.defaults.extensions||{renderers:{},childTokens:{}};return o.forEach(t=>{let s={...t};if(s.async=this.defaults.async||s.async||!1,t.extensions&&(t.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){let r=i.renderers[n.name];i.renderers[n.name]=r?function(...a){let l=n.renderer.apply(this,a);return!1===l&&(l=r.apply(this,a)),l}:n.renderer}if("tokenizer"in n){if(!n.level||"block"!==n.level&&"inline"!==n.level)throw new Error("extension level must be 'block' or 'inline'");let r=i[n.level];r?r.unshift(n.tokenizer):i[n.level]=[n.tokenizer],n.start&&("block"===n.level?i.startBlock?i.startBlock.push(n.start):i.startBlock=[n.start]:"inline"===n.level&&(i.startInline?i.startInline.push(n.start):i.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(i.childTokens[n.name]=n.childTokens)}),s.extensions=i),t.renderer){let n=this.defaults.renderer||new z(this.defaults);for(let r in t.renderer){if(!(r in n))throw new Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;let l=t.renderer[r],c=n[r];n[r]=(...p)=>{let u=l.apply(n,p);return!1===u&&(u=c.apply(n,p)),u||""}}s.renderer=n}if(t.tokenizer){let n=this.defaults.tokenizer||new Y(this.defaults);for(let r in t.tokenizer){if(!(r in n))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;let l=t.tokenizer[r],c=n[r];n[r]=(...p)=>{let u=l.apply(n,p);return!1===u&&(u=c.apply(n,p)),u}}s.tokenizer=n}if(t.hooks){let n=this.defaults.hooks||new $;for(let r in t.hooks){if(!(r in n))throw new Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;let l=t.hooks[r],c=n[r];n[r]=$.passThroughHooks.has(r)?p=>{if(this.defaults.async&&$.passThroughHooksRespectAsync.has(r))return Promise.resolve(l.call(n,p)).then(b=>c.call(n,b));let u=l.call(n,p);return c.call(n,u)}:(...p)=>{let u=l.apply(n,p);return!1===u&&(u=c.apply(n,p)),u}}s.hooks=n}if(t.walkTokens){let n=this.defaults.walkTokens,r=t.walkTokens;s.walkTokens=function(a){let l=[];return l.push(r.call(this,a)),n&&(l=l.concat(n.call(this,a))),l}}this.defaults={...this.defaults,...s}}),this}setOptions(o){return this.defaults={...this.defaults,...o},this}lexer(o,i){return I.lex(o,i??this.defaults)}parser(o,i){return j.parse(o,i??this.defaults)}parseMarkdown(o){return(i,t)=>{let s={...t},n={...this.defaults,...s},r=this.onError(!!n.silent,!!n.async);if(!0===this.defaults.async&&!1===s.async)return r(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof i>"u"||null===i)return r(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof i)return r(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));n.hooks&&(n.hooks.options=n,n.hooks.block=o);let a=n.hooks?n.hooks.provideLexer():o?I.lex:I.lexInline,l=n.hooks?n.hooks.provideParser():o?j.parse:j.parseInline;if(n.async)return Promise.resolve(n.hooks?n.hooks.preprocess(i):i).then(c=>a(c,n)).then(c=>n.hooks?n.hooks.processAllTokens(c):c).then(c=>n.walkTokens?Promise.all(this.walkTokens(c,n.walkTokens)).then(()=>c):c).then(c=>l(c,n)).then(c=>n.hooks?n.hooks.postprocess(c):c).catch(r);try{n.hooks&&(i=n.hooks.preprocess(i));let c=a(i,n);n.hooks&&(c=n.hooks.processAllTokens(c)),n.walkTokens&&this.walkTokens(c,n.walkTokens);let p=l(c,n);return n.hooks&&(p=n.hooks.postprocess(p)),p}catch(c){return r(c)}}}onError(o,i){return t=>{if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",o){let s="<p>An error occurred:</p><pre>"+y(t.message+"",!0)+"</pre>";return i?Promise.resolve(s):s}if(i)return Promise.reject(t);throw t}}};function g(o,i){return T.parse(o,i)}g.options=g.setOptions=function(o){return T.setOptions(o),ae(g.defaults=T.defaults),g},g.getDefaults=function V(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},g.defaults=M,g.use=function(...o){return T.use(...o),ae(g.defaults=T.defaults),g},g.walkTokens=function(o,i){return T.walkTokens(o,i)},g.parseInline=T.parseInline,g.Parser=j,g.parser=j.parse,g.Renderer=z,g.TextRenderer=K,g.Lexer=I,g.lexer=I.lex,g.Tokenizer=Y,g.Hooks=$,g.parse=g;var an=h(5538),Fe=h(1626),ln=h(5312);let cn=(()=>{class o{constructor(t){this.http=t,this.baseUrl=ln.c.apiUrl||"http://localhost:9000"}getHeaders(){const t=localStorage.getItem("authToken");return new Fe.Lr({"Content-Type":"application/json",Authorization:`Bearer ${t}`})}createConversation(t={}){if(!this.validateTokenAndRedirect())throw new Error("Authentication required");return this.http.post(`${this.baseUrl}/api/ai/conversations`,t,{headers:this.getHeaders()})}getConversations(){if(!this.validateTokenAndRedirect())throw new Error("Authentication required");return this.http.get(`${this.baseUrl}/api/ai/conversations`,{headers:this.getHeaders()})}getConversation(t){if(!this.validateTokenAndRedirect())throw new Error("Authentication required");if(!t||"undefined"===t)throw new Error("Invalid conversation ID");return this.http.get(`${this.baseUrl}/api/ai/conversations/${t}`,{headers:this.getHeaders()})}sendMessage(t,s){if(!this.validateTokenAndRedirect())throw new Error("Authentication required");if(!t||"undefined"===t)throw new Error("Invalid conversation ID");return this.http.post(`${this.baseUrl}/api/ai/conversations/${t}/messages`,s,{headers:this.getHeaders()})}getCurrentUser(){const t=localStorage.getItem("currentUser");return t?JSON.parse(t):null}validateTokenAndRedirect(){const t=localStorage.getItem("authToken");if(!t)return this.redirectToLogin(),!1;try{const s=JSON.parse(atob(t.split(".")[1])),n=Math.floor(Date.now()/1e3);return!(s.exp&&s.exp<n&&(console.log("Token expired, redirecting to login"),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser"),this.redirectToLogin(),1))}catch(s){return console.error("Error validating token:",s),this.redirectToLogin(),!1}}redirectToLogin(){window.location.href="/account/login"}static{this.\u0275fac=function(s){return new(s||o)(e.KVO(Fe.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var dn=h(8010);const pn=["messagesContainer"];function un(o,i){1&o&&e.nrm(0,"i",50)}function mn(o,i){1&o&&e.nrm(0,"i",51)}function hn(o,i){1&o&&(e.j41(0,"span"),e.EFF(1,"Sarah Johnson, CPA"),e.k0s())}function gn(o,i){1&o&&(e.j41(0,"span"),e.EFF(1,"AI Tax Assistant"),e.k0s())}function fn(o,i){1&o&&(e.j41(0,"span"),e.EFF(1,"Active now"),e.k0s())}function bn(o,i){1&o&&(e.j41(0,"span"),e.EFF(1,"Always available"),e.k0s())}function _n(o,i){if(1&o){const t=e.RV6();e.j41(0,"div",52)(1,"button",53),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.showConversations())}),e.nrm(2,"i",54),e.k0s(),e.j41(3,"button",53),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.startNewConversation())}),e.nrm(4,"i",55),e.k0s(),e.j41(5,"button",56),e.nrm(6,"i",57),e.k0s()()}}function kn(o,i){1&o&&(e.j41(0,"div",52)(1,"button",58),e.nrm(2,"i",59),e.k0s(),e.j41(3,"button",58),e.nrm(4,"i",60),e.k0s(),e.j41(5,"button",56),e.nrm(6,"i",57),e.k0s()())}function vn(o,i){1&o&&(e.j41(0,"div",61)(1,"div",62)(2,"span",63),e.EFF(3,"Initializing..."),e.k0s()(),e.j41(4,"small",64),e.EFF(5,"Loading chat..."),e.k0s()())}function xn(o,i){if(1&o&&(e.j41(0,"div",65)(1,"span",66),e.EFF(2),e.k0s()()),2&o){const t=e.XpG(2).$implicit,s=e.XpG(2);e.R7$(2),e.JRh(null!=t&&t.timestamp?s.formatDate(t.timestamp):"Today")}}function Cn(o,i){1&o&&e.nrm(0,"i",79)}function Fn(o,i){1&o&&e.nrm(0,"i",51)}function yn(o,i){if(1&o&&(e.j41(0,"div",77)(1,"div",10),e.DNE(2,Cn,1,0,"i",78)(3,Fn,1,0,"i",12),e.k0s()()),2&o){const t=e.XpG(2).$implicit,s=e.XpG(2);e.R7$(),e.AVh("bg-primary","accountant"===s.chatMode&&"ACCOUNTANT"===t.senderType)("bg-gradient-ai","ai"===s.chatMode||s.isAIMessage(t)),e.R7$(),e.Y8G("ngIf","accountant"===s.chatMode&&"ACCOUNTANT"===t.senderType),e.R7$(),e.Y8G("ngIf","ai"===s.chatMode||s.isAIMessage(t))}}function In(o,i){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&o){const t=e.XpG(3).$implicit;e.R7$(),e.JRh(t.senderName)}}function jn(o,i){1&o&&(e.j41(0,"span"),e.EFF(1,"AI Tax Assistant"),e.k0s())}function wn(o,i){if(1&o&&(e.j41(0,"div",80),e.DNE(1,In,2,1,"span",15)(2,jn,2,0,"span",15),e.k0s()),2&o){const t=e.XpG(2).$implicit,s=e.XpG(2);e.R7$(),e.Y8G("ngIf","accountant"===s.chatMode),e.R7$(),e.Y8G("ngIf","ai"===s.chatMode||s.isAIMessage(t))}}function Mn(o,i){1&o&&(e.j41(0,"div",81)(1,"button",82),e.nrm(2,"i",83),e.k0s()())}function Tn(o,i){1&o&&(e.j41(0,"div",77)(1,"div",84),e.nrm(2,"i",50),e.k0s()())}function Sn(o,i){if(1&o&&(e.j41(0,"div"),e.DNE(1,xn,3,1,"div",69),e.j41(2,"div",70),e.DNE(3,yn,4,6,"div",71),e.j41(4,"div",72),e.DNE(5,wn,3,2,"div",73),e.nrm(6,"div",74),e.j41(7,"div",75),e.EFF(8),e.k0s()(),e.DNE(9,Mn,3,0,"div",76)(10,Tn,3,0,"div",71),e.k0s()()),2&o){const t=e.XpG(),s=t.$implicit,n=t.index,r=e.XpG(2);e.R7$(),e.Y8G("ngIf",s&&r.shouldShowDateSeparator(n)),e.R7$(),e.AVh("message-sent",r.isUserMessage(s))("message-received",!r.isUserMessage(s)),e.R7$(),e.Y8G("ngIf",!r.isUserMessage(s)),e.R7$(),e.AVh("bubble-sent",r.isUserMessage(s))("bubble-received","accountant"===r.chatMode&&"ACCOUNTANT"===s.senderType)("bubble-ai","ai"===r.chatMode||r.isAIMessage(s)),e.R7$(),e.Y8G("ngIf",!r.isUserMessage(s)),e.R7$(),e.Y8G("innerHTML",r.formatMessageContent(s),e.npT),e.R7$(2),e.JRh(null!=s&&s.timestamp?r.formatTime(s.timestamp):"Now"),e.R7$(),e.Y8G("ngIf",!r.isUserMessage(s)),e.R7$(),e.Y8G("ngIf",r.isUserMessage(s))}}function Pn(o,i){if(1&o&&(e.j41(0,"div",68),e.DNE(1,Sn,11,17,"div",15),e.k0s()),2&o){const t=i.$implicit;e.R7$(),e.Y8G("ngIf",t&&t.content)}}function En(o,i){1&o&&(e.j41(0,"div",61)(1,"div",62)(2,"span",63),e.EFF(3,"Loading..."),e.k0s()(),e.j41(4,"small",64),e.EFF(5,"Loading messages..."),e.k0s()())}function Rn(o,i){if(1&o&&(e.j41(0,"div")(1,"div",65)(2,"span",66),e.EFF(3,"Today"),e.k0s()(),e.DNE(4,Pn,2,1,"div",67)(5,En,6,0,"div",19),e.k0s()),2&o){const t=e.XpG();e.R7$(4),e.Y8G("ngForOf",t.getMessagesForCurrentMode())("ngForTrackBy",t.trackByMessage),e.R7$(),e.Y8G("ngIf",t.isLoading)}}function $n(o,i){1&o&&(e.j41(0,"span",85),e.EFF(1,"Send"),e.k0s())}function Dn(o,i){1&o&&e.nrm(0,"span",86)}function On(o,i){if(1&o){const t=e.RV6();e.j41(0,"div",87),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.selectAIConversation(n))}),e.j41(1,"div",88),e.EFF(2),e.k0s(),e.j41(3,"div",89)(4,"small",16),e.EFF(5),e.k0s()()()}if(2&o){const t=i.$implicit,s=e.XpG();e.AVh("active",(null==s.currentAIConversation?null:s.currentAIConversation.id)===t.id),e.R7$(2),e.JRh(t.title),e.R7$(3),e.Lme("",s.formatDate(t.updatedAt)," \u2022 ",t.messageCount," messages")}}function An(o,i){1&o&&(e.j41(0,"div",90),e.nrm(1,"i",91),e.j41(2,"p",92),e.EFF(3,"No conversations yet"),e.k0s()())}function Nn(o,i){1&o&&(e.j41(0,"span"),e.EFF(1,"Chat Guidelines"),e.k0s())}function Gn(o,i){1&o&&(e.j41(0,"span"),e.EFF(1,"AI Assistant Guidelines"),e.k0s())}function Bn(o,i){1&o&&(e.j41(0,"ul",93)(1,"li",94),e.nrm(2,"i",95),e.EFF(3,"Response time: Usually within 2-4 hours during business hours"),e.k0s(),e.j41(4,"li",94),e.nrm(5,"i",96),e.EFF(6,"Business hours: Monday-Friday, 9 AM - 6 PM EST"),e.k0s(),e.j41(7,"li",94),e.nrm(8,"i",97),e.EFF(9,"For document sharing, please use the Documents section"),e.k0s(),e.j41(10,"li"),e.nrm(11,"i",98),e.EFF(12,"For urgent matters, please call: (555) 123-4567"),e.k0s()())}function Yn(o,i){1&o&&(e.j41(0,"ul",93)(1,"li",94),e.nrm(2,"i",99),e.EFF(3,"Ask questions about tax regulations, deductions, and filing requirements"),e.k0s(),e.j41(4,"li",94),e.nrm(5,"i",100),e.EFF(6,"Get instant responses 24/7"),e.k0s(),e.j41(7,"li",94),e.nrm(8,"i",101),e.EFF(9,"All conversations are private and secure"),e.k0s(),e.j41(10,"li"),e.nrm(11,"i",102),e.EFF(12,"For personalized advice, consult with your accountant"),e.k0s()())}let zn=(()=>{class o{constructor(t,s,n){this.chatService=t,this.aiChatService=s,this.authService=n,this.chatMode="accountant",this.messages=[],this.currentThread=null,this.aiConversations=[],this.currentAIConversation=null,this.aiMessages=[],this.showConversationsList=!1,this.newMessage="",this.isLoading=!1,this.isInitialized=!1,this.subscriptions=[],this.destroy$=new L.B,this.currentUser=this.authService.currentUser(),this.messages=[],this.aiMessages=[],this.aiConversations=[],g.setOptions({breaks:!0,gfm:!0})}ngOnInit(){this.messages=this.messages||[],this.aiMessages=this.aiMessages||[],this.aiConversations=this.aiConversations||[],this.isInitialized=!1,Promise.all([this.loadMessagesPromise(),this.loadAIConversationsPromise()]).then(()=>{this.isInitialized=!0}).catch(t=>{console.error("Error during initialization:",t),this.isInitialized=!0})}loadMessagesPromise(){return new Promise(t=>{if("ai"===this.chatMode&&this.currentAIConversation)this.aiChatService.getConversation(this.currentAIConversation.id).pipe((0,w.Q)(this.destroy$)).subscribe({next:s=>{this.aiMessages=s.messages.map(n=>({...n,timestamp:n.timestamp?new Date(n.timestamp):new Date})),t()},error:s=>{console.error("Error loading AI messages:",s),this.aiMessages=[],t()}});else try{this.loadMessages(),t()}catch(s){console.error("Error loading messages:",s),t()}})}loadAIConversationsPromise(){return new Promise(t=>{this.isLoading=!0;const s=this.aiChatService.getConversations().pipe((0,w.Q)(this.destroy$)).subscribe({next:n=>{const r=Array.isArray(n)?n:n?.conversations||[];this.aiConversations=r,this.isLoading=!1,r&&r.length>0&&!this.currentAIConversation&&this.selectAIConversation(r[0]),t()},error:n=>{console.error("Error loading AI conversations:",n),this.aiConversations=[],this.isLoading=!1,t()}});this.subscriptions.push(s)})}ngAfterViewChecked(){this.scrollToBottom()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.subscriptions.forEach(t=>t.unsubscribe())}loadMessages(){this.isLoading=!0;const t=this.currentUser?.id||1,s=this.loadMessagesFromStorage(t);if(s.length>0)return this.messages=s,void(this.isLoading=!1);const n=this.chatService.getThread(t).subscribe({next:r=>{this.currentThread=r.thread,this.messages=r.messages,this.saveMessagesToStorage(t,this.messages),this.isLoading=!1},error:r=>{console.error("Error loading messages:",r),this.isLoading=!1,this.loadMockMessages(),this.saveMessagesToStorage(t,this.messages)}});this.subscriptions.push(n)}loadMockMessages(){this.messages=[{content:"Hello! Welcome to our chat system. How can I help you today?",senderId:1,senderName:"Sarah Johnson, CPA",senderType:"ACCOUNTANT",timestamp:new Date("2024-02-10T09:00:00"),threadId:1},{content:"Hi Sarah! I have a question about my quarterly tax payments.",senderId:this.currentUser?.id||2,senderName:"You",senderType:"CLIENT",timestamp:new Date("2024-02-10T09:15:00"),threadId:1},{content:"Of course! I'd be happy to help with your quarterly payments. What specific question do you have?",senderId:1,senderName:"Sarah Johnson, CPA",senderType:"ACCOUNTANT",timestamp:new Date("2024-02-10T09:16:00"),threadId:1}]}loadMessagesFromStorage(t){try{const s=`chat_messages_client_${t}`,n=localStorage.getItem(s);if(n)return JSON.parse(n).map(a=>({...a,timestamp:a.timestamp?new Date(a.timestamp):new Date}))}catch(s){console.error("Error loading messages from storage:",s)}return[]}saveMessagesToStorage(t,s){try{const n=`chat_messages_client_${t}`;localStorage.setItem(n,JSON.stringify(s))}catch(n){console.error("Error saving messages to storage:",n)}}sendMessage(){this.newMessage.trim()&&("accountant"===this.chatMode?this.sendAccountantMessage():this.sendAIMessage())}addLocalMessage(){const t={content:this.newMessage.trim(),senderId:this.currentUser?.id||2,senderName:"You",senderType:"CLIENT",timestamp:new Date,threadId:this.currentThread?.id||1};this.messages.push(t),this.newMessage="",setTimeout(()=>{this.simulateAccountantResponse()},2e3)}simulateAccountantResponse(){const t=["Thank you for your message. I'll review this and get back to you shortly.","I understand your concern. Let me look into this for you.","That's a great question. I'll need to check a few things and respond within the hour.","I've received your message and will provide a detailed response soon."],n={content:t[Math.floor(Math.random()*t.length)],senderId:1,senderName:"Sarah Johnson, CPA",senderType:"ACCOUNTANT",timestamp:new Date,threadId:this.currentThread?.id||1};this.messages.push(n),this.saveMessagesToStorage(this.currentUser?.id||1,this.messages)}handleAIResponse(t){setTimeout(()=>{const s=["I understand you're asking about tax matters. Based on current tax regulations, here's what I can tell you: For quarterly payments, you should calculate 25% of your expected annual tax liability and submit by the quarterly deadlines.","That's a great tax question! Here's some guidance: Business expenses must be ordinary and necessary for your trade or business. Keep detailed records and receipts for all deductions.","I can help with that tax inquiry. Here's what you should know: The standard deduction for 2024 is $14,600 for single filers and $29,200 for married filing jointly.","Thank you for your tax question. Here's some helpful information: Self-employment tax is 15.3% of your net self-employment earnings, covering Social Security and Medicare taxes."],r={content:s[Math.floor(Math.random()*s.length)],senderId:0,senderName:"Tax AI Agent",senderType:"AI_AGENT",timestamp:new Date,threadId:this.currentThread?.id||1};this.messages.push(r),this.saveMessagesToStorage(this.currentUser?.id||1,this.messages),this.scrollToBottom()},1500)}triggerAIResponse(t){const s=this.chatService.getAIResponse(t).subscribe({next:n=>{this.messages.push({content:n.message,senderId:0,senderName:"Tax AI Agent",senderType:"AI_AGENT",timestamp:new Date,threadId:this.currentThread?.id||1}),this.saveMessagesToStorage(this.currentUser?.id||1,this.messages),this.scrollToBottom()},error:n=>{console.error("Error getting AI response:",n),this.handleAIResponse(t)}});this.subscriptions.push(s)}onKeyPress(t){"Enter"===t.key&&!t.shiftKey&&(t.preventDefault(),this.sendMessage())}scrollToBottom(){try{this.messagesContainer&&(this.messagesContainer.nativeElement.scrollTop=this.messagesContainer.nativeElement.scrollHeight)}catch(t){console.error("Error scrolling to bottom:",t)}}formatTime(t){if(!t)return(new Date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});try{const s=t instanceof Date?t:new Date(t);return isNaN(s.getTime())?(new Date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).format(s)}catch(s){return console.error("Error formatting time:",s,t),(new Date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}}formatDate(t){if(!t)return"Today";try{const s=new Date,n=t instanceof Date?t:new Date(t);if(isNaN(n.getTime())||n.toDateString()===s.toDateString())return"Today";const r=new Date(s);return r.setDate(r.getDate()-1),n.toDateString()===r.toDateString()?"Yesterday":n.toLocaleDateString()}catch(s){return console.error("Error formatting date:",s,t),"Today"}}shouldShowDateSeparator(t){if(0===t)return!0;const s="ai"===this.chatMode?this.aiMessages:this.messages;if(!s||0===s.length||t>=s.length||t<0)return!1;const n=s[t],r=s[t-1];if(!(n&&r&&n.timestamp&&r.timestamp))return!1;try{const a=n.timestamp instanceof Date?n.timestamp:new Date(n.timestamp),l=r.timestamp instanceof Date?r.timestamp:new Date(r.timestamp);return!isNaN(a.getTime())&&!isNaN(l.getTime())&&a.toDateString()!==l.toDateString()}catch(a){return console.error("Error in shouldShowDateSeparator:",a),!1}}switchChatMode(t){this.chatMode=t,this.showConversationsList=!1,"ai"===t&&(0===this.aiConversations.length&&this.loadAIConversations(),!this.currentAIConversation&&this.aiConversations.length>0&&this.selectAIConversation(this.aiConversations[0]))}loadAIConversations(){const t=this.aiChatService.getConversations().subscribe({next:s=>{this.aiConversations=s.conversations.map(n=>({...n,createdAt:new Date(n.createdAt),updatedAt:new Date(n.updatedAt)})),this.aiConversations.length>0&&!this.currentAIConversation&&this.selectAIConversation(this.aiConversations[0])},error:s=>{console.error("Error loading AI conversations:",s)}});this.subscriptions.push(t)}startNewConversation(){const t=this.aiChatService.createConversation({title:"New Tax Question"}).subscribe({next:s=>{const n={id:s.id,title:s.title,createdAt:new Date(s.createdAt),updatedAt:new Date(s.createdAt),messageCount:0};this.aiConversations.unshift(n),this.selectAIConversation(n),k().fire({icon:"success",title:"New Conversation Started",text:"You can now ask your tax questions to the AI assistant.",timer:2e3,showConfirmButton:!1})},error:s=>{console.error("Error creating conversation:",s),k().fire({icon:"error",title:"Error",text:"Failed to create new conversation. Please try again."})}});this.subscriptions.push(t)}selectAIConversation(t){this.currentAIConversation=t,this.loadAIMessages(t.id),this.showConversationsList=!1}loadAIMessages(t){this.isLoading=!0;const s=this.aiChatService.getConversation(t).subscribe({next:n=>{this.aiMessages=n.messages.map(r=>({...r,timestamp:r.timestamp?new Date(r.timestamp):new Date})),this.isLoading=!1},error:n=>{console.error("Error loading AI messages:",n),this.aiMessages=[],this.isLoading=!1}});this.subscriptions.push(s)}sendAIMessage(){if(!this.currentAIConversation)return void this.createConversationAndSendMessage();const t=this.newMessage.trim();this.isLoading=!0;const s=this.aiChatService.sendMessage(this.currentAIConversation.id,{content:t}).subscribe({next:n=>{this.aiMessages.push({...n.userMessage,timestamp:n.userMessage.timestamp?new Date(n.userMessage.timestamp):new Date}),this.aiMessages.push({...n.assistantMessage,timestamp:n.assistantMessage.timestamp?new Date(n.assistantMessage.timestamp):new Date}),this.currentAIConversation&&(this.currentAIConversation.messageCount+=2,this.currentAIConversation.updatedAt=new Date),this.newMessage="",this.isLoading=!1,this.scrollToBottom()},error:n=>{console.error("Error sending AI message:",n),this.isLoading=!1,k().fire({icon:"error",title:"Message Failed",text:"Failed to send message to AI assistant. Please try again."})}});this.subscriptions.push(s)}createConversationAndSendMessage(){const t=this.newMessage.trim();this.isLoading=!0;const s=this.aiChatService.createConversation({title:`Tax Question: ${t.substring(0,30)}...`}).subscribe({next:n=>{const r={id:n.id,title:n.title,createdAt:new Date(n.createdAt),updatedAt:new Date(n.createdAt),messageCount:0};this.aiConversations.unshift(r),this.currentAIConversation=r,this.aiMessages=[],this.sendAIMessageToConversation(t)},error:n=>{console.error("Error creating conversation:",n),this.isLoading=!1,k().fire({icon:"error",title:"Error",text:"Failed to create new conversation. Please try again."})}});this.subscriptions.push(s)}sendAIMessageToConversation(t){if(!this.currentAIConversation)return void(this.isLoading=!1);const s=this.aiChatService.sendMessage(this.currentAIConversation.id,{content:t}).subscribe({next:n=>{this.aiMessages.push({...n.userMessage,timestamp:n.userMessage.timestamp?new Date(n.userMessage.timestamp):new Date}),this.aiMessages.push({...n.assistantMessage,timestamp:n.assistantMessage.timestamp?new Date(n.assistantMessage.timestamp):new Date}),this.currentAIConversation&&(this.currentAIConversation.messageCount+=2,this.currentAIConversation.updatedAt=new Date),this.newMessage="",this.isLoading=!1,this.scrollToBottom()},error:n=>{console.error("Error sending AI message:",n),this.isLoading=!1,k().fire({icon:"error",title:"Message Failed",text:"Failed to send message to AI assistant. Please try again."})}});this.subscriptions.push(s)}sendAccountantMessage(){if(!this.currentThread)return void this.addLocalMessage();const t={content:this.newMessage.trim(),senderType:"CLIENT"},s=this.currentUser?.id||1,n=this.chatService.sendMessage(s,t).subscribe({next:r=>{this.messages.push({content:this.newMessage,senderId:this.currentUser?.id||2,senderName:"You",senderType:"CLIENT",timestamp:new Date,threadId:this.currentThread?.id||1}),this.saveMessagesToStorage(s,this.messages),this.newMessage=""},error:r=>{console.error("Error sending message:",r),this.messages.push({content:this.newMessage,senderId:this.currentUser?.id||2,senderName:"You",senderType:"CLIENT",timestamp:new Date,threadId:this.currentThread?.id||1}),this.saveMessagesToStorage(s,this.messages),this.newMessage=""}});this.subscriptions.push(n)}showConversations(){this.showConversationsList=!0}hideConversations(){this.showConversationsList=!1}getCurrentMessages(){return"ai"===this.chatMode?this.aiMessages:this.messages}isMyAIMessage(t){return"user"===t.role}formatAIMessage(t){return{content:t.content,senderId:"user"===t.role?this.currentUser?.id||2:0,senderName:"user"===t.role?"You":"AI Tax Assistant",senderType:"user"===t.role?"CLIENT":"AI_AGENT",timestamp:t.timestamp?new Date(t.timestamp):new Date,threadId:1}}formatMessageContent(t){return"ai"===this.chatMode&&"assistant"===t.role||"accountant"===this.chatMode&&this.isAIMessage(t)?this.formatAIResponse(t.content):this.formatPlainText(t.content)}formatAIResponse(t){if(!t)return"";let s=t.trim();return s=s.replace(/\s+/g," "),s=s.replace(/\.\s+([A-Z])/g,".</p><p>$1"),s=s.replace(/:\s+([A-Z])/g,":</p><p>$1"),s=s.replace(/\?\s+([A-Z])/g,"?</p><p>$1"),s=s.replace(/!\s+([A-Z])/g,"!</p><p>$1"),s=s.replace(/(\d+\.)\s+/g,"</p><p><strong>$1</strong> "),s=s.replace(/[-\u2022]\s+/g,"</p><p>\u2022 "),s=s.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),s=s.replace(/\*(.*?)\*/g,"<em>$1</em>"),s=s.replace(/`(.*?)`/g,"<code>$1</code>"),s=s.replace(/([A-Z][a-z\s]+):\s*([A-Z])/g,"<strong>$1:</strong></p><p>$2"),s="<p>"+s+"</p>",s=s.replace(/<p><\/p>/g,""),s=s.replace(/<\/p><p>/g,"</p><p>"),s=s.replace(/<p>\s*<p>/g,"<p>"),s=s.replace(/<\/p>\s*<\/p>/g,"</p>"),s}formatPlainText(t){if(!t)return"";let s=t.replace(/\n/g,"<br>");return s=s.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),s=s.replace(/\*(.*?)\*/g,"<em>$1</em>"),s=s.replace(/`(.*?)`/g,"<code>$1</code>"),s=s.replace(/^(\d+\.\s)/gm,"<br><strong>$1</strong>"),s=s.replace(/^[-\u2022]\s/gm,"<br>\u2022 "),s}isMyMessage(t){return t.senderId===this.currentUser?.id}isUserMessage(t){return"ai"===this.chatMode?"user"===t.role:t.senderId===this.currentUser?.id}isAIMessage(t){return"AI_AGENT"===t.senderType||"assistant"===t.role}trackByMessage(t,s){return s&&(s.id||s.timestamp)||t}getMessagesForCurrentMode(){return"ai"===this.chatMode?this.aiMessages||[]:this.messages||[]}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(an.m),e.rXU(cn),e.rXU(dn.k))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-chat"]],viewQuery:function(s,n){if(1&s&&e.GBs(pn,5),2&s){let r;e.mGM(r=e.lsd())&&(n.messagesContainer=r.first)}},standalone:!0,features:[e.aNF],decls:66,vars:37,consts:[["messagesContainer",""],[1,"chat-container"],[1,"chat-mode-toggle","mb-3"],["role","group",1,"btn-group","w-100"],["type","button",1,"btn",3,"click"],[1,"ri-user-3-line","me-2"],[1,"ri-robot-2-line","me-2"],[1,"chat-header"],[1,"d-flex","align-items-center"],[1,"avatar-container","me-3"],[1,"avatar-circle"],["class","ri-user-line text-white",4,"ngIf"],["class","ri-robot-2-line text-white",4,"ngIf"],[1,"status-indicator"],[1,"mb-0","chat-title"],[4,"ngIf"],[1,"text-muted"],["class","chat-actions",4,"ngIf"],[1,"chat-messages"],["class","loading-container",4,"ngIf"],[1,"p-3","chat-input-section"],[1,"row"],[1,"col"],[1,"position-relative"],["type","text","placeholder","Enter Message...","name","message",1,"form-control","chat-input",3,"ngModelChange","keypress","ngModel","disabled"],[1,"chat-input-links"],[1,"list-inline","mb-0"],[1,"list-inline-item"],["href","javascript: void(0);",1,"emoji-btn"],[1,"mdi","mdi-emoticon-happy-outline"],["href","javascript: void(0);"],[1,"mdi","mdi-file-image-outline"],[1,"mdi","mdi-file-document-outline"],[1,"col-auto"],["type","button",1,"btn","btn-primary","btn-rounded","chat-send","w-md",3,"click","disabled"],["class","d-none d-sm-inline-block me-2",4,"ngIf"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"mdi","mdi-send"],[1,"ai-conversations-sidebar"],[1,"conversations-header"],[1,"mb-0"],[1,"btn","btn-sm","btn-light",3,"click"],[1,"ri-close-line"],[1,"conversations-list"],["class","conversation-item",3,"active","click",4,"ngFor","ngForOf"],["class","no-conversations",4,"ngIf"],[1,"card","mt-3"],[1,"card-body"],[1,"card-title"],["class","list-unstyled mb-0",4,"ngIf"],[1,"ri-user-line","text-white"],[1,"ri-robot-2-line","text-white"],[1,"chat-actions"],[1,"btn","btn-light","btn-sm","me-2",3,"click"],[1,"ri-chat-history-line"],[1,"ri-add-line"],[1,"btn","btn-light","btn-sm"],[1,"ri-more-2-line"],[1,"btn","btn-light","btn-sm","me-2"],[1,"ri-search-line"],[1,"ri-settings-3-line"],[1,"loading-container"],["role","status",1,"spinner-border","spinner-border-sm","text-primary"],[1,"visually-hidden"],[1,"text-muted","ms-2"],[1,"date-separator"],[1,"date-label"],["class","message-container",4,"ngFor","ngForOf","ngForTrackBy"],[1,"message-container"],["class","date-separator",4,"ngIf"],[1,"message-row"],["class","message-avatar",4,"ngIf"],[1,"message-bubble"],["class","message-sender",4,"ngIf"],[1,"message-text",3,"innerHTML"],[1,"message-time"],["class","message-options",4,"ngIf"],[1,"message-avatar"],["class","ri-user-3-line text-white",4,"ngIf"],[1,"ri-user-3-line","text-white"],[1,"message-sender"],[1,"message-options"],[1,"btn","btn-sm","btn-light"],[1,"ri-more-2-fill"],[1,"avatar-circle","bg-secondary"],[1,"d-none","d-sm-inline-block","me-2"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"conversation-item",3,"click"],[1,"conversation-title"],[1,"conversation-meta"],[1,"no-conversations"],[1,"ri-chat-3-line","text-muted"],[1,"text-muted","mb-0"],[1,"list-unstyled","mb-0"],[1,"mb-2"],[1,"ri-time-line","text-primary","me-2"],[1,"ri-calendar-line","text-primary","me-2"],[1,"ri-file-line","text-primary","me-2"],[1,"ri-phone-line","text-primary","me-2"],[1,"ri-lightbulb-line","text-success","me-2"],[1,"ri-time-line","text-success","me-2"],[1,"ri-shield-check-line","text-success","me-2"],[1,"ri-user-3-line","text-success","me-2"]],template:function(s,n){if(1&s){const r=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4),e.bIt("click",function(){return e.eBV(r),e.Njj(n.switchChatMode("accountant"))}),e.nrm(4,"i",5),e.EFF(5,"Chat with Accountant "),e.k0s(),e.j41(6,"button",4),e.bIt("click",function(){return e.eBV(r),e.Njj(n.switchChatMode("ai"))}),e.nrm(7,"i",6),e.EFF(8,"AI Tax Assistant "),e.k0s()()(),e.j41(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10),e.DNE(13,un,1,0,"i",11)(14,mn,1,0,"i",12),e.k0s(),e.nrm(15,"div",13),e.k0s(),e.j41(16,"div")(17,"h5",14),e.DNE(18,hn,2,0,"span",15)(19,gn,2,0,"span",15),e.k0s(),e.j41(20,"small",16),e.DNE(21,fn,2,0,"span",15)(22,bn,2,0,"span",15),e.k0s()()(),e.DNE(23,_n,7,0,"div",17)(24,kn,7,0,"div",17),e.k0s(),e.j41(25,"div",18,0),e.DNE(27,vn,6,0,"div",19)(28,Rn,6,3,"div",15),e.j41(29,"div",20)(30,"div",21)(31,"div",22)(32,"div",23)(33,"input",24),e.mxI("ngModelChange",function(l){return e.eBV(r),e.DH7(n.newMessage,l)||(n.newMessage=l),e.Njj(l)}),e.bIt("keypress",function(l){return e.eBV(r),e.Njj(n.onKeyPress(l))}),e.k0s(),e.j41(34,"div",25)(35,"ul",26)(36,"li",27)(37,"a",28),e.nrm(38,"i",29),e.k0s()(),e.j41(39,"li",27)(40,"a",30),e.nrm(41,"i",31),e.k0s()(),e.j41(42,"li",27)(43,"a",30),e.nrm(44,"i",32),e.k0s()()()()()(),e.j41(45,"div",33)(46,"button",34),e.bIt("click",function(){return e.eBV(r),e.Njj(n.sendMessage())}),e.DNE(47,$n,2,0,"span",35)(48,Dn,1,0,"span",36),e.nrm(49,"i",37),e.k0s()()()()(),e.j41(50,"div",38)(51,"div",39)(52,"h6",40),e.EFF(53,"AI Conversations"),e.k0s(),e.j41(54,"button",41),e.bIt("click",function(){return e.eBV(r),e.Njj(n.hideConversations())}),e.nrm(55,"i",42),e.k0s()(),e.j41(56,"div",43),e.DNE(57,On,6,5,"div",44)(58,An,4,0,"div",45),e.k0s()(),e.j41(59,"div",46)(60,"div",47)(61,"h6",48),e.DNE(62,Nn,2,0,"span",15)(63,Gn,2,0,"span",15),e.k0s(),e.DNE(64,Bn,13,0,"ul",49)(65,Yn,13,0,"ul",49),e.k0s()()()}2&s&&(e.R7$(3),e.AVh("btn-primary","accountant"===n.chatMode)("btn-outline-primary","accountant"!==n.chatMode),e.R7$(3),e.AVh("btn-success","ai"===n.chatMode)("btn-outline-success","ai"!==n.chatMode),e.R7$(6),e.AVh("bg-primary","accountant"===n.chatMode)("bg-gradient-ai","ai"===n.chatMode),e.R7$(),e.Y8G("ngIf","accountant"===n.chatMode),e.R7$(),e.Y8G("ngIf","ai"===n.chatMode),e.R7$(),e.AVh("active","accountant"===n.chatMode),e.R7$(3),e.Y8G("ngIf","accountant"===n.chatMode),e.R7$(),e.Y8G("ngIf","ai"===n.chatMode),e.R7$(2),e.Y8G("ngIf","accountant"===n.chatMode),e.R7$(),e.Y8G("ngIf","ai"===n.chatMode),e.R7$(),e.Y8G("ngIf","ai"===n.chatMode),e.R7$(),e.Y8G("ngIf","accountant"===n.chatMode),e.R7$(3),e.Y8G("ngIf",!n.isInitialized),e.R7$(),e.Y8G("ngIf",n.isInitialized),e.R7$(5),e.R50("ngModel",n.newMessage),e.Y8G("disabled",n.isLoading),e.R7$(13),e.Y8G("disabled",!n.newMessage.trim()||n.isLoading),e.R7$(),e.Y8G("ngIf",!n.isLoading),e.R7$(),e.Y8G("ngIf",n.isLoading),e.R7$(2),e.AVh("show",n.showConversationsList&&"ai"===n.chatMode),e.R7$(7),e.Y8G("ngForOf",n.aiConversations),e.R7$(),e.Y8G("ngIf",0===n.aiConversations.length),e.R7$(4),e.Y8G("ngIf","accountant"===n.chatMode),e.R7$(),e.Y8G("ngIf","ai"===n.chatMode),e.R7$(),e.Y8G("ngIf","accountant"===n.chatMode),e.R7$(),e.Y8G("ngIf","ai"===n.chatMode))},dependencies:[v.MD,v.Sq,v.bT,d.YN,d.me,d.BC,d.vS],styles:['.chat-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;max-height:800px;background:#fff;border-radius:12px;box-shadow:0 4px 20px #0000001a;overflow:hidden}.chat-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:#fff;border-bottom:1px solid #f0f0f0;position:sticky;top:0;z-index:10}.avatar-container[_ngcontent-%COMP%]{position:relative}.avatar-circle[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:16px}.bg-gradient-ai[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997)}.chat-mode-toggle[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a;border-radius:8px;overflow:hidden}.chat-mode-toggle[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border:none;padding:12px 20px;font-weight:500;transition:all .3s ease}.chat-mode-toggle[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{box-shadow:none}.chat-mode-toggle[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.ai-conversations-sidebar[_ngcontent-%COMP%]{position:fixed;top:0;right:-350px;width:350px;height:100vh;background:#fff;border-left:1px solid #e9ecef;z-index:1050;transition:right .3s ease;overflow-y:auto}.ai-conversations-sidebar.show[_ngcontent-%COMP%]{right:0}.ai-conversations-sidebar[_ngcontent-%COMP%]   .conversations-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;align-items:center;background:#f8f9fa}.ai-conversations-sidebar[_ngcontent-%COMP%]   .conversations-header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0;font-weight:600;color:#495057}.ai-conversations-sidebar[_ngcontent-%COMP%]   .conversations-list[_ngcontent-%COMP%]{padding:10px}.ai-conversations-sidebar[_ngcontent-%COMP%]   .conversations-list[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]{padding:15px;border-radius:8px;margin-bottom:8px;cursor:pointer;transition:all .2s ease;border:1px solid transparent}.ai-conversations-sidebar[_ngcontent-%COMP%]   .conversations-list[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]:hover{background:#f8f9fa;border-color:#e9ecef}.ai-conversations-sidebar[_ngcontent-%COMP%]   .conversations-list[_ngcontent-%COMP%]   .conversation-item.active[_ngcontent-%COMP%]{background:#e3f2fd;border-color:#2196f3}.ai-conversations-sidebar[_ngcontent-%COMP%]   .conversations-list[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]   .conversation-title[_ngcontent-%COMP%]{font-weight:500;color:#495057;margin-bottom:5px;font-size:14px}.ai-conversations-sidebar[_ngcontent-%COMP%]   .conversations-list[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]   .conversation-meta[_ngcontent-%COMP%]{font-size:12px;color:#6c757d}.ai-conversations-sidebar[_ngcontent-%COMP%]   .conversations-list[_ngcontent-%COMP%]   .no-conversations[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#6c757d}.ai-conversations-sidebar[_ngcontent-%COMP%]   .conversations-list[_ngcontent-%COMP%]   .no-conversations[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:15px;display:block}.status-indicator[_ngcontent-%COMP%]{position:absolute;bottom:2px;right:2px;width:12px;height:12px;background:#10b981;border:2px solid #ffffff;border-radius:50%}.chat-title[_ngcontent-%COMP%]{font-weight:600;color:#1f2937;font-size:16px}.chat-actions[_ngcontent-%COMP%]{display:flex;gap:4px}.chat-messages[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px;background:#f9fafb;scroll-behavior:smooth}.date-separator[_ngcontent-%COMP%]{text-align:center;margin:20px 0;position:relative}.date-separator[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e5e7eb;z-index:1}.date-label[_ngcontent-%COMP%]{background:#f9fafb;color:#6b7280;padding:4px 12px;font-size:12px;font-weight:500;position:relative;z-index:2}.message-text[_ngcontent-%COMP%]{margin-bottom:5px;word-wrap:break-word;white-space:normal;line-height:1.6}.message-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:12px 0}.message-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{margin-top:0}.message-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.message-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .message-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .message-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .message-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .message-text[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .message-text[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:15px 0 8px;font-weight:600}.message-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2em}.message-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1em}.message-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.05em}.message-text[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .message-text[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:8px 0;padding-left:20px}.message-text[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:3px 0}.message-text[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#0000001a;padding:2px 4px;border-radius:3px;font-family:Courier New,monospace;font-size:.9em}.message-text[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background-color:#0000000d;padding:10px;border-radius:5px;overflow-x:auto;margin:8px 0}.message-text[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:none;padding:0}.message-text[_ngcontent-%COMP%]   blockquote[_ngcontent-%COMP%]{border-left:3px solid #ddd;margin:8px 0;padding-left:10px;font-style:italic}.message-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.message-text[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-style:italic}.message-text[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%;margin:8px 0}.message-text[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .message-text[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:6px 8px;text-align:left}.message-text[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#0000000d;font-weight:600}.message-row[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:8px;margin-bottom:12px}.message-sent[_ngcontent-%COMP%]{justify-content:flex-end}.message-received[_ngcontent-%COMP%]{justify-content:flex-start}.message-avatar[_ngcontent-%COMP%]{width:32px;height:32px;flex-shrink:0}.message-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]{width:32px;height:32px;font-size:14px;box-shadow:0 2px 8px #00000026}.message-avatar[_ngcontent-%COMP%]   .bg-primary[_ngcontent-%COMP%]{background:#6366f1!important}.message-avatar[_ngcontent-%COMP%]   .bg-gradient-ai[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)!important}.message-bubble[_ngcontent-%COMP%]{max-width:320px;padding:12px 16px;border-radius:18px;position:relative;word-wrap:break-word}.bubble-sent[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6366f1,#8b5cf6);color:#fff;border-bottom-right-radius:6px;border-bottom-left-radius:18px;box-shadow:0 2px 8px #6366f14d;margin-left:auto}.bubble-received[_ngcontent-%COMP%]{background:#fff;color:#1f2937;border:1px solid #e5e7eb;border-bottom-left-radius:6px}.bubble-ai[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-bottom-left-radius:6px;border-bottom-right-radius:18px;box-shadow:0 2px 12px #667eea4d}.message-sender[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#6366f1;margin-bottom:4px}.bubble-sent[_ngcontent-%COMP%]   .message-sender[_ngcontent-%COMP%]{color:#fffc}.bubble-ai[_ngcontent-%COMP%]   .message-sender[_ngcontent-%COMP%]{color:#ffffffe6}.message-text[_ngcontent-%COMP%]{line-height:1.4;font-size:14px}.message-time[_ngcontent-%COMP%]{font-size:11px;opacity:.7;margin-top:4px;text-align:right}.bubble-received[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{color:#6b7280}.message-options[_ngcontent-%COMP%]{opacity:0;transition:opacity .2s}.message-row[_ngcontent-%COMP%]:hover   .message-options[_ngcontent-%COMP%]{opacity:1}.loading-container[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#6b7280}.chat-input-section[_ngcontent-%COMP%]{border-top:1px solid #dee2e6;background:#fff;position:sticky;bottom:0;z-index:2}.chat-input[_ngcontent-%COMP%]{border-radius:30px;background-color:#f8f9fa!important;border-color:#f8f9fa!important;padding:12px 120px 12px 20px;font-size:14px}.chat-input[_ngcontent-%COMP%]:focus{background-color:#f8f9fa!important;border-color:#6366f1!important;box-shadow:0 0 0 .2rem #6366f140}.chat-input[_ngcontent-%COMP%]::placeholder{color:#6c757d}.chat-input-links[_ngcontent-%COMP%]{position:absolute;right:16px;top:50%;transform:translateY(-50%)}.chat-input-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px;line-height:36px;padding:0 4px;display:inline-block;color:#6c757d;text-decoration:none}.chat-input-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#495057}.chat-send[_ngcontent-%COMP%]{border-radius:30px;padding:12px 20px;font-weight:500}@media (max-width: 575.98px){.chat-send[_ngcontent-%COMP%]{min-width:auto}}.chat-messages[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.chat-messages[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.chat-messages[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}.chat-messages[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}@media (max-width: 768px){.chat-container[_ngcontent-%COMP%]{height:100vh;border-radius:0}.message-bubble[_ngcontent-%COMP%]{max-width:280px}.chat-header[_ngcontent-%COMP%]{padding:12px 16px}.chat-messages[_ngcontent-%COMP%]{padding:16px}.chat-input[_ngcontent-%COMP%]{padding:12px 16px}}']})}}return o})();function Ln(o,i){1&o&&(e.j41(0,"div",1)(1,"div",2)(2,"div",6)(3,"div",7)(4,"div",8)(5,"span",9),e.EFF(6,"Loading..."),e.k0s()(),e.j41(7,"p",10),e.EFF(8,"Loading your projects..."),e.k0s()()()()())}function Vn(o,i){if(1&o&&(e.j41(0,"div",1)(1,"div",11)(2,"div",6)(3,"div",12)(4,"div",13)(5,"div",14)(6,"div")(7,"h5",15),e.EFF(8,"Active Projects"),e.k0s(),e.j41(9,"p",16),e.EFF(10),e.k0s()()(),e.j41(11,"div",17)(12,"div",18)(13,"span",19),e.nrm(14,"i",20),e.k0s()()()()()()(),e.j41(15,"div",11)(16,"div",6)(17,"div",12)(18,"div",13)(19,"div",14)(20,"div")(21,"h5",15),e.EFF(22,"Completed"),e.k0s(),e.j41(23,"p",16),e.EFF(24),e.k0s()()(),e.j41(25,"div",17)(26,"div",21)(27,"span",22),e.nrm(28,"i",23),e.k0s()()()()()()(),e.j41(29,"div",11)(30,"div",6)(31,"div",12)(32,"div",13)(33,"div",14)(34,"div")(35,"h5",15),e.EFF(36,"Total Projects"),e.k0s(),e.j41(37,"p",16),e.EFF(38),e.k0s()()(),e.j41(39,"div",17)(40,"div",24)(41,"span",25),e.nrm(42,"i",26),e.k0s()()()()()()()()),2&o){const t=e.XpG();e.R7$(10),e.SpI("",t.getActiveProjects().length," projects in progress"),e.R7$(14),e.SpI("",t.getCompletedProjects().length," projects finished"),e.R7$(14),e.SpI("",t.projects.length," projects overall")}}function Un(o,i){if(1&o&&(e.j41(0,"p",45),e.EFF(1),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.description)}}function Xn(o,i){if(1&o&&(e.j41(0,"div",38),e.nrm(1,"i",46),e.j41(2,"span",39),e.EFF(3),e.k0s()()),2&o){const t=e.XpG().$implicit;e.R7$(3),e.SpI("Tax Year: ",t.taxYear,"")}}function qn(o,i){1&o&&(e.j41(0,"span",49),e.EFF(1,"(Overdue)"),e.k0s())}function Hn(o,i){1&o&&(e.j41(0,"span",49),e.EFF(1,"(Due Soon)"),e.k0s())}function Jn(o,i){if(1&o&&(e.j41(0,"div",38),e.nrm(1,"i",47),e.j41(2,"span"),e.EFF(3),e.DNE(4,qn,2,0,"span",48)(5,Hn,2,0,"span",48),e.k0s()()),2&o){const t=e.XpG().$implicit,s=e.XpG(3);e.R7$(2),e.HbH(s.isOverdue(t.dueDate)?"text-danger":s.isDueSoon(t.dueDate)?"text-warning":"text-muted"),e.R7$(),e.SpI(" Due: ",s.formatDate(t.dueDate)," "),e.R7$(),e.Y8G("ngIf",s.isOverdue(t.dueDate)),e.R7$(),e.Y8G("ngIf",s.isDueSoon(t.dueDate)&&!s.isOverdue(t.dueDate))}}function Qn(o,i){if(1&o&&(e.j41(0,"div",50)(1,"div",51)(2,"span",52),e.EFF(3,"Progress"),e.k0s(),e.j41(4,"span",52),e.EFF(5),e.k0s()(),e.j41(6,"div",53),e.nrm(7,"div",54),e.k0s()()),2&o){const t=e.XpG().$implicit,s=e.XpG(3);e.R7$(5),e.SpI("",s.getProjectProgress(t),"%"),e.R7$(2),e.HbH("completed"===t.status?"bg-success":"bg-primary"),e.xc7("width",s.getProjectProgress(t),"%")}}function Zn(o,i){if(1&o){const t=e.RV6();e.j41(0,"div",31)(1,"div",32)(2,"div",12)(3,"div",33)(4,"div",34)(5,"h5",35),e.EFF(6),e.k0s(),e.DNE(7,Un,2,1,"p",36),e.k0s(),e.j41(8,"span"),e.EFF(9),e.k0s()(),e.j41(10,"div",37)(11,"div",38),e.nrm(12,"i"),e.j41(13,"span",39),e.EFF(14),e.k0s()(),e.DNE(15,Xn,4,1,"div",40)(16,Jn,6,5,"div",40),e.k0s(),e.DNE(17,Qn,8,5,"div",41),e.j41(18,"div",42)(19,"small",39),e.EFF(20),e.k0s(),e.j41(21,"button",43),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG(3);return e.Njj(r.viewProjectDetails(n))}),e.nrm(22,"i",44),e.EFF(23," View Details "),e.k0s()()()()()}if(2&o){const t=i.$implicit,s=e.XpG(3);e.R7$(6),e.JRh(t.name),e.R7$(),e.Y8G("ngIf",t.description),e.R7$(),e.HbH(s.getStatusClass(t.status)),e.R7$(),e.SpI(" ",s.getStatusLabel(t.status)," "),e.R7$(3),e.ZvI("",s.getTypeInfo(t.projectType).icon," me-2 text-muted"),e.R7$(2),e.JRh(s.getTypeInfo(t.projectType).label),e.R7$(),e.Y8G("ngIf",t.taxYear),e.R7$(),e.Y8G("ngIf",t.dueDate),e.R7$(),e.Y8G("ngIf","cancelled"!==t.status),e.R7$(3),e.SpI(" Created: ",s.formatDate(t.createdAt)," ")}}function Wn(o,i){if(1&o&&(e.j41(0,"div")(1,"div",1),e.DNE(2,Zn,24,14,"div",30),e.k0s()()),2&o){const t=e.XpG(2);e.R7$(2),e.Y8G("ngForOf",t.projects)}}function Kn(o,i){1&o&&(e.j41(0,"div",55)(1,"div",56),e.nrm(2,"i",57),e.k0s(),e.j41(3,"h5"),e.EFF(4,"No Projects Found"),e.k0s(),e.j41(5,"p",39),e.EFF(6,"You don't have any projects yet. Your accountant will create projects for you as needed."),e.k0s()())}function es(o,i){if(1&o&&(e.j41(0,"div",1)(1,"div",2)(2,"div",6)(3,"div",12)(4,"h4",27),e.EFF(5,"All Projects"),e.k0s(),e.DNE(6,Wn,3,1,"div",28)(7,Kn,7,0,"div",29),e.k0s()()()()),2&o){const t=e.XpG();e.R7$(6),e.Y8G("ngIf",t.projects.length>0),e.R7$(),e.Y8G("ngIf",0===t.projects.length)}}const ts=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",loadComponent:()=>h.e(796).then(h.bind(h,8796)).then(o=>o.ClientDashboardComponent)},{path:"documents",component:Oe},{path:"projects",component:(()=>{class o{constructor(t,s){this.router=t,this.apiService=s,this.destroy$=new L.B,this.projects=[],this.isLoading=!1,this.projectTypes=[{value:"tax_return",label:"Tax Return",icon:"bx-receipt"},{value:"quarterly_filing",label:"Quarterly Filing",icon:"bx-calendar"},{value:"business_setup",label:"Business Setup",icon:"bx-buildings"},{value:"audit",label:"Audit",icon:"bx-search-alt"},{value:"consultation",label:"Consultation",icon:"bx-chat"},{value:"other",label:"Other",icon:"bx-folder"}],this.projectStatuses=[{value:"active",label:"Active",class:"badge bg-success"},{value:"in_progress",label:"In Progress",class:"badge bg-primary"},{value:"completed",label:"Completed",class:"badge bg-info"},{value:"on_hold",label:"On Hold",class:"badge bg-warning"},{value:"cancelled",label:"Cancelled",class:"badge bg-danger"}]}ngOnInit(){this.loadMyProjects()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadMyProjects(){this.isLoading=!0,this.apiService.getMyProjects().pipe((0,w.Q)(this.destroy$)).subscribe({next:t=>{t.success&&t.projects&&(this.projects=t.projects),this.isLoading=!1},error:t=>{console.error("Error loading projects:",t),this.isLoading=!1,k().fire({title:"Error",text:"Failed to load your projects.",icon:"error"})}})}getStatusClass(t){const s=this.projectStatuses.find(n=>n.value===t);return s?s.class:"badge bg-secondary"}getStatusLabel(t){const s=this.projectStatuses.find(n=>n.value===t);return s?s.label:t}getTypeInfo(t){const s=this.projectTypes.find(n=>n.value===t);return s?{label:s.label,icon:s.icon}:{label:t,icon:"bx-folder"}}viewProject(t){this.router.navigate(["/client-portal/project-detail",t.id])}formatDate(t){return t?new Date(t).toLocaleDateString():"Not set"}getDaysUntilDue(t){if(!t)return 0;const s=new Date(t),n=new Date,r=s.getTime()-n.getTime();return Math.ceil(r/864e5)}isDueSoon(t){const s=this.getDaysUntilDue(t);return s>0&&s<=7}isOverdue(t){return this.getDaysUntilDue(t)<0}getActiveProjects(){return this.projects.filter(t=>"active"===t.status||"in_progress"===t.status)}getCompletedProjects(){return this.projects.filter(t=>"completed"===t.status)}getProjectProgress(t){switch(t.status){case"active":return 25;case"in_progress":return 60;case"completed":return 100;case"on_hold":return 40;default:return 0}}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(O.Ix),e.rXU(re.G))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-client-projects"]],decls:9,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box","d-sm-flex","align-items-center","justify-content-between"],[1,"mb-sm-0","font-size-18"],["class","row",4,"ngIf"],[1,"card"],[1,"card-body","text-center"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],[1,"mt-2"],[1,"col-xl-4"],[1,"card-body"],[1,"d-flex"],[1,"flex-1","ms-3"],[1,"font-size-16","mb-1"],[1,"text-muted","mb-2"],[1,"flex-shrink-0","align-self-center"],[1,"avatar-sm","rounded-circle","bg-primary-subtle"],[1,"avatar-title","rounded-circle","bg-primary-subtle","text-primary"],[1,"bx","bx-briefcase","font-size-24"],[1,"avatar-sm","rounded-circle","bg-success-subtle"],[1,"avatar-title","rounded-circle","bg-success-subtle","text-success"],[1,"bx","bx-check-circle","font-size-24"],[1,"avatar-sm","rounded-circle","bg-info-subtle"],[1,"avatar-title","rounded-circle","bg-info-subtle","text-info"],[1,"bx","bx-folder","font-size-24"],[1,"card-title","mb-4"],[4,"ngIf"],["class","text-center py-5",4,"ngIf"],["class","col-lg-6 col-xl-4 mb-4",4,"ngFor","ngForOf"],[1,"col-lg-6","col-xl-4","mb-4"],[1,"card","project-card","h-100"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"flex-1"],[1,"font-size-15","mb-1"],["class","text-muted mb-0",4,"ngIf"],[1,"project-details","mb-3"],[1,"d-flex","align-items-center","mb-2"],[1,"text-muted"],["class","d-flex align-items-center mb-2",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"bx","bx-show","me-1"],[1,"text-muted","mb-0"],[1,"bx","bx-calendar","me-2","text-muted"],[1,"bx","bx-time","me-2","text-muted"],["class","ms-1",4,"ngIf"],[1,"ms-1"],[1,"mb-3"],[1,"d-flex","justify-content-between","mb-1"],[1,"text-muted","small"],[1,"progress",2,"height","6px"],[1,"progress-bar"],[1,"text-center","py-5"],[1,"mb-4"],[1,"bx","bx-folder-open","display-4","text-muted"]],template:function(s,n){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),e.EFF(5,"My Projects"),e.k0s()()()(),e.DNE(6,Ln,9,0,"div",5)(7,Vn,43,3,"div",5)(8,es,8,2,"div",5),e.k0s()),2&s&&(e.R7$(6),e.Y8G("ngIf",n.isLoading),e.R7$(),e.Y8G("ngIf",!n.isLoading&&n.projects.length>0),e.R7$(),e.Y8G("ngIf",!n.isLoading))},dependencies:[v.Sq,v.bT],styles:[".project-card[_ngcontent-%COMP%]{transition:transform .2s ease-in-out,box-shadow .2s ease-in-out;border:1px solid #e9ecef}.project-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.avatar-sm[_ngcontent-%COMP%]{height:2rem;width:2rem}.avatar-title[_ngcontent-%COMP%]{align-items:center;background-color:#556ee6;color:#fff;display:flex;font-weight:500;height:100%;justify-content:center;width:100%}.bg-primary-subtle[_ngcontent-%COMP%]{background-color:#556ee61a!important}.bg-success-subtle[_ngcontent-%COMP%]{background-color:#34c38f1a!important}.bg-info-subtle[_ngcontent-%COMP%]{background-color:#50a5f11a!important}.badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.25rem .5rem}.progress[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%]{border-radius:.25rem}.project-details[_ngcontent-%COMP%]{font-size:.875rem}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important}.text-warning[_ngcontent-%COMP%]{color:#ffc107!important}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}.display-4[_ngcontent-%COMP%]{font-size:3.5rem}.card-title[_ngcontent-%COMP%]{color:#495057;font-weight:600}.btn-sm[_ngcontent-%COMP%]{padding:.25rem .75rem;font-size:.875rem}"]})}}return o})()},{path:"project-detail/:projectId",loadComponent:()=>h.e(548).then(h.bind(h,6548)).then(o=>o.ProjectDetailComponent)},{path:"intake",component:Le},{path:"tax-intake",component:Ft},{path:"chat",component:zn}];let ns=(()=>{class o{static{this.\u0275fac=function(s){return new(s||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[O.iI.forChild(ts),O.iI]})}}return o})();var ss=h(6551),os=h(1745),is=h(8580),rs=h(779),as=h(3816);let ls=(()=>{class o{static{this.\u0275fac=function(s){return new(s||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[v.MD,d.YN,d.X1,ns,ss.T,os.V,is.zE,rs.Q_,as.jr,ie._L]})}}return o})()}}]);
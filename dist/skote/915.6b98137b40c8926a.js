"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[915],{8915:(ye,h,p)=>{p.r(h),p.d(h,{TaxConsultantModule:()=>ke});var d=p(177),l=p(9417),u=p(803),F=p(8032),c=p.n(F),e=p(4438);function v(i,r){if(1&i&&(e.j41(0,"div")(1,"h6",49),e.EFF(2),e.k0s(),e.j41(3,"span",59),e.EFF(4),e.k0s()()),2&i){const t=e.XpG().$implicit;e.R7$(2),e.JRh(t.projectName),e.R7$(2),e.SpI("ID: ",t.projectId,"")}}function C(i,r){1&i&&(e.j41(0,"span",65),e.EFF(1,"No Project"),e.k0s())}function k(i,r){if(1&i){const t=e.RV6();e.j41(0,"button",66),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,s=e.XpG();return e.Njj(s.updateStatus(n,"reviewed"))}),e.nrm(1,"i",67),e.k0s()}}function y(i,r){if(1&i){const t=e.RV6();e.j41(0,"button",68),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,s=e.XpG();return e.Njj(s.updateStatus(n,"needs-revision"))}),e.nrm(1,"i",69),e.k0s()}}function x(i,r){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"div")(3,"h6",49),e.EFF(4),e.k0s(),e.j41(5,"p",50),e.EFF(6),e.k0s()()(),e.j41(7,"td"),e.DNE(8,v,5,2,"div",48)(9,C,2,0,"span",51),e.k0s(),e.j41(10,"td")(11,"span",52),e.EFF(12),e.k0s()(),e.j41(13,"td"),e.EFF(14),e.nI1(15,"date"),e.k0s(),e.j41(16,"td")(17,"div",53)(18,"span",54),e.EFF(19),e.nI1(20,"titlecase"),e.k0s(),e.j41(21,"ul",55)(22,"li")(23,"a",56),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.updateStatus(n,"pending"))}),e.EFF(24,"Pending"),e.k0s()(),e.j41(25,"li")(26,"a",56),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.updateStatus(n,"reviewed"))}),e.EFF(27,"Reviewed"),e.k0s()(),e.j41(28,"li")(29,"a",56),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.updateStatus(n,"approved"))}),e.EFF(30,"Approved"),e.k0s()(),e.j41(31,"li")(32,"a",56),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.updateStatus(n,"needs-revision"))}),e.EFF(33,"Needs Revision"),e.k0s()()()()(),e.j41(34,"td")(35,"div",11)(36,"div",57),e.nrm(37,"div",58),e.k0s(),e.j41(38,"span",59),e.EFF(39),e.k0s()()(),e.j41(40,"td"),e.EFF(41),e.nI1(42,"date"),e.k0s(),e.j41(43,"td")(44,"div",60)(45,"button",61),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.viewForm(n))}),e.nrm(46,"i",62),e.k0s(),e.DNE(47,k,2,0,"button",63)(48,y,2,0,"button",64),e.k0s()()()}if(2&i){const t=r.$implicit,o=e.XpG();e.R7$(4),e.JRh(t.clientName),e.R7$(2),e.JRh(t.clientEmail),e.R7$(2),e.Y8G("ngIf",t.projectName),e.R7$(),e.Y8G("ngIf",!t.projectName),e.R7$(3),e.SpI(" ",o.getFormTypeDisplay(t.formType)," "),e.R7$(2),e.JRh(e.i5U(15,17,t.submissionDate,"short")),e.R7$(4),e.HbH(o.getStatusClass(t.status)),e.R7$(),e.SpI(" ",e.bMT(20,20,t.status)," "),e.R7$(18),e.HbH(100===t.completionPercentage?"bg-success":"bg-warning"),e.xc7("width",t.completionPercentage,"%"),e.R7$(2),e.SpI("",t.completionPercentage,"%"),e.R7$(2),e.JRh(e.i5U(42,22,t.lastModified,"short")),e.R7$(6),e.Y8G("ngIf","pending"===t.status),e.R7$(),e.Y8G("ngIf","reviewed"===t.status)}}function P(i,r){1&i&&(e.j41(0,"tr")(1,"td",70),e.EFF(2," No intake forms found matching your criteria. "),e.k0s()())}let w=(()=>{class i{constructor(){this.intakeForms=[],this.filteredForms=[],this.selectedStatus="all",this.selectedFormType="all",this.searchTerm="",this.stats={total:0,pending:0,reviewed:0,approved:0,needsRevision:0}}ngOnInit(){this.loadIntakeForms(),this.calculateStats()}loadIntakeForms(){this.intakeForms=[{id:1,clientId:101,clientName:"John Smith",clientEmail:"john.smith@email.com",projectId:1,projectName:"2024 Tax Return",submissionDate:"2024-02-15T10:30:00Z",status:"pending",formType:"tax-intake",completionPercentage:100,lastModified:"2024-02-15T10:30:00Z"},{id:2,clientId:102,clientName:"Sarah Johnson",clientEmail:"sarah.johnson@email.com",projectId:2,projectName:"2024 Business Tax",submissionDate:"2024-02-14T14:20:00Z",status:"reviewed",formType:"tax-intake",completionPercentage:100,lastModified:"2024-02-16T09:15:00Z"},{id:3,clientId:103,clientName:"Michael Brown",clientEmail:"michael.brown@email.com",projectId:3,projectName:"2024 Individual Return",submissionDate:"2024-02-13T16:45:00Z",status:"approved",formType:"tax-intake",completionPercentage:100,lastModified:"2024-02-17T11:30:00Z"},{id:4,clientId:104,clientName:"Emily Davis",clientEmail:"emily.davis@email.com",projectId:4,projectName:"2024 Amended Return",submissionDate:"2024-02-12T09:10:00Z",status:"needs-revision",formType:"tax-intake",completionPercentage:85,lastModified:"2024-02-16T15:20:00Z"},{id:5,clientId:105,clientName:"Robert Wilson",clientEmail:"robert.wilson@email.com",projectId:5,projectName:"2024 LLC Tax Filing",submissionDate:"2024-02-11T13:25:00Z",status:"pending",formType:"business-intake",completionPercentage:92,lastModified:"2024-02-11T13:25:00Z"}],this.filteredForms=[...this.intakeForms]}calculateStats(){this.stats.total=this.intakeForms.length,this.stats.pending=this.intakeForms.filter(t=>"pending"===t.status).length,this.stats.reviewed=this.intakeForms.filter(t=>"reviewed"===t.status).length,this.stats.approved=this.intakeForms.filter(t=>"approved"===t.status).length,this.stats.needsRevision=this.intakeForms.filter(t=>"needs-revision"===t.status).length}filterForms(){this.filteredForms=this.intakeForms.filter(t=>{const o="all"===this.selectedStatus||t.status===this.selectedStatus,n="all"===this.selectedFormType||t.formType===this.selectedFormType,s=t.clientName.toLowerCase().includes(this.searchTerm.toLowerCase())||t.clientEmail.toLowerCase().includes(this.searchTerm.toLowerCase());return o&&n&&s})}onStatusChange(){this.filterForms()}onFormTypeChange(){this.filterForms()}onSearchChange(){this.filterForms()}getStatusClass(t){switch(t){case"approved":return"badge bg-success";case"reviewed":return"badge bg-info";case"pending":return"badge bg-warning";case"needs-revision":return"badge bg-danger";default:return"badge bg-secondary"}}getFormTypeDisplay(t){switch(t){case"tax-intake":return"Tax Intake";case"business-intake":return"Business Intake";default:return t}}viewForm(t){c().fire({title:"View Intake Form",text:`Opening ${t.formType} form for ${t.clientName}`,icon:"info",timer:2e3,showConfirmButton:!1})}updateStatus(t,o){const n=t.status;t.status=o,t.lastModified=(new Date).toISOString(),this.calculateStats(),this.filterForms(),c().fire({title:"Status Updated",text:`Form status changed from ${n} to ${o}`,icon:"success",timer:2e3,showConfirmButton:!1})}exportForms(){c().fire({title:"Export Started",text:"Preparing intake forms export...",icon:"info",timer:2e3,showConfirmButton:!1})}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-intake-forms"]],decls:118,vars:9,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box","d-sm-flex","align-items-center","justify-content-between"],[1,"mb-sm-0","font-size-18"],[1,"page-title-right"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"ri-download-line","me-1"],[1,"col-xl-3","col-md-6"],[1,"card","card-h-100"],[1,"card-body"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"],[1,"text-muted","mb-3","lh-1","d-block","text-truncate"],[1,"mb-3"],[1,"flex-shrink-0"],["id","mini-chart1","data-colors",'["#5156be"]'],[1,"counter-value"],[1,"avatar-sm","rounded-circle","bg-warning-subtle"],[1,"avatar-title","rounded-circle","bg-warning-subtle","text-warning"],[1,"ri-time-line","font-size-24"],[1,"avatar-sm","rounded-circle","bg-success-subtle"],[1,"avatar-title","rounded-circle","bg-success-subtle","text-success"],[1,"ri-check-line","font-size-24"],[1,"avatar-sm","rounded-circle","bg-danger-subtle"],[1,"avatar-title","rounded-circle","bg-danger-subtle","text-danger"],[1,"ri-error-warning-line","font-size-24"],[1,"card"],[1,"row","mb-4"],[1,"col-md-3"],["for","statusFilter",1,"form-label"],["id","statusFilter",1,"form-select",3,"ngModelChange","change","ngModel"],["value","all"],["value","pending"],["value","reviewed"],["value","approved"],["value","needs-revision"],["for","formTypeFilter",1,"form-label"],["id","formTypeFilter",1,"form-select",3,"ngModelChange","change","ngModel"],["value","tax-intake"],["value","business-intake"],[1,"col-md-6"],["for","searchInput",1,"form-label"],["type","text","id","searchInput","placeholder","Search by client name or email...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"table-responsive"],[1,"table","table-nowrap","table-hover"],[1,"table-light"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"mb-1"],[1,"text-muted","mb-0","font-size-12"],["class","text-muted",4,"ngIf"],[1,"badge","bg-primary-subtle","text-primary"],[1,"dropdown"],["data-bs-toggle","dropdown",1,"dropdown-toggle",2,"cursor","pointer"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"progress","flex-grow-1","me-2",2,"height","6px"],[1,"progress-bar"],[1,"text-muted","font-size-12"],[1,"d-flex","gap-2"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"ri-eye-line"],["type","button","class","btn btn-sm btn-outline-success",3,"click",4,"ngIf"],["type","button","class","btn btn-sm btn-outline-warning",3,"click",4,"ngIf"],[1,"text-muted"],["type","button",1,"btn","btn-sm","btn-outline-success",3,"click"],[1,"ri-check-line"],["type","button",1,"btn","btn-sm","btn-outline-warning",3,"click"],[1,"ri-edit-line"],["colspan","8",1,"text-center","text-muted","py-4"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),e.EFF(5,"Client Intake Forms"),e.k0s(),e.j41(6,"div",5)(7,"button",6),e.bIt("click",function(){return n.exportForms()}),e.nrm(8,"i",7),e.EFF(9,"Export Forms "),e.k0s()()()()(),e.j41(10,"div",1)(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12)(16,"span",13),e.EFF(17,"Total Forms"),e.k0s(),e.j41(18,"h4",14),e.EFF(19),e.k0s()(),e.j41(20,"div",15),e.nrm(21,"div",16),e.k0s()()()()(),e.j41(22,"div",8)(23,"div",9)(24,"div",10)(25,"div",11)(26,"div",12)(27,"span",13),e.EFF(28,"Pending Review"),e.k0s(),e.j41(29,"h4",14)(30,"span",17),e.EFF(31),e.k0s()()(),e.j41(32,"div",15)(33,"div",18)(34,"span",19),e.nrm(35,"i",20),e.k0s()()()()()()(),e.j41(36,"div",8)(37,"div",9)(38,"div",10)(39,"div",11)(40,"div",12)(41,"span",13),e.EFF(42,"Approved"),e.k0s(),e.j41(43,"h4",14),e.EFF(44),e.k0s()(),e.j41(45,"div",15)(46,"div",21)(47,"span",22),e.nrm(48,"i",23),e.k0s()()()()()()(),e.j41(49,"div",8)(50,"div",9)(51,"div",10)(52,"div",11)(53,"div",12)(54,"span",13),e.EFF(55,"Needs Revision"),e.k0s(),e.j41(56,"h4",14),e.EFF(57),e.k0s()(),e.j41(58,"div",15)(59,"div",24)(60,"span",25),e.nrm(61,"i",26),e.k0s()()()()()()()(),e.j41(62,"div",1)(63,"div",2)(64,"div",27)(65,"div",10)(66,"div",28)(67,"div",29)(68,"label",30),e.EFF(69,"Filter by Status"),e.k0s(),e.j41(70,"select",31),e.mxI("ngModelChange",function(a){return e.DH7(n.selectedStatus,a)||(n.selectedStatus=a),a}),e.bIt("change",function(){return n.onStatusChange()}),e.j41(71,"option",32),e.EFF(72,"All Statuses"),e.k0s(),e.j41(73,"option",33),e.EFF(74,"Pending"),e.k0s(),e.j41(75,"option",34),e.EFF(76,"Reviewed"),e.k0s(),e.j41(77,"option",35),e.EFF(78,"Approved"),e.k0s(),e.j41(79,"option",36),e.EFF(80,"Needs Revision"),e.k0s()()(),e.j41(81,"div",29)(82,"label",37),e.EFF(83,"Filter by Form Type"),e.k0s(),e.j41(84,"select",38),e.mxI("ngModelChange",function(a){return e.DH7(n.selectedFormType,a)||(n.selectedFormType=a),a}),e.bIt("change",function(){return n.onFormTypeChange()}),e.j41(85,"option",32),e.EFF(86,"All Types"),e.k0s(),e.j41(87,"option",39),e.EFF(88,"Tax Intake"),e.k0s(),e.j41(89,"option",40),e.EFF(90,"Business Intake"),e.k0s()()(),e.j41(91,"div",41)(92,"label",42),e.EFF(93,"Search Forms"),e.k0s(),e.j41(94,"input",43),e.mxI("ngModelChange",function(a){return e.DH7(n.searchTerm,a)||(n.searchTerm=a),a}),e.bIt("input",function(){return n.onSearchChange()}),e.k0s()()(),e.j41(95,"div",44)(96,"table",45)(97,"thead",46)(98,"tr")(99,"th"),e.EFF(100,"Client"),e.k0s(),e.j41(101,"th"),e.EFF(102,"Project"),e.k0s(),e.j41(103,"th"),e.EFF(104,"Form Type"),e.k0s(),e.j41(105,"th"),e.EFF(106,"Submission Date"),e.k0s(),e.j41(107,"th"),e.EFF(108,"Status"),e.k0s(),e.j41(109,"th"),e.EFF(110,"Progress"),e.k0s(),e.j41(111,"th"),e.EFF(112,"Last Modified"),e.k0s(),e.j41(113,"th"),e.EFF(114,"Actions"),e.k0s()()(),e.j41(115,"tbody"),e.DNE(116,x,49,25,"tr",47)(117,P,3,0,"tr",48),e.k0s()()()()()()()()),2&o&&(e.R7$(19),e.JRh(n.stats.total),e.R7$(12),e.JRh(n.stats.pending),e.R7$(13),e.JRh(n.stats.approved),e.R7$(13),e.JRh(n.stats.needsRevision),e.R7$(13),e.R50("ngModel",n.selectedStatus),e.R7$(14),e.R50("ngModel",n.selectedFormType),e.R7$(10),e.R50("ngModel",n.searchTerm),e.R7$(22),e.Y8G("ngForOf",n.filteredForms),e.R7$(),e.Y8G("ngIf",0===n.filteredForms.length))},dependencies:[d.Sq,d.bT,l.xH,l.y7,l.me,l.wz,l.BC,l.vS,d.PV,d.vh],styles:[".card-h-100[_ngcontent-%COMP%]{height:100%}.avatar-sm[_ngcontent-%COMP%]{height:2rem;width:2rem}.avatar-title[_ngcontent-%COMP%]{align-items:center;background-color:#556ee6;color:#fff;display:flex;font-weight:500;height:100%;justify-content:center;width:100%}.bg-primary-subtle[_ngcontent-%COMP%]{background-color:#556ee61a!important}.bg-success-subtle[_ngcontent-%COMP%]{background-color:#34c38f1a!important}.bg-warning-subtle[_ngcontent-%COMP%]{background-color:#fcb92c1a!important}.bg-danger-subtle[_ngcontent-%COMP%]{background-color:#f46a6a1a!important}.progress[_ngcontent-%COMP%]{height:6px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;border-top:none}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.badge[_ngcontent-%COMP%]{font-size:.75rem}"]})}}return i})();function T(i,r){if(1&i&&(e.j41(0,"option",56),e.EFF(1),e.k0s()),2&i){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.name)}}function E(i,r){if(1&i&&(e.j41(0,"p",60),e.nrm(1,"i",76),e.EFF(2),e.nI1(3,"slice"),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(2),e.SpI("",e.brH(3,1,t.notes,0,50),"... ")}}function D(i,r){if(1&i&&(e.j41(0,"div")(1,"span",77),e.EFF(2),e.k0s(),e.j41(3,"p",78),e.EFF(4),e.nI1(5,"date"),e.k0s()()),2&i){const t=e.XpG().$implicit;e.R7$(2),e.JRh(t.reviewedBy),e.R7$(2),e.JRh(e.i5U(5,2,t.reviewDate,"short"))}}function I(i,r){1&i&&(e.j41(0,"span",79),e.EFF(1,"Not reviewed"),e.k0s())}function R(i,r){if(1&i){const t=e.RV6();e.j41(0,"button",80),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,s=e.XpG();return e.Njj(s.updateStatus(n,"approved"))}),e.nrm(1,"i",81),e.k0s()}}function M(i,r){if(1&i){const t=e.RV6();e.j41(0,"button",82),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,s=e.XpG();return e.Njj(s.updateStatus(n,"rejected"))}),e.nrm(1,"i",83),e.k0s()}}function S(i,r){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"div",11),e.nrm(3,"i",57),e.j41(4,"div")(5,"h6",58),e.EFF(6),e.k0s(),e.DNE(7,E,4,5,"p",59),e.k0s()()(),e.j41(8,"td")(9,"div")(10,"h6",58),e.EFF(11),e.k0s(),e.j41(12,"p",60),e.EFF(13),e.k0s()()(),e.j41(14,"td")(15,"span"),e.EFF(16),e.k0s()(),e.j41(17,"td")(18,"div")(19,"span",61),e.EFF(20),e.k0s(),e.j41(21,"p",60),e.EFF(22),e.k0s()()(),e.j41(23,"td"),e.EFF(24),e.nI1(25,"date"),e.k0s(),e.j41(26,"td")(27,"div",62)(28,"span",63),e.EFF(29),e.nI1(30,"titlecase"),e.k0s(),e.j41(31,"ul",64)(32,"li")(33,"a",65),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.updateStatus(n,"pending"))}),e.EFF(34,"Pending"),e.k0s()(),e.j41(35,"li")(36,"a",65),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.updateStatus(n,"reviewed"))}),e.EFF(37,"Reviewed"),e.k0s()(),e.j41(38,"li")(39,"a",65),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.updateStatus(n,"approved"))}),e.EFF(40,"Approved"),e.k0s()(),e.j41(41,"li")(42,"a",65),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.updateStatus(n,"rejected"))}),e.EFF(43,"Rejected"),e.k0s()()()()(),e.j41(44,"td"),e.DNE(45,D,6,5,"div",55)(46,I,2,0,"span",66),e.k0s(),e.j41(47,"td")(48,"div",67)(49,"button",68),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.viewDocument(n))}),e.nrm(50,"i",69),e.k0s(),e.j41(51,"button",70),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.downloadDocument(n))}),e.nrm(52,"i",71),e.k0s(),e.j41(53,"button",72),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.addNotes(n))}),e.nrm(54,"i",73),e.k0s(),e.DNE(55,R,2,0,"button",74)(56,M,2,0,"button",75),e.k0s()()()}if(2&i){const t=r.$implicit,o=e.XpG();e.R7$(6),e.JRh(t.documentName),e.R7$(),e.Y8G("ngIf",t.notes),e.R7$(4),e.JRh(t.clientName),e.R7$(2),e.JRh(t.clientEmail),e.R7$(2),e.HbH(o.getCategoryClass(t.category)),e.R7$(),e.SpI(" ",o.getCategoryDisplay(t.category)," "),e.R7$(4),e.JRh(t.documentType),e.R7$(2),e.JRh(t.size),e.R7$(2),e.JRh(e.i5U(25,17,t.uploadDate,"short")),e.R7$(4),e.HbH(o.getStatusClass(t.status)),e.R7$(),e.SpI(" ",e.bMT(30,20,t.status)," "),e.R7$(16),e.Y8G("ngIf",t.reviewedBy),e.R7$(),e.Y8G("ngIf",!t.reviewedBy),e.R7$(9),e.Y8G("ngIf","pending"===t.status),e.R7$(),e.Y8G("ngIf","pending"===t.status||"reviewed"===t.status)}}function $(i,r){1&i&&(e.j41(0,"tr")(1,"td",84),e.EFF(2," No documents found matching your criteria. "),e.k0s()())}let O=(()=>{class i{constructor(){this.documents=[],this.filteredDocuments=[],this.selectedStatus="all",this.selectedCategory="all",this.selectedClient="all",this.searchTerm="",this.stats={total:0,pending:0,reviewed:0,approved:0,rejected:0},this.clients=[]}ngOnInit(){this.loadDocuments(),this.calculateStats(),this.extractClients()}loadDocuments(){this.documents=[{id:1,clientId:101,clientName:"John Smith",clientEmail:"john.smith@email.com",documentName:"W2_2024.pdf",documentType:"PDF",category:"tax-documents",size:"245 KB",uploadDate:"2024-02-15T10:30:00Z",status:"pending"},{id:2,clientId:102,clientName:"Sarah Johnson",clientEmail:"sarah.johnson@email.com",documentName:"Bank_Statement_Jan2024.pdf",documentType:"PDF",category:"financial-statements",size:"1.2 MB",uploadDate:"2024-02-14T14:20:00Z",status:"reviewed",reviewedBy:"Tax Consultant",reviewDate:"2024-02-16T09:15:00Z"},{id:3,clientId:103,clientName:"Michael Brown",clientEmail:"michael.brown@email.com",documentName:"Receipt_Office_Supplies.jpg",documentType:"Image",category:"receipts",size:"890 KB",uploadDate:"2024-02-13T16:45:00Z",status:"approved",reviewedBy:"Tax Consultant",reviewDate:"2024-02-17T11:30:00Z"},{id:4,clientId:104,clientName:"Emily Davis",clientEmail:"emily.davis@email.com",documentName:"1099_Form.pdf",documentType:"PDF",category:"tax-documents",size:"156 KB",uploadDate:"2024-02-12T09:10:00Z",status:"rejected",reviewedBy:"Tax Consultant",reviewDate:"2024-02-16T15:20:00Z",notes:"Document is unclear, please re-upload with better quality"},{id:5,clientId:105,clientName:"Robert Wilson",clientEmail:"robert.wilson@email.com",documentName:"Business_Expenses_Q1.xlsx",documentType:"Spreadsheet",category:"financial-statements",size:"2.1 MB",uploadDate:"2024-02-11T13:25:00Z",status:"pending"},{id:6,clientId:101,clientName:"John Smith",clientEmail:"john.smith@email.com",documentName:"Property_Tax_Statement.pdf",documentType:"PDF",category:"tax-documents",size:"340 KB",uploadDate:"2024-02-10T11:15:00Z",status:"approved",reviewedBy:"Tax Consultant",reviewDate:"2024-02-15T14:45:00Z"}],this.filteredDocuments=[...this.documents]}calculateStats(){this.stats.total=this.documents.length,this.stats.pending=this.documents.filter(t=>"pending"===t.status).length,this.stats.reviewed=this.documents.filter(t=>"reviewed"===t.status).length,this.stats.approved=this.documents.filter(t=>"approved"===t.status).length,this.stats.rejected=this.documents.filter(t=>"rejected"===t.status).length}extractClients(){const t=new Map;this.documents.forEach(o=>{t.has(o.clientId)||t.set(o.clientId,{id:o.clientId,name:o.clientName})}),this.clients=Array.from(t.values())}filterDocuments(){this.filteredDocuments=this.documents.filter(t=>{const o="all"===this.selectedStatus||t.status===this.selectedStatus,n="all"===this.selectedCategory||t.category===this.selectedCategory,s="all"===this.selectedClient||t.clientId.toString()===this.selectedClient,a=t.documentName.toLowerCase().includes(this.searchTerm.toLowerCase())||t.clientName.toLowerCase().includes(this.searchTerm.toLowerCase())||t.clientEmail.toLowerCase().includes(this.searchTerm.toLowerCase());return o&&n&&s&&a})}onStatusChange(){this.filterDocuments()}onCategoryChange(){this.filterDocuments()}onClientChange(){this.filterDocuments()}onSearchChange(){this.filterDocuments()}getStatusClass(t){switch(t){case"approved":return"badge bg-success";case"reviewed":return"badge bg-info";case"pending":return"badge bg-warning";case"rejected":return"badge bg-danger";default:return"badge bg-secondary"}}getCategoryDisplay(t){switch(t){case"tax-documents":return"Tax Documents";case"financial-statements":return"Financial Statements";case"receipts":return"Receipts";case"other":return"Other";default:return t}}getCategoryClass(t){switch(t){case"tax-documents":return"badge bg-primary-subtle text-primary";case"financial-statements":return"badge bg-success-subtle text-success";case"receipts":return"badge bg-warning-subtle text-warning";case"other":return"badge bg-info-subtle text-info";default:return"badge bg-secondary"}}viewDocument(t){c().fire({title:"View Document",text:`Opening ${t.documentName} for ${t.clientName}`,icon:"info",timer:2e3,showConfirmButton:!1})}downloadDocument(t){c().fire({title:"Download Started",text:`Downloading ${t.documentName}...`,icon:"info",timer:2e3,showConfirmButton:!1})}updateStatus(t,o){const n=t.status;t.status=o,t.reviewedBy="Tax Consultant",t.reviewDate=(new Date).toISOString(),this.calculateStats(),this.filterDocuments(),c().fire({title:"Status Updated",text:`Document status changed from ${n} to ${o}`,icon:"success",timer:2e3,showConfirmButton:!1})}addNotes(t){c().fire({title:"Add Notes",input:"textarea",inputLabel:"Review Notes",inputPlaceholder:"Enter your notes about this document...",inputValue:t.notes||"",showCancelButton:!0,confirmButtonText:"Save Notes",cancelButtonText:"Cancel"}).then(o=>{o.isConfirmed&&(t.notes=o.value,t.reviewedBy="Tax Consultant",t.reviewDate=(new Date).toISOString(),c().fire({title:"Notes Saved",text:"Review notes have been added to the document",icon:"success",timer:2e3,showConfirmButton:!1}))})}exportDocuments(){c().fire({title:"Export Started",text:"Preparing documents export...",icon:"info",timer:2e3,showConfirmButton:!1})}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-client-documents"]],decls:130,vars:11,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box","d-sm-flex","align-items-center","justify-content-between"],[1,"mb-sm-0","font-size-18"],[1,"page-title-right"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"ri-download-line","me-1"],[1,"col-xl-3","col-md-6"],[1,"card","card-h-100"],[1,"card-body"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"],[1,"text-muted","mb-3","lh-1","d-block","text-truncate"],[1,"mb-3"],[1,"flex-shrink-0"],[1,"avatar-sm","rounded-circle","bg-primary-subtle"],[1,"avatar-title","rounded-circle","bg-primary-subtle","text-primary"],[1,"ri-file-text-line","font-size-24"],[1,"avatar-sm","rounded-circle","bg-warning-subtle"],[1,"avatar-title","rounded-circle","bg-warning-subtle","text-warning"],[1,"ri-time-line","font-size-24"],[1,"avatar-sm","rounded-circle","bg-success-subtle"],[1,"avatar-title","rounded-circle","bg-success-subtle","text-success"],[1,"ri-check-line","font-size-24"],[1,"avatar-sm","rounded-circle","bg-danger-subtle"],[1,"avatar-title","rounded-circle","bg-danger-subtle","text-danger"],[1,"ri-close-line","font-size-24"],[1,"card"],[1,"row","mb-4"],[1,"col-md-2"],["for","statusFilter",1,"form-label"],["id","statusFilter",1,"form-select",3,"ngModelChange","change","ngModel"],["value","all"],["value","pending"],["value","reviewed"],["value","approved"],["value","rejected"],["for","categoryFilter",1,"form-label"],["id","categoryFilter",1,"form-select",3,"ngModelChange","change","ngModel"],["value","tax-documents"],["value","financial-statements"],["value","receipts"],["value","other"],[1,"col-md-3"],["for","clientFilter",1,"form-label"],["id","clientFilter",1,"form-select",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-5"],["for","searchInput",1,"form-label"],["type","text","id","searchInput","placeholder","Search by document name, client name, or email...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"table-responsive"],[1,"table","table-nowrap","table-hover"],[1,"table-light"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[1,"ri-file-text-line","me-2","text-muted"],[1,"mb-1"],["class","text-muted mb-0 font-size-12",4,"ngIf"],[1,"text-muted","mb-0","font-size-12"],[1,"badge","bg-light","text-dark"],[1,"dropdown"],["data-bs-toggle","dropdown",1,"dropdown-toggle",2,"cursor","pointer"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["class","text-muted font-size-12",4,"ngIf"],[1,"d-flex","gap-1"],["type","button","title","View Document",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"ri-eye-line"],["type","button","title","Download",1,"btn","btn-sm","btn-outline-info",3,"click"],[1,"ri-download-line"],["type","button","title","Add Notes",1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"ri-sticky-note-line"],["type","button","class","btn btn-sm btn-outline-success","title","Approve",3,"click",4,"ngIf"],["type","button","class","btn btn-sm btn-outline-danger","title","Reject",3,"click",4,"ngIf"],[1,"ri-sticky-note-line","me-1"],[1,"font-size-12"],[1,"text-muted","mb-0","font-size-11"],[1,"text-muted","font-size-12"],["type","button","title","Approve",1,"btn","btn-sm","btn-outline-success",3,"click"],[1,"ri-check-line"],["type","button","title","Reject",1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"ri-close-line"],["colspan","8",1,"text-center","text-muted","py-4"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),e.EFF(5,"Client Documents"),e.k0s(),e.j41(6,"div",5)(7,"button",6),e.bIt("click",function(){return n.exportDocuments()}),e.nrm(8,"i",7),e.EFF(9,"Export Documents "),e.k0s()()()()(),e.j41(10,"div",1)(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12)(16,"span",13),e.EFF(17,"Total Documents"),e.k0s(),e.j41(18,"h4",14),e.EFF(19),e.k0s()(),e.j41(20,"div",15)(21,"div",16)(22,"span",17),e.nrm(23,"i",18),e.k0s()()()()()()(),e.j41(24,"div",8)(25,"div",9)(26,"div",10)(27,"div",11)(28,"div",12)(29,"span",13),e.EFF(30,"Pending Review"),e.k0s(),e.j41(31,"h4",14),e.EFF(32),e.k0s()(),e.j41(33,"div",15)(34,"div",19)(35,"span",20),e.nrm(36,"i",21),e.k0s()()()()()()(),e.j41(37,"div",8)(38,"div",9)(39,"div",10)(40,"div",11)(41,"div",12)(42,"span",13),e.EFF(43,"Approved"),e.k0s(),e.j41(44,"h4",14),e.EFF(45),e.k0s()(),e.j41(46,"div",15)(47,"div",22)(48,"span",23),e.nrm(49,"i",24),e.k0s()()()()()()(),e.j41(50,"div",8)(51,"div",9)(52,"div",10)(53,"div",11)(54,"div",12)(55,"span",13),e.EFF(56,"Rejected"),e.k0s(),e.j41(57,"h4",14),e.EFF(58),e.k0s()(),e.j41(59,"div",15)(60,"div",25)(61,"span",26),e.nrm(62,"i",27),e.k0s()()()()()()()(),e.j41(63,"div",1)(64,"div",2)(65,"div",28)(66,"div",10)(67,"div",29)(68,"div",30)(69,"label",31),e.EFF(70,"Status"),e.k0s(),e.j41(71,"select",32),e.mxI("ngModelChange",function(a){return e.DH7(n.selectedStatus,a)||(n.selectedStatus=a),a}),e.bIt("change",function(){return n.onStatusChange()}),e.j41(72,"option",33),e.EFF(73,"All Statuses"),e.k0s(),e.j41(74,"option",34),e.EFF(75,"Pending"),e.k0s(),e.j41(76,"option",35),e.EFF(77,"Reviewed"),e.k0s(),e.j41(78,"option",36),e.EFF(79,"Approved"),e.k0s(),e.j41(80,"option",37),e.EFF(81,"Rejected"),e.k0s()()(),e.j41(82,"div",30)(83,"label",38),e.EFF(84,"Category"),e.k0s(),e.j41(85,"select",39),e.mxI("ngModelChange",function(a){return e.DH7(n.selectedCategory,a)||(n.selectedCategory=a),a}),e.bIt("change",function(){return n.onCategoryChange()}),e.j41(86,"option",33),e.EFF(87,"All Categories"),e.k0s(),e.j41(88,"option",40),e.EFF(89,"Tax Documents"),e.k0s(),e.j41(90,"option",41),e.EFF(91,"Financial Statements"),e.k0s(),e.j41(92,"option",42),e.EFF(93,"Receipts"),e.k0s(),e.j41(94,"option",43),e.EFF(95,"Other"),e.k0s()()(),e.j41(96,"div",44)(97,"label",45),e.EFF(98,"Client"),e.k0s(),e.j41(99,"select",46),e.mxI("ngModelChange",function(a){return e.DH7(n.selectedClient,a)||(n.selectedClient=a),a}),e.bIt("change",function(){return n.onClientChange()}),e.j41(100,"option",33),e.EFF(101,"All Clients"),e.k0s(),e.DNE(102,T,2,2,"option",47),e.k0s()(),e.j41(103,"div",48)(104,"label",49),e.EFF(105,"Search Documents"),e.k0s(),e.j41(106,"input",50),e.mxI("ngModelChange",function(a){return e.DH7(n.searchTerm,a)||(n.searchTerm=a),a}),e.bIt("input",function(){return n.onSearchChange()}),e.k0s()()(),e.j41(107,"div",51)(108,"table",52)(109,"thead",53)(110,"tr")(111,"th"),e.EFF(112,"Document"),e.k0s(),e.j41(113,"th"),e.EFF(114,"Client"),e.k0s(),e.j41(115,"th"),e.EFF(116,"Category"),e.k0s(),e.j41(117,"th"),e.EFF(118,"Type & Size"),e.k0s(),e.j41(119,"th"),e.EFF(120,"Upload Date"),e.k0s(),e.j41(121,"th"),e.EFF(122,"Status"),e.k0s(),e.j41(123,"th"),e.EFF(124,"Reviewed By"),e.k0s(),e.j41(125,"th"),e.EFF(126,"Actions"),e.k0s()()(),e.j41(127,"tbody"),e.DNE(128,S,57,22,"tr",54)(129,$,3,0,"tr",55),e.k0s()()()()()()()()),2&o&&(e.R7$(19),e.JRh(n.stats.total),e.R7$(13),e.JRh(n.stats.pending),e.R7$(13),e.JRh(n.stats.approved),e.R7$(13),e.JRh(n.stats.rejected),e.R7$(13),e.R50("ngModel",n.selectedStatus),e.R7$(14),e.R50("ngModel",n.selectedCategory),e.R7$(14),e.R50("ngModel",n.selectedClient),e.R7$(3),e.Y8G("ngForOf",n.clients),e.R7$(4),e.R50("ngModel",n.searchTerm),e.R7$(22),e.Y8G("ngForOf",n.filteredDocuments),e.R7$(),e.Y8G("ngIf",0===n.filteredDocuments.length))},dependencies:[d.Sq,d.bT,l.xH,l.y7,l.me,l.wz,l.BC,l.vS,d.P9,d.PV,d.vh],styles:[".card-h-100[_ngcontent-%COMP%]{height:100%}.avatar-sm[_ngcontent-%COMP%]{height:2rem;width:2rem}.avatar-title[_ngcontent-%COMP%]{align-items:center;background-color:#556ee6;color:#fff;display:flex;font-weight:500;height:100%;justify-content:center;width:100%}.bg-primary-subtle[_ngcontent-%COMP%]{background-color:#556ee61a!important}.bg-success-subtle[_ngcontent-%COMP%]{background-color:#34c38f1a!important}.bg-warning-subtle[_ngcontent-%COMP%]{background-color:#fcb92c1a!important}.bg-danger-subtle[_ngcontent-%COMP%]{background-color:#f46a6a1a!important}.bg-info-subtle[_ngcontent-%COMP%]{background-color:#50a5f11a!important}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;border-top:none}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.badge[_ngcontent-%COMP%]{font-size:.75rem}.font-size-11[_ngcontent-%COMP%]{font-size:.6875rem}.font-size-12[_ngcontent-%COMP%]{font-size:.75rem}.btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.75rem}"]})}}return i})();var f=p(1413),m=p(6977),_=p(6344);function N(i,r){1&i&&(e.j41(0,"div",1)(1,"div",2)(2,"div",12)(3,"div",13)(4,"div",14)(5,"span",15),e.EFF(6,"Loading..."),e.k0s()(),e.j41(7,"p",16),e.EFF(8,"Loading projects..."),e.k0s()()()()())}function G(i,r){if(1&i&&(e.j41(0,"p",35),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.description)}}function B(i,r){if(1&i){const t=e.RV6();e.j41(0,"li")(1,"a",36),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG().$implicit,a=e.XpG(3);return e.Njj(a.updateProjectStatus(s,n.value))}),e.EFF(2),e.k0s()()}if(2&i){const t=r.$implicit,o=e.XpG().$implicit;e.R7$(),e.AVh("active",o.status===t.value),e.R7$(),e.SpI(" ",t.label," ")}}function A(i,r){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.taxYear)}}function Y(i,r){1&i&&(e.j41(0,"span",37),e.EFF(1,"N/A"),e.k0s())}function z(i,r){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"div")(3,"h5",24),e.EFF(4),e.k0s(),e.DNE(5,G,2,1,"p",25),e.k0s()(),e.j41(6,"td")(7,"span",26),e.EFF(8),e.k0s()(),e.j41(9,"td")(10,"div",27)(11,"button",28),e.EFF(12),e.k0s(),e.j41(13,"ul",29),e.DNE(14,B,3,3,"li",23),e.k0s()()(),e.j41(15,"td"),e.DNE(16,A,2,1,"span",30)(17,Y,2,0,"span",31),e.k0s(),e.j41(18,"td")(19,"span"),e.EFF(20),e.k0s()(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td")(24,"div",32)(25,"button",33),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(3);return e.Njj(s.viewProject(n))}),e.nrm(26,"i",34),e.k0s()()()()}if(2&i){const t=r.$implicit,o=e.XpG(3);e.R7$(4),e.JRh(t.name),e.R7$(),e.Y8G("ngIf",t.description),e.R7$(3),e.JRh(o.getTypeLabel(t.projectType)),e.R7$(3),e.ZvI("btn btn-sm ",o.getStatusClass(t.status)," dropdown-toggle"),e.R7$(),e.SpI(" ",o.getStatusLabel(t.status)," "),e.R7$(2),e.Y8G("ngForOf",o.projectStatuses),e.R7$(2),e.Y8G("ngIf",t.taxYear),e.R7$(),e.Y8G("ngIf",!t.taxYear),e.R7$(2),e.AVh("text-danger",o.isOverdue(t.dueDate)),e.R7$(),e.SpI(" ",o.formatDate(t.dueDate)," "),e.R7$(2),e.JRh(o.formatDate(t.createdAt))}}function X(i,r){if(1&i&&(e.j41(0,"div",20)(1,"table",21)(2,"thead")(3,"tr")(4,"th",22),e.EFF(5,"Project Name"),e.k0s(),e.j41(6,"th",22),e.EFF(7,"Type"),e.k0s(),e.j41(8,"th",22),e.EFF(9,"Status"),e.k0s(),e.j41(10,"th",22),e.EFF(11,"Tax Year"),e.k0s(),e.j41(12,"th",22),e.EFF(13,"Due Date"),e.k0s(),e.j41(14,"th",22),e.EFF(15,"Created"),e.k0s(),e.j41(16,"th",22),e.EFF(17,"Actions"),e.k0s()()(),e.j41(18,"tbody"),e.DNE(19,z,27,14,"tr",23),e.k0s()()()),2&i){const t=e.XpG(2);e.R7$(19),e.Y8G("ngForOf",t.projects)}}function V(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",38)(1,"div",39),e.nrm(2,"i",40),e.k0s(),e.j41(3,"h5"),e.EFF(4,"No Projects Found"),e.k0s(),e.j41(5,"p",37),e.EFF(6,"This client doesn't have any projects yet. Create one to get started."),e.k0s(),e.j41(7,"button",7),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.openCreateModal())}),e.nrm(8,"i",8),e.EFF(9," Create First Project "),e.k0s()()}}function L(i,r){if(1&i&&(e.j41(0,"div",1)(1,"div",2)(2,"div",12)(3,"div",17),e.DNE(4,X,20,1,"div",18)(5,V,10,0,"div",19),e.k0s()()()()),2&i){const t=e.XpG();e.R7$(4),e.Y8G("ngIf",t.projects.length>0),e.R7$(),e.Y8G("ngIf",0===t.projects.length)}}function J(i,r){if(1&i&&(e.j41(0,"option",65),e.EFF(1),e.k0s()),2&i){const t=r.$implicit;e.Y8G("value",t.value),e.R7$(),e.SpI(" ",t.label," ")}}function U(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",41)(1,"div",42)(2,"div",43)(3,"div",44)(4,"h5",45),e.EFF(5,"Create New Project"),e.k0s(),e.j41(6,"button",46),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeCreateModal())}),e.k0s()(),e.j41(7,"div",47)(8,"form")(9,"div",1)(10,"div",48)(11,"div",49)(12,"label",50),e.EFF(13,"Project Name *"),e.k0s(),e.j41(14,"input",51),e.mxI("ngModelChange",function(n){e.eBV(t);const s=e.XpG();return e.DH7(s.newProject.name,n)||(s.newProject.name=n),e.Njj(n)}),e.k0s()()(),e.j41(15,"div",52)(16,"div",49)(17,"label",53),e.EFF(18,"Project Type *"),e.k0s(),e.j41(19,"select",54),e.mxI("ngModelChange",function(n){e.eBV(t);const s=e.XpG();return e.DH7(s.newProject.projectType,n)||(s.newProject.projectType=n),e.Njj(n)}),e.DNE(20,J,2,2,"option",55),e.k0s()()()(),e.j41(21,"div",1)(22,"div",56)(23,"div",49)(24,"label",57),e.EFF(25,"Tax Year"),e.k0s(),e.j41(26,"input",58),e.mxI("ngModelChange",function(n){e.eBV(t);const s=e.XpG();return e.DH7(s.newProject.taxYear,n)||(s.newProject.taxYear=n),e.Njj(n)}),e.k0s()()(),e.j41(27,"div",56)(28,"div",49)(29,"label",59),e.EFF(30,"Due Date"),e.k0s(),e.j41(31,"input",60),e.mxI("ngModelChange",function(n){e.eBV(t);const s=e.XpG();return e.DH7(s.newProject.dueDate,n)||(s.newProject.dueDate=n),e.Njj(n)}),e.k0s()()()(),e.j41(32,"div",49)(33,"label",61),e.EFF(34,"Description"),e.k0s(),e.j41(35,"textarea",62),e.mxI("ngModelChange",function(n){e.eBV(t);const s=e.XpG();return e.DH7(s.newProject.description,n)||(s.newProject.description=n),e.Njj(n)}),e.k0s()()()(),e.j41(36,"div",63)(37,"button",64),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeCreateModal())}),e.EFF(38,"Cancel"),e.k0s(),e.j41(39,"button",7),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.createProject())}),e.EFF(40,"Create Project"),e.k0s()()()()()}if(2&i){const t=e.XpG();e.xc7("display",t.showCreateModal?"block":"none"),e.AVh("show",t.showCreateModal),e.R7$(14),e.R50("ngModel",t.newProject.name),e.R7$(5),e.R50("ngModel",t.newProject.projectType),e.R7$(),e.Y8G("ngForOf",t.projectTypes),e.R7$(6),e.R50("ngModel",t.newProject.taxYear),e.Y8G("min",2020)("max",2030),e.R7$(5),e.R50("ngModel",t.newProject.dueDate),e.R7$(4),e.R50("ngModel",t.newProject.description)}}function H(i,r){1&i&&e.nrm(0,"div",66)}let Z=(()=>{class i{constructor(t,o,n){this.route=t,this.router=o,this.apiService=n,this.destroy$=new f.B,this.clientName="",this.projects=[],this.isLoading=!1,this.showCreateModal=!1,this.newProject={name:"",projectType:"Tax Return",taxYear:(new Date).getFullYear(),dueDate:"",description:""},this.projectTypes=[{value:"Tax Return",label:"Tax Return"},{value:"Quarterly Filing",label:"Quarterly Filing"},{value:"Business Setup",label:"Business Setup"},{value:"Audit",label:"Audit"},{value:"Consultation",label:"Consultation"},{value:"Other",label:"Other"}],this.projectTypeMap={"Tax Return":"tax_return","Quarterly Filing":"quarterly_filing","Business Setup":"business_setup",Audit:"audit",Consultation:"consultation",Other:"other"},this.projectStatuses=[{value:"active",label:"Active",class:"badge bg-success"},{value:"in_progress",label:"In Progress",class:"badge bg-primary"},{value:"completed",label:"Completed",class:"badge bg-info"},{value:"on_hold",label:"On Hold",class:"badge bg-warning"},{value:"cancelled",label:"Cancelled",class:"badge bg-danger"}]}ngOnInit(){this.route.params.subscribe(t=>{this.clientId=+t.clientId,this.clientId&&(this.loadClientProjects(),this.loadClientInfo())})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadClientProjects(){this.isLoading=!0,this.apiService.getClientProjects(this.clientId).pipe((0,m.Q)(this.destroy$)).subscribe({next:t=>{t.success&&t.projects&&(this.projects=t.projects),this.isLoading=!1},error:t=>{console.error("Error loading client projects:",t),this.isLoading=!1,c().fire({title:"Error",text:"Failed to load client projects.",icon:"error"})}})}loadClientInfo(){this.apiService.getClients().pipe((0,m.Q)(this.destroy$)).subscribe({next:t=>{if(t.success&&t.clients){const o=t.clients.find(n=>n.id===this.clientId);o&&(this.clientName=`${o.firstName} ${o.lastName}`)}},error:t=>{console.error("Error loading client info:",t)}})}openCreateModal(){this.newProject={name:"",projectType:"tax_return",taxYear:(new Date).getFullYear(),dueDate:"",description:""},this.showCreateModal=!0}closeCreateModal(){this.showCreateModal=!1}createProject(){if(!this.newProject.name.trim())return void c().fire({title:"Validation Error",text:"Project name is required.",icon:"warning"});if(!this.newProject.projectType)return void c().fire({title:"Validation Error",text:"Project type is required.",icon:"warning"});const t=this.projectTypeMap[this.newProject.projectType]||this.newProject.projectType,o={name:this.newProject.name.trim(),projectType:t};this.newProject.taxYear&&this.newProject.taxYear>0&&(o.taxYear=this.newProject.taxYear),this.newProject.dueDate&&this.newProject.dueDate.trim()&&(o.dueDate=this.newProject.dueDate.trim()),this.newProject.description&&this.newProject.description.trim()&&(o.description=this.newProject.description.trim()),console.log("=== PROJECT CREATION DEBUG v112 - FIXED MAPPING ==="),console.log("Raw form data:",this.newProject),console.log("Original projectType:",this.newProject.projectType),console.log("Mapped projectType:",t),console.log("Cleaned project data being sent:",o),console.log("Client ID:",this.clientId),console.log("Project data JSON:",JSON.stringify(o,null,2)),console.log("Current timestamp:",(new Date).toISOString()),console.log("==============================="),alert("Project creation starting v112 - FIXED DROPDOWN MAPPING - should now send projectType correctly"),this.apiService.createClientProject(this.clientId,o).pipe((0,m.Q)(this.destroy$)).subscribe({next:n=>{console.log("Project creation response:",n),n.success?(c().fire({title:"Success!",text:"Project created successfully.",icon:"success",timer:2e3,showConfirmButton:!1}),this.closeCreateModal(),this.loadClientProjects()):(console.error("Project creation failed:",n.message),c().fire({title:"Error",text:n.message||"Failed to create project.",icon:"error"}))},error:n=>{console.error("Error creating project:",n),console.error("Full error object:",JSON.stringify(n,null,2));let s="Failed to create project.";n.error&&n.error.message?s=n.error.message:n.error&&"string"==typeof n.error?s=n.error:n.message?s=n.message:n.status&&(s=`Server error (${n.status}): ${n.statusText||"Unknown error"}`),c().fire({title:"Error",text:s,icon:"error"})}})}getStatusClass(t){const o=this.projectStatuses.find(n=>n.value===t);return o?o.class:"badge bg-secondary"}getStatusLabel(t){const o=this.projectStatuses.find(n=>n.value===t);return o?o.label:t}getTypeLabel(t){const o=this.projectTypes.find(n=>n.value===t);return o?o.label:t}updateProjectStatus(t,o){this.apiService.updateProject(t.id,{name:t.name,projectType:t.projectType}).pipe((0,m.Q)(this.destroy$)).subscribe({next:n=>{n.success&&(t.status=o,c().fire({title:"Updated!",text:"Project status updated successfully.",icon:"success",timer:1500,showConfirmButton:!1}))},error:n=>{console.error("Error updating project status:",n),c().fire({title:"Error",text:"Failed to update project status.",icon:"error"})}})}viewProject(t){this.router.navigate(["/tax-consultant/project-detail",t.id])}isOverdue(t){return!!t&&new Date(t)<new Date}formatDate(t){return t?new Date(t).toLocaleDateString():"Not set"}goBack(){this.router.navigate(["/clients/list"])}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(u.nX),e.rXU(u.Ix),e.rXU(_.G))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-client-projects"]],decls:15,vars:5,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box","d-sm-flex","align-items-center","justify-content-between"],[1,"mb-sm-0","font-size-18"],["title","Go Back to Clients List",1,"bx","bx-arrow-back","me-2","cursor-pointer",3,"click"],[1,"page-title-right"],["type","button",1,"btn","btn-primary",3,"click"],[1,"bx","bx-plus","me-1"],["class","row",4,"ngIf"],["class","modal fade","tabindex","-1",3,"show","display",4,"ngIf"],["class","modal-backdrop fade show",4,"ngIf"],[1,"card"],[1,"card-body","text-center"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],[1,"mt-2"],[1,"card-body"],["class","table-responsive",4,"ngIf"],["class","text-center py-5",4,"ngIf"],[1,"table-responsive"],[1,"table","table-nowrap","align-middle","mb-0"],["scope","col"],[4,"ngFor","ngForOf"],[1,"font-size-14","mb-1"],["class","text-muted mb-0",4,"ngIf"],[1,"badge","bg-light","text-dark"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown"],[1,"dropdown-menu"],[4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"d-flex","gap-2"],["type","button","title","View Project Details",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bx","bx-show"],[1,"text-muted","mb-0"],[1,"dropdown-item",3,"click"],[1,"text-muted"],[1,"text-center","py-5"],[1,"mb-4"],[1,"bx","bx-folder-open","display-4","text-muted"],["tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"col-md-8"],[1,"mb-3"],["for","projectName",1,"form-label"],["type","text","id","projectName","name","projectName","placeholder","Enter project name",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-4"],["for","projectType",1,"form-label"],["id","projectType","name","projectType",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-6"],["for","taxYear",1,"form-label"],["type","number","id","taxYear","name","taxYear",1,"form-control",3,"ngModelChange","ngModel","min","max"],["for","dueDate",1,"form-label"],["type","date","id","dueDate","name","dueDate",1,"form-control",3,"ngModelChange","ngModel"],["for","description",1,"form-label"],["id","description","rows","3","name","description","placeholder","Enter project description (optional)",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],[3,"value"],[1,"modal-backdrop","fade","show"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4)(5,"i",5),e.bIt("click",function(){return n.goBack()}),e.k0s(),e.EFF(6),e.k0s(),e.j41(7,"div",6)(8,"button",7),e.bIt("click",function(){return n.openCreateModal()}),e.nrm(9,"i",8),e.EFF(10," New Project "),e.k0s()()()()(),e.DNE(11,N,9,0,"div",9)(12,L,6,2,"div",9),e.k0s(),e.DNE(13,U,41,12,"div",10)(14,H,1,0,"div",11)),2&o&&(e.R7$(6),e.SpI(" ",n.clientName," - Projects "),e.R7$(5),e.Y8G("ngIf",n.isLoading),e.R7$(),e.Y8G("ngIf",!n.isLoading),e.R7$(),e.Y8G("ngIf",n.showCreateModal),e.R7$(),e.Y8G("ngIf",n.showCreateModal))},dependencies:[d.Sq,d.bT,l.qT,l.xH,l.y7,l.me,l.Q0,l.wz,l.BC,l.cb,l.VZ,l.zX,l.vS,l.cV],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:none;font-weight:600;color:#495057;background-color:#f8f9fa}.badge[_ngcontent-%COMP%]{font-size:.75rem}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important}.modal[_ngcontent-%COMP%]{background-color:#00000080}.modal-content[_ngcontent-%COMP%]{border-radius:.5rem;box-shadow:0 .5rem 1rem #00000026}.modal-header[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6;padding:1rem 1.5rem}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.modal-footer[_ngcontent-%COMP%]{border-top:1px solid #dee2e6;padding:1rem 1.5rem}.btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem}.dropdown-toggle[_ngcontent-%COMP%]:after{margin-left:.5rem}.empty-state[_ngcontent-%COMP%]{padding:3rem 0}.display-4[_ngcontent-%COMP%]{font-size:3.5rem}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}"]})}}return i})();function Q(i,r){1&i&&(e.j41(0,"div",10)(1,"div",11)(2,"span",12),e.EFF(3,"Loading..."),e.k0s()()())}function K(i,r){if(1&i&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2,"Description"),e.k0s(),e.j41(3,"p",21),e.EFF(4),e.k0s()()),2&i){const t=e.XpG(2);e.R7$(4),e.JRh(t.project.description)}}function W(i,r){if(1&i&&(e.j41(0,"tr")(1,"td",39),e.EFF(2),e.nI1(3,"titlecase"),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s()()),2&i){const t=r.$implicit;e.R7$(2),e.JRh(e.bMT(3,2,t.key)),e.R7$(3),e.JRh(t.value)}}function q(i,r){if(1&i&&(e.j41(0,"div",14)(1,"div",15)(2,"h5",25),e.EFF(3,"Intake Form Information"),e.k0s(),e.j41(4,"div",36)(5,"table",37)(6,"tbody"),e.DNE(7,W,6,4,"tr",38),e.nI1(8,"keyvalue"),e.k0s()()()()()),2&i){const t=e.XpG(2);e.R7$(7),e.Y8G("ngForOf",e.bMT(8,1,t.intakeFormData))}}function ee(i,r){1&i&&e.nrm(0,"span",40)}function te(i,r){1&i&&e.nrm(0,"i",41)}function ne(i,r){1&i&&(e.j41(0,"div",42),e.nrm(1,"i",43),e.EFF(2," No documents uploaded yet "),e.k0s())}function oe(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",44)(1,"div",45)(2,"div",46)(3,"h6",47),e.EFF(4),e.k0s(),e.j41(5,"small",48),e.EFF(6),e.k0s()(),e.j41(7,"button",49),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.downloadDocument(n))}),e.nrm(8,"i",50),e.k0s()()()}if(2&i){const t=r.$implicit,o=e.XpG(2);e.R7$(4),e.JRh(t.originalName),e.R7$(2),e.Lme(" ",o.formatFileSize(t.fileSize)," \u2022 ",o.formatDate(t.uploadedAt)," ")}}function ie(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",1)(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16)(5,"h5",17),e.EFF(6),e.k0s(),e.j41(7,"span"),e.EFF(8),e.k0s()(),e.j41(9,"div",1)(10,"div",18)(11,"div",19)(12,"label",20),e.EFF(13,"Project Type"),e.k0s(),e.j41(14,"p",21),e.EFF(15),e.nI1(16,"titlecase"),e.k0s()()(),e.j41(17,"div",18)(18,"div",19)(19,"label",20),e.EFF(20,"Tax Year"),e.k0s(),e.j41(21,"p",21),e.EFF(22),e.k0s()()(),e.j41(23,"div",18)(24,"div",19)(25,"label",20),e.EFF(26,"Due Date"),e.k0s(),e.j41(27,"p",21),e.EFF(28),e.k0s()()(),e.j41(29,"div",18)(30,"div",19)(31,"label",20),e.EFF(32,"Created"),e.k0s(),e.j41(33,"p",21),e.EFF(34),e.k0s()()()(),e.DNE(35,K,5,1,"div",22),e.k0s()(),e.DNE(36,q,9,3,"div",23),e.k0s(),e.j41(37,"div",24)(38,"div",14)(39,"div",15)(40,"h5",25),e.EFF(41,"Upload Prepared Document"),e.k0s(),e.j41(42,"div",19)(43,"label",26),e.EFF(44,"Select File"),e.k0s(),e.j41(45,"input",27),e.bIt("change",function(n){e.eBV(t);const s=e.XpG();return e.Njj(s.onFileSelected(n))}),e.k0s(),e.j41(46,"div",28),e.EFF(47,"Accepted formats: PDF, DOC, DOCX (Max 10MB)"),e.k0s()(),e.j41(48,"div",19)(49,"label",29),e.EFF(50,"Description (Optional)"),e.k0s(),e.j41(51,"textarea",30),e.mxI("ngModelChange",function(n){e.eBV(t);const s=e.XpG();return e.DH7(s.uploadDescription,n)||(s.uploadDescription=n),e.Njj(n)}),e.k0s()(),e.j41(52,"button",31),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.uploadDocument())}),e.DNE(53,ee,1,0,"span",32)(54,te,1,0,"i",33),e.EFF(55),e.k0s()()(),e.j41(56,"div",14)(57,"div",15)(58,"h5",25),e.EFF(59,"Prepared Documents"),e.k0s(),e.DNE(60,ne,3,0,"div",34)(61,oe,9,3,"div",35),e.k0s()()()()}if(2&i){const t=e.XpG();e.R7$(6),e.JRh(t.project.name),e.R7$(),e.HbH(t.getStatusClass(t.project.status)),e.R7$(),e.JRh(t.getStatusLabel(t.project.status)),e.R7$(7),e.JRh(e.bMT(16,17,t.project.projectType)),e.R7$(7),e.JRh(t.project.taxYear||"Not specified"),e.R7$(6),e.JRh(t.formatDate(t.project.dueDate||"")),e.R7$(6),e.JRh(t.formatDate(t.project.createdAt)),e.R7$(),e.Y8G("ngIf",t.project.description),e.R7$(),e.Y8G("ngIf",t.intakeFormData),e.R7$(15),e.R50("ngModel",t.uploadDescription),e.R7$(),e.Y8G("disabled",!t.selectedFile||t.isUploading),e.R7$(),e.Y8G("ngIf",t.isUploading),e.R7$(),e.Y8G("ngIf",!t.isUploading),e.R7$(),e.SpI(" ",t.isUploading?"Uploading...":"Upload Document"," "),e.R7$(5),e.Y8G("ngIf",!t.project.preparedDocuments||0===t.project.preparedDocuments.length),e.R7$(),e.Y8G("ngForOf",t.project.preparedDocuments)}}function se(i,r){1&i&&(e.j41(0,"div",10)(1,"div",48),e.nrm(2,"i",51),e.EFF(3," Project not found or failed to load "),e.k0s()())}let b=(()=>{class i{constructor(t,o,n){this.route=t,this.router=o,this.apiService=n,this.destroy$=new f.B,this.project=null,this.intakeFormData=null,this.isLoading=!1,this.isUploading=!1,this.selectedFile=null,this.uploadDescription=""}ngOnInit(){this.route.params.subscribe(t=>{this.projectId=+t.projectId,this.projectId&&this.loadProjectDetail()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadProjectDetail(){this.isLoading=!0,this.apiService.getProjectDetail(this.projectId).pipe((0,m.Q)(this.destroy$)).subscribe({next:t=>{t.success&&(this.project=t.project||null,this.intakeFormData=this.project?.intakeFormData||null),this.isLoading=!1},error:t=>{console.error("Error loading project detail:",t),this.isLoading=!1,c().fire({title:"Error",text:"Failed to load project details.",icon:"error"})}})}onFileSelected(t){const o=t.target.files[0];if(o){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(o.type))return void c().fire({title:"Invalid File Type",text:"Please select a PDF, DOC, or DOCX file.",icon:"warning"});if(o.size>10485760)return void c().fire({title:"File Too Large",text:"Please select a file smaller than 10MB.",icon:"warning"});this.selectedFile=o}}uploadDocument(){this.selectedFile?(this.isUploading=!0,this.apiService.uploadProjectDocument(this.projectId,this.selectedFile,this.uploadDescription).pipe((0,m.Q)(this.destroy$)).subscribe({next:t=>{if(t.success){c().fire({title:"Success!",text:"Document uploaded successfully.",icon:"success",timer:2e3,showConfirmButton:!1}),this.selectedFile=null,this.uploadDescription="";const o=document.getElementById("documentFile");o&&(o.value=""),this.loadProjectDetail()}this.isUploading=!1},error:t=>{console.error("Error uploading document:",t),this.isUploading=!1,c().fire({title:"Upload Failed",text:"Failed to upload document. Please try again.",icon:"error"})}})):c().fire({title:"No File Selected",text:"Please select a file to upload.",icon:"warning"})}downloadDocument(t){this.apiService.downloadProjectDocument(t.id).pipe((0,m.Q)(this.destroy$)).subscribe({next:o=>{const n=window.URL.createObjectURL(o),s=window.document.createElement("a");s.href=n,s.download=t.originalName,s.click(),window.URL.revokeObjectURL(n)},error:o=>{console.error("Error downloading document:",o),c().fire({title:"Download Failed",text:"Failed to download document.",icon:"error"})}})}getStatusClass(t){return{active:"badge bg-success",in_progress:"badge bg-primary",completed:"badge bg-info",on_hold:"badge bg-warning",cancelled:"badge bg-danger"}[t]||"badge bg-secondary"}getStatusLabel(t){return{active:"Active",in_progress:"In Progress",completed:"Completed",on_hold:"On Hold",cancelled:"Cancelled"}[t]||t}formatFileSize(t){if(0===t)return"0 Bytes";const s=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]}formatDate(t){return t?new Date(t).toLocaleDateString():"Not set"}goBack(){this.router.navigate(this.project?["/tax-consultant/client-projects",this.project.clientId]:["/clients/list"])}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(u.nX),e.rXU(u.Ix),e.rXU(_.G))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-project-detail"]],standalone:!0,features:[e.aNF],decls:13,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box","d-flex","align-items-center","justify-content-between"],[1,"mb-0","font-size-18"],[1,"page-title-right"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"ri-arrow-left-line","me-1"],["class","text-center py-5",4,"ngIf"],["class","row",4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"col-xl-8","col-12"],[1,"card"],[1,"card-body"],[1,"d-flex","align-items-center","mb-4"],[1,"card-title","mb-0","me-3"],[1,"col-md-6"],[1,"mb-3"],[1,"form-label","text-muted"],[1,"mb-0"],["class","mb-3",4,"ngIf"],["class","card",4,"ngIf"],[1,"col-xl-4","col-12"],[1,"card-title"],["for","documentFile",1,"form-label"],["type","file","id","documentFile","accept",".pdf,.doc,.docx",1,"form-control",3,"change"],[1,"form-text"],["for","uploadDescription",1,"form-label"],["id","uploadDescription","rows","3","placeholder","Brief description of the document...",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","w-100",3,"click","disabled"],["class","spinner-border spinner-border-sm me-2","role","status",4,"ngIf"],["class","ri-upload-2-line me-1",4,"ngIf"],["class","text-center text-muted py-4",4,"ngIf"],["class","border rounded p-3 mb-3",4,"ngFor","ngForOf"],[1,"table-responsive"],[1,"table","table-borderless"],[4,"ngFor","ngForOf"],[1,"text-muted",2,"width","30%"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[1,"ri-upload-2-line","me-1"],[1,"text-center","text-muted","py-4"],[1,"ri-file-text-line","font-size-24","mb-2","d-block"],[1,"border","rounded","p-3","mb-3"],[1,"d-flex","align-items-center","justify-content-between"],[1,"flex-grow-1"],[1,"mb-1"],[1,"text-muted"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"ri-download-line"],[1,"ri-error-warning-line","font-size-24","mb-2","d-block"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),e.EFF(5,"Project Details"),e.k0s(),e.j41(6,"div",5)(7,"button",6),e.bIt("click",function(){return n.goBack()}),e.nrm(8,"i",7),e.EFF(9," Back "),e.k0s()()()()(),e.DNE(10,Q,4,0,"div",8)(11,ie,62,19,"div",9)(12,se,4,0,"div",8),e.k0s()),2&o&&(e.R7$(10),e.Y8G("ngIf",n.isLoading),e.R7$(),e.Y8G("ngIf",!n.isLoading&&n.project),e.R7$(),e.Y8G("ngIf",!n.isLoading&&!n.project))},dependencies:[d.MD,d.Sq,d.bT,d.PV,d.lG,l.YN,l.me,l.BC,l.vS],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013;border:1px solid rgba(0,0,0,.125)}.card-title[_ngcontent-%COMP%]{color:#495057;font-weight:600}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#6c757d}.badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.375rem .75rem}.bg-success[_ngcontent-%COMP%]{background-color:#28a745!important}.bg-primary[_ngcontent-%COMP%]{background-color:#007bff!important}.bg-info[_ngcontent-%COMP%]{background-color:#17a2b8!important}.bg-warning[_ngcontent-%COMP%]{background-color:#ffc107!important;color:#212529!important}.bg-danger[_ngcontent-%COMP%]{background-color:#dc3545!important}.bg-secondary[_ngcontent-%COMP%]{background-color:#6c757d!important}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}.document-item[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.document-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.file-upload-area[_ngcontent-%COMP%]{border:2px dashed #dee2e6;border-radius:.375rem;padding:2rem;text-align:center;transition:border-color .15s ease-in-out}.file-upload-area[_ngcontent-%COMP%]:hover{border-color:#007bff}.file-upload-area.dragover[_ngcontent-%COMP%]{border-color:#007bff;background-color:#f8f9fa}.table-borderless[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;padding:.5rem 0}.text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media (max-width: 768px){.card[_ngcontent-%COMP%]{margin-bottom:1rem}.btn-sm[_ngcontent-%COMP%]{font-size:.75rem;padding:.25rem .5rem}}"]})}}return i})();function re(i,r){if(1&i&&(e.j41(0,"option",45),e.EFF(1),e.k0s()),2&i){const t=r.$implicit;e.Y8G("value",t.value),e.R7$(),e.SpI(" ",t.label," ")}}function ae(i,r){if(1&i&&(e.j41(0,"option",45),e.EFF(1),e.k0s()),2&i){const t=r.$implicit;e.Y8G("value",t.value),e.R7$(),e.SpI(" ",t.label," ")}}function le(i,r){if(1&i&&(e.j41(0,"p",58),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.description," ")}}function ce(i,r){1&i&&e.nrm(0,"i",59)}function de(i,r){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"div",49)(3,"div")(4,"h6",50),e.EFF(5),e.k0s(),e.DNE(6,le,2,1,"p",51),e.k0s()()(),e.j41(7,"td")(8,"button",52),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.viewClient(n))}),e.EFF(9),e.k0s()(),e.j41(10,"td")(11,"span",53),e.EFF(12),e.k0s()(),e.j41(13,"td")(14,"span"),e.EFF(15),e.k0s()(),e.j41(16,"td"),e.EFF(17),e.k0s(),e.j41(18,"td")(19,"span"),e.EFF(20),e.DNE(21,ce,1,0,"i",54),e.k0s()(),e.j41(22,"td"),e.EFF(23),e.k0s(),e.j41(24,"td")(25,"div",55)(26,"button",56),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.viewProject(n))}),e.nrm(27,"i",57),e.k0s()()()()}if(2&i){const t=r.$implicit,o=e.XpG(2);e.R7$(5),e.JRh(t.name),e.R7$(),e.Y8G("ngIf",t.description),e.R7$(3),e.SpI(" ",t.clientName||"#"+t.clientId," "),e.R7$(3),e.JRh(o.getTypeLabel(t.projectType)),e.R7$(2),e.HbH(o.getStatusClass(t.status)),e.R7$(),e.JRh(o.getStatusLabel(t.status)),e.R7$(2),e.JRh(t.taxYear||"N/A"),e.R7$(2),e.HbH(o.isOverdue(t.dueDate||"")?"text-danger fw-bold":""),e.R7$(),e.SpI(" ",o.formatDate(t.dueDate||"")," "),e.R7$(),e.Y8G("ngIf",o.isOverdue(t.dueDate||"")),e.R7$(2),e.JRh(o.formatDate(t.createdAt))}}function pe(i,r){if(1&i&&(e.j41(0,"table",46)(1,"thead",47)(2,"tr")(3,"th"),e.EFF(4,"Project Name"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Client"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Type"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Status"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Tax Year"),e.k0s(),e.j41(13,"th"),e.EFF(14,"Due Date"),e.k0s(),e.j41(15,"th"),e.EFF(16,"Created"),e.k0s(),e.j41(17,"th"),e.EFF(18,"Actions"),e.k0s()()(),e.j41(19,"tbody"),e.DNE(20,de,28,13,"tr",48),e.k0s()()),2&i){const t=e.XpG();e.R7$(20),e.Y8G("ngForOf",t.filteredProjects)}}function me(i,r){1&i&&(e.j41(0,"div",60)(1,"div",61)(2,"span",62),e.EFF(3,"Loading..."),e.k0s()(),e.j41(4,"p",63),e.EFF(5,"Loading projects..."),e.k0s()())}function ue(i,r){1&i&&(e.j41(0,"p",67),e.EFF(1," Try adjusting your filters to see more results. "),e.k0s())}function ge(i,r){1&i&&(e.j41(0,"p",67),e.EFF(1," No projects have been created yet. "),e.k0s())}function fe(i,r){if(1&i&&(e.j41(0,"div",60)(1,"div",64),e.nrm(2,"i",65),e.k0s(),e.j41(3,"h5"),e.EFF(4,"No Projects Found"),e.k0s(),e.DNE(5,ue,2,0,"p",66)(6,ge,2,0,"p",66),e.k0s()),2&i){const t=e.XpG();e.R7$(5),e.Y8G("ngIf",t.searchTerm||t.selectedStatus||t.selectedProjectType),e.R7$(),e.Y8G("ngIf",!t.searchTerm&&!t.selectedStatus&&!t.selectedProjectType)}}let j=(()=>{class i{constructor(t,o){this.router=t,this.apiService=o,this.destroy$=new f.B,this.projects=[],this.filteredProjects=[],this.isLoading=!1,this.searchTerm="",this.selectedStatus="",this.selectedProjectType="",this.projectTypes=[{value:"tax_return",label:"Tax Return"},{value:"quarterly_filing",label:"Quarterly Filing"},{value:"business_setup",label:"Business Setup"},{value:"audit",label:"Audit"},{value:"consultation",label:"Consultation"},{value:"other",label:"Other"}],this.projectStatuses=[{value:"active",label:"Active",class:"badge bg-success"},{value:"in_progress",label:"In Progress",class:"badge bg-primary"},{value:"completed",label:"Completed",class:"badge bg-info"},{value:"on_hold",label:"On Hold",class:"badge bg-warning"},{value:"cancelled",label:"Cancelled",class:"badge bg-danger"}]}ngOnInit(){this.loadAllProjects()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadAllProjects(){this.isLoading=!0,this.apiService.getAccountantProjects().pipe((0,m.Q)(this.destroy$)).subscribe({next:t=>{t.success&&t.projects&&(this.projects=t.projects,this.filteredProjects=[...this.projects]),this.isLoading=!1},error:t=>{console.error("Error loading projects:",t),this.isLoading=!1,c().fire({title:"Error",text:"Failed to load projects.",icon:"error"})}})}applyFilters(){this.filteredProjects=this.projects.filter(t=>(!this.searchTerm||t.name.toLowerCase().includes(this.searchTerm.toLowerCase())||t.description?.toLowerCase().includes(this.searchTerm.toLowerCase()))&&(!this.selectedStatus||t.status===this.selectedStatus)&&(!this.selectedProjectType||t.projectType===this.selectedProjectType))}onSearchChange(){this.applyFilters()}onStatusChange(){this.applyFilters()}onTypeChange(){this.applyFilters()}clearFilters(){this.searchTerm="",this.selectedStatus="",this.selectedProjectType="",this.filteredProjects=[...this.projects]}viewProject(t){this.router.navigate(["/tax-consultant/project-detail",t.id])}viewClient(t){this.router.navigate(["/clients/detail",t.clientId])}getTypeLabel(t){const o=this.projectTypes.find(n=>n.value===t);return o?o.label:t}getStatusClass(t){const o=this.projectStatuses.find(n=>n.value===t);return o?o.class:"badge bg-secondary"}getStatusLabel(t){const o=this.projectStatuses.find(n=>n.value===t);return o?o.label:t}formatDate(t){return t?new Date(t).toLocaleDateString():"Not set"}isOverdue(t){if(!t)return!1;const o=new Date(t),n=new Date;return n.setHours(0,0,0,0),o<n}getProjectCount(){return this.filteredProjects.length}getActiveProjectsCount(){return this.filteredProjects.filter(t=>"active"===t.status||"in_progress"===t.status).length}getOverdueProjectsCount(){return this.filteredProjects.filter(t=>this.isOverdue(t.dueDate||"")).length}getCompletedProjectsCount(){return this.filteredProjects.filter(t=>"completed"===t.status).length}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(u.Ix),e.rXU(_.G))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-all-projects"]],standalone:!0,features:[e.aNF],decls:97,vars:12,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box","d-sm-flex","align-items-center","justify-content-between"],[1,"mb-sm-0","font-size-18"],[1,"page-title-right"],[1,"breadcrumb","m-0"],[1,"breadcrumb-item"],["href","javascript: void(0);"],[1,"breadcrumb-item","active"],[1,"col-xl-3","col-md-6"],[1,"card"],[1,"card-body"],[1,"d-flex"],[1,"flex-grow-1"],[1,"text-truncate","font-size-14","mb-2"],[1,"mb-2"],[1,"avatar-sm"],[1,"avatar-title","bg-light","text-primary","rounded-3"],[1,"bx","bx-folder","font-size-16"],[1,"avatar-title","bg-light","text-success","rounded-3"],[1,"bx","bx-play","font-size-16"],[1,"mb-2","text-danger"],[1,"avatar-title","bg-light","text-danger","rounded-3"],[1,"bx","bx-time","font-size-16"],[1,"avatar-title","bg-light","text-info","rounded-3"],[1,"bx","bx-check-circle","font-size-16"],[1,"row","g-3"],[1,"col-md-4"],["for","searchInput",1,"form-label"],["type","text","id","searchInput","placeholder","Search by name or description...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"col-md-2"],["for","statusFilter",1,"form-label"],["id","statusFilter",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-3"],["for","typeFilter",1,"form-label"],["id","typeFilter",1,"form-select",3,"ngModelChange","change","ngModel"],[1,"col-md-3","d-flex","align-items-end"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"bx","bx-refresh","me-1"],[1,"table-responsive"],["class","table table-nowrap table-hover mb-0",4,"ngIf"],["class","text-center py-5",4,"ngIf"],[3,"value"],[1,"table","table-nowrap","table-hover","mb-0"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],[1,"mb-1","font-size-14"],["class","text-muted mb-0 font-size-12",4,"ngIf"],["type","button","title","View Client Details",1,"btn","btn-link","p-0","text-primary",3,"click"],[1,"badge","bg-light","text-dark"],["class","bx bx-time text-danger ms-1",4,"ngIf"],[1,"d-flex","gap-2"],["type","button","title","View Project Details",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bx","bx-show"],[1,"text-muted","mb-0","font-size-12"],[1,"bx","bx-time","text-danger","ms-1"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2","text-muted"],[1,"mb-4"],[1,"bx","bx-folder-open","display-4","text-muted"],["class","text-muted",4,"ngIf"],[1,"text-muted"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),e.EFF(5,"All Projects"),e.k0s(),e.j41(6,"div",5)(7,"ol",6)(8,"li",7)(9,"a",8),e.EFF(10,"Tax Consultant"),e.k0s()(),e.j41(11,"li",9),e.EFF(12,"All Projects"),e.k0s()()()()()(),e.j41(13,"div",1)(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"p",15),e.EFF(20,"Total Projects"),e.k0s(),e.j41(21,"h4",16),e.EFF(22),e.k0s()(),e.j41(23,"div",17)(24,"span",18),e.nrm(25,"i",19),e.k0s()()()()()(),e.j41(26,"div",10)(27,"div",11)(28,"div",12)(29,"div",13)(30,"div",14)(31,"p",15),e.EFF(32,"Active Projects"),e.k0s(),e.j41(33,"h4",16),e.EFF(34),e.k0s()(),e.j41(35,"div",17)(36,"span",20),e.nrm(37,"i",21),e.k0s()()()()()(),e.j41(38,"div",10)(39,"div",11)(40,"div",12)(41,"div",13)(42,"div",14)(43,"p",15),e.EFF(44,"Overdue Projects"),e.k0s(),e.j41(45,"h4",22),e.EFF(46),e.k0s()(),e.j41(47,"div",17)(48,"span",23),e.nrm(49,"i",24),e.k0s()()()()()(),e.j41(50,"div",10)(51,"div",11)(52,"div",12)(53,"div",13)(54,"div",14)(55,"p",15),e.EFF(56,"Completed Projects"),e.k0s(),e.j41(57,"h4",16),e.EFF(58),e.k0s()(),e.j41(59,"div",17)(60,"span",25),e.nrm(61,"i",26),e.k0s()()()()()()(),e.j41(62,"div",1)(63,"div",2)(64,"div",11)(65,"div",12)(66,"div",27)(67,"div",28)(68,"label",29),e.EFF(69,"Search Projects"),e.k0s(),e.j41(70,"input",30),e.mxI("ngModelChange",function(a){return e.DH7(n.searchTerm,a)||(n.searchTerm=a),a}),e.bIt("input",function(){return n.onSearchChange()}),e.k0s()(),e.j41(71,"div",31)(72,"label",32),e.EFF(73,"Status"),e.k0s(),e.j41(74,"select",33),e.mxI("ngModelChange",function(a){return e.DH7(n.selectedStatus,a)||(n.selectedStatus=a),a}),e.bIt("change",function(){return n.onStatusChange()}),e.j41(75,"option",34),e.EFF(76,"All Statuses"),e.k0s(),e.DNE(77,re,2,2,"option",35),e.k0s()(),e.j41(78,"div",36)(79,"label",37),e.EFF(80,"Project Type"),e.k0s(),e.j41(81,"select",38),e.mxI("ngModelChange",function(a){return e.DH7(n.selectedProjectType,a)||(n.selectedProjectType=a),a}),e.bIt("change",function(){return n.onTypeChange()}),e.j41(82,"option",34),e.EFF(83,"All Types"),e.k0s(),e.DNE(84,ae,2,2,"option",35),e.k0s()(),e.j41(85,"div",39)(86,"button",40),e.bIt("click",function(){return n.clearFilters()}),e.nrm(87,"i",41),e.EFF(88," Clear Filters "),e.k0s()()()()()()(),e.j41(89,"div",1)(90,"div",2)(91,"div",11)(92,"div",12)(93,"div",42),e.DNE(94,pe,21,1,"table",43)(95,me,6,0,"div",44)(96,fe,7,2,"div",44),e.k0s()()()()()()),2&o&&(e.R7$(22),e.JRh(n.getProjectCount()),e.R7$(12),e.JRh(n.getActiveProjectsCount()),e.R7$(12),e.JRh(n.getOverdueProjectsCount()),e.R7$(12),e.JRh(n.getCompletedProjectsCount()),e.R7$(12),e.R50("ngModel",n.searchTerm),e.R7$(4),e.R50("ngModel",n.selectedStatus),e.R7$(3),e.Y8G("ngForOf",n.projectStatuses),e.R7$(4),e.R50("ngModel",n.selectedProjectType),e.R7$(3),e.Y8G("ngForOf",n.projectTypes),e.R7$(10),e.Y8G("ngIf",!n.isLoading),e.R7$(),e.Y8G("ngIf",n.isLoading),e.R7$(),e.Y8G("ngIf",!n.isLoading&&0===n.filteredProjects.length))},dependencies:[d.MD,d.Sq,d.bT,l.YN,l.xH,l.y7,l.me,l.wz,l.BC,l.vS],styles:['.card[_ngcontent-%COMP%]{box-shadow:0 .75rem 1.5rem #12263f08;border:1px solid #eff2f7;border-radius:.375rem}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;font-size:.8125rem;color:#495057;border-bottom:2px solid #eff2f7}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.8125rem;vertical-align:middle;border-bottom:1px solid #eff2f7}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.btn-link[_ngcontent-%COMP%]{text-decoration:none;font-weight:500}.btn-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.badge[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500}.avatar-title[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;display:flex;align-items:center;justify-content:center}.text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.font-size-12[_ngcontent-%COMP%]{font-size:.75rem!important}.font-size-14[_ngcontent-%COMP%]{font-size:.875rem!important}.font-size-16[_ngcontent-%COMP%]{font-size:1rem!important}.font-size-18[_ngcontent-%COMP%]{font-size:1.125rem!important}.display-4[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:300;line-height:1.2}.spinner-border[_ngcontent-%COMP%]{width:2rem;height:2rem}.page-title-box[_ngcontent-%COMP%]{padding-bottom:1.5rem}.breadcrumb[_ngcontent-%COMP%]{background-color:transparent;padding:0;margin:0}.breadcrumb-item[_ngcontent-%COMP%] + .breadcrumb-item[_ngcontent-%COMP%]:before{content:">";color:#74788d}.breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#556ee6;text-decoration:none}.breadcrumb-item.active[_ngcontent-%COMP%]{color:#495057}@media (max-width: 768px){.table-responsive[_ngcontent-%COMP%]{font-size:.75rem}.d-flex.gap-2[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem!important}.btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.75rem}}']})}}return i})();var g=p(400);const _e=[{path:"projects",component:j,canActivate:[g.K],data:{role:"ACCOUNTANT"}},{path:"intake-forms",component:w,canActivate:[g.K],data:{role:"ACCOUNTANT"}},{path:"client-documents",component:O,canActivate:[g.K],data:{role:"ACCOUNTANT"}},{path:"client-projects/:clientId",component:Z,canActivate:[g.K],data:{role:"ACCOUNTANT"}},{path:"project-detail/:projectId",component:b,canActivate:[g.K],data:{role:"ACCOUNTANT"}}];let he=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[u.iI.forChild(_e),u.iI]})}}return i})();var be=p(6551),je=p(1745),Fe=p(8580),ve=p(779),Ce=p(3816);let ke=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[d.MD,l.YN,l.X1,he,be.T,je.V,b,j,Fe.zE,ve.Q_,Ce.jr]})}}return i})()}}]);
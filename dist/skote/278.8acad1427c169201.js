"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[278],{2278:(me,p,m)=>{m.r(p),m.d(p,{ClientsModule:()=>de});var c=m(177),C=m(803),a=m(9417),N=m(6551),f=m(779),k=m(8032),u=m.n(k),e=m(4438),j=m(6344);const y=["newClientModal"],T=["editClientModal"],S=["inviteClientModal"],R=(l,s)=>s.id;function M(l,s){if(1&l&&(e.j41(0,"div",91),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&l){const t=e.XpG().$implicit;e.R7$(),e.JRh(e.i5U(2,1,t.lastInvitedAt,"short"))}}function $(l,s){if(1&l){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td")(10,"span",88),e.EFF(11),e.k0s()(),e.j41(12,"td")(13,"span",88),e.EFF(14),e.k0s()(),e.j41(15,"td")(16,"span",88),e.EFF(17),e.k0s(),e.DNE(18,M,3,4,"div",91),e.k0s(),e.j41(19,"td"),e.EFF(20),e.nI1(21,"date"),e.k0s(),e.j41(22,"td")(23,"div",98)(24,"button",99),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.openInviteModal(i))}),e.nrm(25,"i",100),e.k0s(),e.j41(26,"button",101),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.openEditModal(i))}),e.nrm(27,"i",102),e.k0s(),e.j41(28,"button",103),e.nrm(29,"i",104),e.k0s()()()()}if(2&l){const t=s.$implicit,n=e.XpG();e.R7$(2),e.JRh(t.firstName),e.R7$(2),e.JRh(t.lastName),e.R7$(2),e.JRh(t.email||"N/A"),e.R7$(2),e.JRh(n.formatPhoneForDisplay(t.phone)),e.R7$(2),e.Y8G("ngClass","INDIVIDUAL"===t.entityType?"bg-primary":"bg-info"),e.R7$(),e.SpI(" ",t.entityType||"N/A"," "),e.R7$(2),e.Y8G("ngClass","lead"===t.status?"bg-info":"invited"===t.status?"bg-warning":"active"===t.status?"bg-success":"inactive"===t.status?"bg-secondary":"suspended"===t.status?"bg-danger":"bg-secondary"),e.R7$(),e.SpI(" ",t.status||"N/A"," "),e.R7$(2),e.Y8G("ngClass",n.getInvitationStatusClass(t.invitationStatus)),e.R7$(),e.SpI(" ",n.getInvitationStatusText(t.invitationStatus)," "),e.R7$(),e.vxM(t.lastInvitedAt?18:-1),e.R7$(2),e.JRh(e.i5U(21,13,t.createdAt,"short")),e.R7$(4),e.Y8G("disabled","accepted"===t.invitationStatus)}}function I(l,s){1&l&&(e.j41(0,"tr")(1,"td",105)(2,"div",95),e.nrm(3,"i",106),e.EFF(4,' No clients found. Click "New Client" to add your first client. '),e.k0s()()())}function x(l,s){1&l&&e.EFF(0," First name is required. ")}function L(l,s){if(1&l&&(e.j41(0,"div",34),e.DNE(1,x,1,0),e.k0s()),2&l){let t;const n=e.XpG();e.R7$(),e.vxM(null!=(t=n.createClientForm.get("firstName"))&&null!=t.errors&&t.errors.required?1:-1)}}function D(l,s){1&l&&e.EFF(0," Last name is required. ")}function B(l,s){if(1&l&&(e.j41(0,"div",34),e.DNE(1,D,1,0),e.k0s()),2&l){let t;const n=e.XpG();e.R7$(),e.vxM(null!=(t=n.createClientForm.get("lastName"))&&null!=t.errors&&t.errors.required?1:-1)}}function G(l,s){1&l&&e.EFF(0," Email is required. ")}function X(l,s){1&l&&e.EFF(0," Please enter a valid email address. ")}function w(l,s){if(1&l&&(e.j41(0,"div",34),e.DNE(1,G,1,0)(2,X,1,0),e.k0s()),2&l){let t,n;const i=e.XpG();e.R7$(),e.vxM(null!=(t=i.createClientForm.get("email"))&&null!=t.errors&&t.errors.required?1:-1),e.R7$(),e.vxM(null!=(n=i.createClientForm.get("email"))&&null!=n.errors&&n.errors.email?2:-1)}}function A(l,s){1&l&&e.EFF(0," Entity type is required. ")}function V(l,s){if(1&l&&(e.j41(0,"div",34),e.DNE(1,A,1,0),e.k0s()),2&l){let t;const n=e.XpG();e.R7$(),e.vxM(null!=(t=n.createClientForm.get("entityType"))&&null!=t.errors&&t.errors.required?1:-1)}}function P(l,s){1&l&&e.EFF(0," Status is required. ")}function Y(l,s){if(1&l&&(e.j41(0,"div",34),e.DNE(1,P,1,0),e.k0s()),2&l){let t;const n=e.XpG();e.R7$(),e.vxM(null!=(t=n.createClientForm.get("status"))&&null!=t.errors&&t.errors.required?1:-1)}}function q(l,s){1&l&&(e.nrm(0,"span",107),e.EFF(1," Creating... "))}function U(l,s){1&l&&e.EFF(0," Add Client ")}function O(l,s){1&l&&e.EFF(0," First name is required. ")}function K(l,s){if(1&l&&(e.j41(0,"div",34),e.DNE(1,O,1,0),e.k0s()),2&l){const t=e.XpG();e.R7$(),e.vxM(null!=t.ef.firstName.errors&&t.ef.firstName.errors.required?1:-1)}}function J(l,s){1&l&&e.EFF(0," Last name is required. ")}function z(l,s){if(1&l&&(e.j41(0,"div",34),e.DNE(1,J,1,0),e.k0s()),2&l){const t=e.XpG();e.R7$(),e.vxM(null!=t.ef.lastName.errors&&t.ef.lastName.errors.required?1:-1)}}function H(l,s){1&l&&e.EFF(0," Please enter a valid email address. ")}function Q(l,s){if(1&l&&(e.j41(0,"div",34),e.DNE(1,H,1,0),e.k0s()),2&l){const t=e.XpG();e.R7$(),e.vxM(null!=t.ef.email.errors&&t.ef.email.errors.email?1:-1)}}function Z(l,s){1&l&&(e.nrm(0,"span",107),e.EFF(1," Updating... "))}function W(l,s){1&l&&e.EFF(0," Update Client ")}function ee(l,s){if(1&l&&(e.j41(0,"div",91),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&l){const t=e.XpG();e.R7$(),e.SpI("Last sent: ",e.i5U(2,1,null==t.selectedClient?null:t.selectedClient.lastInvitedAt,"medium"),"")}}function te(l,s){1&l&&(e.nrm(0,"span",107),e.EFF(1," Resending... "))}function ie(l,s){1&l&&(e.nrm(0,"i",108),e.EFF(1,"Resend Invitation "))}function ne(l,s){if(1&l&&(e.j41(0,"button",96),e.DNE(1,te,2,0)(2,ie,2,0),e.k0s()),2&l){const t=e.XpG();e.Y8G("disabled",t.inviteLoading),e.R7$(),e.vxM(t.inviteLoading?1:2)}}function le(l,s){1&l&&(e.nrm(0,"span",107),e.EFF(1," Sending... "))}function se(l,s){1&l&&(e.nrm(0,"i",109),e.EFF(1,"Send Invitation "))}function oe(l,s){if(1&l&&(e.j41(0,"button",97),e.DNE(1,le,2,0)(2,se,2,0),e.k0s()),2&l){const t=e.XpG();e.Y8G("disabled",t.inviteLoading),e.R7$(),e.vxM(t.inviteLoading?1:2)}}const ae=[{path:"list",component:(()=>{class l{constructor(t,n){this.apiService=t,this.formBuilder=n,this.clients=[],this.filteredClients=[],this.searchTerm="",this.submitted=!1,this.loading=!1,this.error="",this.editSubmitted=!1,this.editLoading=!1,this.selectedClient=null,this.inviteSubmitted=!1,this.inviteLoading=!1}searchClients(){if(this.searchTerm.trim()){const t=this.searchTerm.toLowerCase();this.filteredClients=this.clients.filter(n=>n.firstName?.toLowerCase().includes(t)||n.lastName?.toLowerCase().includes(t)||n.email?.toLowerCase().includes(t))}else this.filteredClients=[...this.clients]}ngOnInit(){this.breadCrumbItems=[{label:"Clients"},{label:"Clients List",active:!0}],this.createClientForm=this.formBuilder.group({firstName:["",[a.k0.required]],lastName:["",[a.k0.required]],email:["",[a.k0.required,a.k0.email]],phoneNumber:[""],entityType:["",[a.k0.required]],status:["invited",[a.k0.required]]}),this.editClientForm=this.formBuilder.group({firstName:["",[a.k0.required]],lastName:["",[a.k0.required]],email:["",[a.k0.email]],phoneNumber:[""],entityType:[""],status:[""]}),this.inviteClientForm=this.formBuilder.group({emailTemplate:[this.getDefaultEmailTemplate()]}),this.loadClients()}saveClient(){if(this.submitted=!0,this.createClientForm.valid){this.loading=!0,this.error="",this.apiService.debugTokenStatus();const t={email:this.createClientForm.value.email,firstName:this.createClientForm.value.firstName,lastName:this.createClientForm.value.lastName};this.createClientForm.value.phoneNumber&&this.createClientForm.value.phoneNumber.trim()&&(t.phone=this.cleanPhoneNumber(this.createClientForm.value.phoneNumber)),this.createClientForm.value.entityType&&(t.entityType=this.createClientForm.value.entityType),this.createClientForm.value.status&&(t.status=this.createClientForm.value.status),this.apiService.createClient(t).subscribe({next:n=>{this.loading=!1,n.success?(u().fire({title:"Success!",text:"Client has been created successfully.",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"OK"}),this.createClientForm.reset(),this.createClientForm.patchValue({entityType:"INDIVIDUAL",status:"invited"}),this.submitted=!1,this.loadClients(),this.newClientModal?.hide()):(this.error=n.message||"Failed to create client",u().fire({title:"Error!",text:this.error,icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"}))},error:n=>{this.loading=!1,console.error("Error creating client:",n);let i="Failed to create client. Please try again.";401===n.status||403===n.status?i="Authentication failed. Please log in again.":n.error?.message?i=n.error.message:n.message&&(i=n.message),this.error=i,u().fire({title:"Error!",text:i,icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"})}})}else console.log("Form is invalid"),Object.keys(this.createClientForm.controls).forEach(t=>{this.createClientForm.get(t)?.markAsTouched()})}loadClients(){this.apiService.getClients().subscribe({next:t=>{console.log("Clients response:",t),t.success&&t.clients?(this.clients=t.clients,this.filteredClients=[...this.clients]):(console.warn("No clients found in response"),this.clients=[],this.filteredClients=[])},error:t=>{console.error("Error loading clients:",t),this.clients=[],this.filteredClients=[]}})}get f(){return this.createClientForm.controls}get ef(){return this.editClientForm.controls}formatPhoneNumber(t){let n=t.target.value.replace(/\D/g,"");n.length>=6?n=`(${n.slice(0,3)}) ${n.slice(3,6)}-${n.slice(6,10)}`:n.length>=3?n=`(${n.slice(0,3)}) ${n.slice(3)}`:n.length>0&&(n=`(${n}`),n.length>14&&(n=n.slice(0,14)),t.target.value=n,"client-phone-input"===t.target.id?this.createClientForm.patchValue({phoneNumber:n}):"editPhoneNumber"===t.target.id&&this.editClientForm.patchValue({phoneNumber:n})}cleanPhoneNumber(t){return t?t.replace(/\D/g,""):""}formatPhoneForDisplay(t){if(!t)return"N/A";const n=t.replace(/\D/g,"");return 10===n.length?`(${n.slice(0,3)}) ${n.slice(3,6)}-${n.slice(6)}`:t||"N/A"}openEditModal(t){this.selectedClient=t,this.editClientForm.patchValue({firstName:t.firstName||"",lastName:t.lastName||"",email:t.email||"",phoneNumber:t.phone||"",entityType:t.entityType||"",status:t.status||""}),this.editSubmitted=!1,this.editClientModal?.show()}updateClient(){if(this.editSubmitted=!0,this.editClientForm.invalid)return;this.editLoading=!0;const t={firstName:this.ef.firstName.value,lastName:this.ef.lastName.value,email:this.ef.email.value||void 0,phone:this.ef.phoneNumber.value?this.cleanPhoneNumber(this.ef.phoneNumber.value):void 0,entityType:this.ef.entityType.value||void 0,status:this.ef.status.value||void 0};this.apiService.updateClient(this.selectedClient.id,t).subscribe({next:n=>{console.log("Client updated:",n),n.success?(u().fire({title:"Success!",text:"Client has been updated successfully.",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"OK"}),this.editClientModal?.hide(),this.loadClients(),this.editClientForm.reset(),this.selectedClient=null):u().fire({title:"Error!",text:n.message||"Failed to update client.",icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"}),this.editLoading=!1},error:n=>{console.error("Error updating client:",n),this.editLoading=!1;let i="Failed to update client. Please try again.";n.error?.message?i=n.error.message:n.message&&(i=n.message),u().fire({title:"Error!",text:i,icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"})}})}getDefaultEmailTemplate(){return"Dear {clientName},\n\nYou have been invited to access your client portal for Firm Pilot.\n\nAs a valued client, you now have secure access to:\n\u2022 View your account information\n\u2022 Upload and manage documents\n\u2022 Track the progress of your services\n\u2022 Communicate directly with our team\n\nTo get started, please click the link below to set up your account:\n{invitationLink}\n\nThis invitation will expire on {expiryDate}. If you have any questions, please don't hesitate to contact us.\n\nBest regards,\n{firmName}"}openInviteModal(t){this.selectedClient=t,this.inviteClientForm.patchValue({emailTemplate:this.getDefaultEmailTemplate()}),this.inviteSubmitted=!1,this.inviteClientModal?.show()}sendInvitation(){this.inviteSubmitted=!0,!this.inviteClientForm.invalid&&this.selectedClient?.id&&(this.inviteLoading=!0,this.apiService.inviteClient(this.selectedClient.id,{message:this.inviteClientForm.value.emailTemplate||void 0}).subscribe({next:n=>{console.log("Invitation sent:",n),n.success?(u().fire({title:"Success!",text:"Invitation has been sent successfully.",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"OK"}),this.inviteClientModal?.hide(),this.loadClients(),this.inviteClientForm.reset(),this.selectedClient=null):u().fire({title:"Error!",text:n.message||"Failed to send invitation.",icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"}),this.inviteLoading=!1},error:n=>{console.error("Error sending invitation:",n),this.inviteLoading=!1;let i="Failed to send invitation. Please try again.";401===n.status||403===n.status?i="Authentication failed. Please log in again.":n.error?.message?i=n.error.message:n.message&&(i=n.message),u().fire({title:"Error!",text:i,icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"})}}))}getInvitationStatusClass(t){switch(t){case"pending":return"bg-warning";case"sent":return"bg-info";case"accepted":return"bg-success";case"expired":return"bg-danger";default:return"bg-secondary"}}getInvitationStatusText(t){switch(t){case"pending":return"Pending";case"sent":return"Sent";case"accepted":return"Accepted";case"expired":return"Expired";default:return"Not Invited"}}get if(){return this.inviteClientForm.controls}static{this.\u0275fac=function(n){return new(n||l)(e.rXU(j.G),e.rXU(a.ze))}}static{this.\u0275cmp=e.VBU({type:l,selectors:[["app-clientlist"]],viewQuery:function(n,i){if(1&n&&(e.GBs(y,5),e.GBs(T,5),e.GBs(S,5)),2&n){let o;e.mGM(o=e.lsd())&&(i.newClientModal=o.first),e.mGM(o=e.lsd())&&(i.editClientModal=o.first),e.mGM(o=e.lsd())&&(i.inviteClientModal=o.first)}},standalone:!0,features:[e.aNF],decls:267,vars:55,consts:[["newClientModal","bs-modal"],["editClientModal","bs-modal"],["inviteClientModal","bs-modal"],[1,"container-fluid"],["title","Clients List",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"row","mb-2"],[1,"col-sm-4"],[1,"search-box","me-2","mb-2","d-inline-block"],[1,"position-relative"],["type","text","id","searchTableList","placeholder","Search clients...",1,"form-control",3,"ngModelChange","ngModel"],[1,"bx","bx-search-alt","search-icon"],[1,"col-sm-8"],[1,"text-sm-end"],["type","button","data-bs-toggle","modal",1,"btn","btn-success","btn-rounded","waves-effect","waves-light","addClient-modal","mb-2",3,"click"],[1,"mdi","mdi-plus","me-1"],[1,"table-responsive"],[1,"table","table-nowrap","align-middle"],[1,"table-light"],["bsModal","","id","newClientModal","tabindex","-1","aria-labelledby","newClientModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","newClientModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],["autocomplete","off","id","createClient-form","novalidate","",1,"needs-validation","createClient-form",3,"ngSubmit","formGroup"],[1,"col-lg-6"],[1,"mb-3"],["for","client-firstName-input",1,"form-label"],["type","text","id","client-firstName-input","placeholder","Enter first name","formControlName","firstName","required","",1,"form-control"],[1,"invalid-feedback"],["for","client-lastName-input",1,"form-label"],["type","text","id","client-lastName-input","placeholder","Enter last name","formControlName","lastName","required","",1,"form-control"],["for","client-email-input",1,"form-label"],[1,"text-danger"],["type","email","id","client-email-input","placeholder","Enter email address","formControlName","email","required","",1,"form-control"],["for","client-phone-input",1,"form-label"],["type","tel","id","client-phone-input","placeholder","(XXX) XXX-XXXX","formControlName","phoneNumber","maxlength","14",1,"form-control",3,"input"],["for","client-entityType-input",1,"form-label"],["id","client-entityType-input","formControlName","entityType","required","",1,"form-select"],["value",""],["value","INDIVIDUAL"],["value","BUSINESS"],["value","CORPORATION"],["value","PARTNERSHIP"],["value","LLC"],["for","client-status-input",1,"form-label"],["id","client-status-input","formControlName","status","required","",1,"form-select"],["value","lead"],["value","invited"],["value","active"],["value","inactive"],["value","suspended"],[1,"text-end"],["type","button",1,"btn","btn-outline-secondary","me-2",3,"click","disabled"],["type","submit","id","addClient-btn",1,"btn","btn-success",3,"disabled"],["bsModal","","id","editClientModal","tabindex","-1","aria-labelledby","editClientModalLabel","aria-hidden","true",1,"modal","fade"],["id","editClientModalLabel",1,"modal-title"],[3,"ngSubmit","formGroup"],["for","editFirstName",1,"form-label"],["type","text","id","editFirstName","formControlName","firstName",1,"form-control"],["for","editLastName",1,"form-label"],["type","text","id","editLastName","formControlName","lastName",1,"form-control"],["for","editEmail",1,"form-label"],["type","email","id","editEmail","formControlName","email",1,"form-control"],["for","editPhoneNumber",1,"form-label"],["type","tel","id","editPhoneNumber","formControlName","phoneNumber","placeholder","(XXX) XXX-XXXX","maxlength","14",1,"form-control",3,"input"],["for","editEntityType",1,"form-label"],["id","editEntityType","formControlName","entityType",1,"form-select"],["for","editStatus",1,"form-label"],["id","editStatus","formControlName","status",1,"form-select"],["type","submit","id","updateClient-btn",1,"btn","btn-primary",3,"disabled"],["bsModal","","id","inviteClientModal","tabindex","-1","aria-labelledby","inviteClientModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],["id","inviteClientModalLabel",1,"modal-title"],[1,"bx","bx-mail-send","me-2"],["autocomplete","off","id","inviteClient-form","novalidate","",1,"needs-validation","inviteClient-form",3,"ngSubmit","formGroup"],[1,"row","mb-4"],[1,"col-12"],[1,"card","bg-light"],[1,"card-body","p-3"],[1,"card-title","mb-2"],[1,"col-md-6"],[1,"mb-1"],[1,"badge",3,"ngClass"],[1,"form-label"],[1,"mt-2"],[1,"text-muted","small","mt-1"],["for","invite-template-input",1,"form-label"],["id","invite-template-input","rows","8","formControlName","emailTemplate","placeholder","Customize the invitation email...",1,"form-control"],[1,"form-text"],[1,"text-muted"],["type","submit",1,"btn","btn-warning",3,"disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"d-flex","gap-2"],["type","button","title","Invite Client",1,"btn","btn-sm","btn-outline-primary",3,"click","disabled"],[1,"bx","bx-mail-send"],["type","button","title","Edit",1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"bx","bx-pencil"],["type","button","title","Delete",1,"btn","btn-sm","btn-outline-danger"],[1,"bx","bx-trash"],["colspan","9",1,"text-center","py-4"],[1,"bx","bx-user-plus","font-size-48","text-muted","d-block","mb-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"bx","bx-refresh","me-1"],[1,"bx","bx-mail-send","me-1"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",3),e.nrm(1,"app-page-title",4),e.j41(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8)(6,"div",9)(7,"div",10)(8,"div",11)(9,"div",12)(10,"input",13),e.mxI("ngModelChange",function(r){return e.eBV(o),e.DH7(i.searchTerm,r)||(i.searchTerm=r),e.Njj(r)}),e.bIt("ngModelChange",function(){return e.eBV(o),e.Njj(i.searchClients())}),e.k0s(),e.nrm(11,"i",14),e.k0s()()(),e.j41(12,"div",15)(13,"div",16)(14,"button",17),e.bIt("click",function(){e.eBV(o);const r=e.sdS(44);return e.Njj(r.show())}),e.nrm(15,"i",18),e.EFF(16," New Client"),e.k0s()()()(),e.j41(17,"div",19)(18,"table",20)(19,"thead",21)(20,"tr")(21,"th"),e.EFF(22,"First Name"),e.k0s(),e.j41(23,"th"),e.EFF(24,"Last Name"),e.k0s(),e.j41(25,"th"),e.EFF(26,"Email"),e.k0s(),e.j41(27,"th"),e.EFF(28,"Phone Number"),e.k0s(),e.j41(29,"th"),e.EFF(30,"Entity Type"),e.k0s(),e.j41(31,"th"),e.EFF(32,"Status"),e.k0s(),e.j41(33,"th"),e.EFF(34,"Invitation"),e.k0s(),e.j41(35,"th"),e.EFF(36,"Created Date"),e.k0s(),e.j41(37,"th"),e.EFF(38,"Actions"),e.k0s()()(),e.j41(39,"tbody"),e.Z7z(40,$,30,16,"tr",null,R,!1,I,5,0,"tr"),e.k0s()()()()()()()(),e.j41(43,"div",22,0)(45,"div",23)(46,"div",24)(47,"div",25)(48,"h5",26),e.EFF(49,"Add New Client"),e.k0s(),e.j41(50,"button",27),e.bIt("click",function(){e.eBV(o);const r=e.sdS(44);return e.Njj(r.hide())}),e.k0s()(),e.j41(51,"div",28)(52,"form",29),e.bIt("ngSubmit",function(){return e.eBV(o),e.Njj(i.saveClient())}),e.j41(53,"div",5)(54,"div",30)(55,"div",31)(56,"label",32),e.EFF(57,"First Name"),e.k0s(),e.nrm(58,"input",33),e.DNE(59,L,2,1,"div",34),e.k0s()(),e.j41(60,"div",30)(61,"div",31)(62,"label",35),e.EFF(63,"Last Name"),e.k0s(),e.nrm(64,"input",36),e.DNE(65,B,2,1,"div",34),e.k0s()(),e.j41(66,"div",30)(67,"div",31)(68,"label",37),e.EFF(69,"Email Address "),e.j41(70,"span",38),e.EFF(71,"*"),e.k0s()(),e.nrm(72,"input",39),e.DNE(73,w,3,2,"div",34),e.k0s()(),e.j41(74,"div",30)(75,"div",31)(76,"label",40),e.EFF(77,"Phone Number"),e.k0s(),e.j41(78,"input",41),e.bIt("input",function(r){return e.eBV(o),e.Njj(i.formatPhoneNumber(r))}),e.k0s()()(),e.j41(79,"div",30)(80,"div",31)(81,"label",42),e.EFF(82,"Entity Type "),e.j41(83,"span",38),e.EFF(84,"*"),e.k0s()(),e.j41(85,"select",43)(86,"option",44),e.EFF(87,"Select Entity Type"),e.k0s(),e.j41(88,"option",45),e.EFF(89,"Individual"),e.k0s(),e.j41(90,"option",46),e.EFF(91,"Business"),e.k0s(),e.j41(92,"option",47),e.EFF(93,"Corporation"),e.k0s(),e.j41(94,"option",48),e.EFF(95,"Partnership"),e.k0s(),e.j41(96,"option",49),e.EFF(97,"LLC"),e.k0s()(),e.DNE(98,V,2,1,"div",34),e.k0s()(),e.j41(99,"div",30)(100,"div",31)(101,"label",50),e.EFF(102,"Status "),e.j41(103,"span",38),e.EFF(104,"*"),e.k0s()(),e.j41(105,"select",51)(106,"option",44),e.EFF(107,"Select Status"),e.k0s(),e.j41(108,"option",52),e.EFF(109,"Lead"),e.k0s(),e.j41(110,"option",53),e.EFF(111,"Invited"),e.k0s(),e.j41(112,"option",54),e.EFF(113,"Active"),e.k0s(),e.j41(114,"option",55),e.EFF(115,"Inactive"),e.k0s(),e.j41(116,"option",56),e.EFF(117,"Suspended"),e.k0s()(),e.DNE(118,Y,2,1,"div",34),e.k0s()(),e.j41(119,"div",6)(120,"div",57)(121,"button",58),e.bIt("click",function(){e.eBV(o);const r=e.sdS(44);return e.Njj(r.hide())}),e.EFF(122,"Cancel"),e.k0s(),e.j41(123,"button",59),e.DNE(124,q,2,0)(125,U,1,0),e.k0s()()()()()()()()(),e.j41(126,"div",60,1)(128,"div",23)(129,"div",24)(130,"div",25)(131,"h5",61),e.EFF(132,"Edit Client"),e.k0s(),e.j41(133,"button",27),e.bIt("click",function(){e.eBV(o);const r=e.sdS(127);return e.Njj(r.hide())}),e.k0s()(),e.j41(134,"div",28)(135,"form",62),e.bIt("ngSubmit",function(){return e.eBV(o),e.Njj(i.updateClient())}),e.j41(136,"div",5)(137,"div",30)(138,"div",31)(139,"label",63),e.EFF(140,"First Name "),e.j41(141,"span",38),e.EFF(142,"*"),e.k0s()(),e.nrm(143,"input",64),e.DNE(144,K,2,1,"div",34),e.k0s()(),e.j41(145,"div",30)(146,"div",31)(147,"label",65),e.EFF(148,"Last Name "),e.j41(149,"span",38),e.EFF(150,"*"),e.k0s()(),e.nrm(151,"input",66),e.DNE(152,z,2,1,"div",34),e.k0s()(),e.j41(153,"div",30)(154,"div",31)(155,"label",67),e.EFF(156,"Email"),e.k0s(),e.nrm(157,"input",68),e.DNE(158,Q,2,1,"div",34),e.k0s()(),e.j41(159,"div",30)(160,"div",31)(161,"label",69),e.EFF(162,"Phone Number"),e.k0s(),e.j41(163,"input",70),e.bIt("input",function(r){return e.eBV(o),e.Njj(i.formatPhoneNumber(r))}),e.k0s()()(),e.j41(164,"div",30)(165,"div",31)(166,"label",71),e.EFF(167,"Entity Type"),e.k0s(),e.j41(168,"select",72)(169,"option",44),e.EFF(170,"Select Entity Type"),e.k0s(),e.j41(171,"option",45),e.EFF(172,"Individual"),e.k0s(),e.j41(173,"option",46),e.EFF(174,"Business"),e.k0s(),e.j41(175,"option",47),e.EFF(176,"Corporation"),e.k0s(),e.j41(177,"option",48),e.EFF(178,"Partnership"),e.k0s(),e.j41(179,"option",49),e.EFF(180,"LLC"),e.k0s()()()(),e.j41(181,"div",30)(182,"div",31)(183,"label",73),e.EFF(184,"Status"),e.k0s(),e.j41(185,"select",74)(186,"option",44),e.EFF(187,"Select Status"),e.k0s(),e.j41(188,"option",52),e.EFF(189,"Lead"),e.k0s(),e.j41(190,"option",53),e.EFF(191,"Invited"),e.k0s(),e.j41(192,"option",54),e.EFF(193,"Active"),e.k0s(),e.j41(194,"option",55),e.EFF(195,"Inactive"),e.k0s(),e.j41(196,"option",56),e.EFF(197,"Suspended"),e.k0s()()()(),e.j41(198,"div",6)(199,"div",57)(200,"button",58),e.bIt("click",function(){e.eBV(o);const r=e.sdS(127);return e.Njj(r.hide())}),e.EFF(201,"Cancel"),e.k0s(),e.j41(202,"button",75),e.DNE(203,Z,2,0)(204,W,1,0),e.k0s()()()()()()()()(),e.j41(205,"div",76,2)(207,"div",77)(208,"div",24)(209,"div",25)(210,"h5",78),e.nrm(211,"i",79),e.EFF(212,"Send Client Invitation "),e.k0s(),e.j41(213,"button",27),e.bIt("click",function(){e.eBV(o);const r=e.sdS(206);return e.Njj(r.hide())}),e.k0s()(),e.j41(214,"div",28)(215,"form",80),e.bIt("ngSubmit",function(){return e.eBV(o),e.Njj(i.sendInvitation())}),e.j41(216,"div",81)(217,"div",82)(218,"div",83)(219,"div",84)(220,"h6",85),e.EFF(221,"Client Information"),e.k0s(),e.j41(222,"div",5)(223,"div",86)(224,"p",87)(225,"strong"),e.EFF(226,"Name:"),e.k0s(),e.EFF(227),e.k0s(),e.j41(228,"p",87)(229,"strong"),e.EFF(230,"Email:"),e.k0s(),e.EFF(231),e.k0s()(),e.j41(232,"div",86)(233,"p",87)(234,"strong"),e.EFF(235,"Entity Type:"),e.k0s(),e.EFF(236),e.k0s(),e.j41(237,"p",87)(238,"strong"),e.EFF(239,"Status:"),e.k0s(),e.j41(240,"span",88),e.EFF(241),e.k0s()()()()()()()(),e.j41(242,"div",5)(243,"div",82)(244,"div",31)(245,"label",89),e.EFF(246,"Current Invitation Status"),e.k0s(),e.j41(247,"div",90)(248,"span",88),e.EFF(249),e.k0s(),e.DNE(250,ee,3,4,"div",91),e.k0s()()()(),e.j41(251,"div",5)(252,"div",82)(253,"div",31)(254,"label",92),e.EFF(255,"Email Template"),e.k0s(),e.nrm(256,"textarea",93),e.j41(257,"div",94)(258,"small",95),e.EFF(259),e.k0s()()()()(),e.j41(260,"div",5)(261,"div",82)(262,"div",57)(263,"button",58),e.bIt("click",function(){e.eBV(o);const r=e.sdS(206);return e.Njj(r.hide())}),e.EFF(264,"Cancel"),e.k0s(),e.DNE(265,ne,3,2,"button",96)(266,oe,3,2,"button",97),e.k0s()()()()()()()()}if(2&n){let o,d,r,v,b,F,h,_,g,E;e.R7$(),e.Y8G("breadcrumbItems",i.breadCrumbItems),e.R7$(9),e.R50("ngModel",i.searchTerm),e.R7$(30),e.Dyx(i.filteredClients),e.R7$(12),e.Y8G("formGroup",i.createClientForm),e.R7$(6),e.AVh("is-invalid",i.submitted&&(null==(o=i.createClientForm.get("firstName"))?null:o.errors)),e.R7$(),e.vxM(i.submitted&&null!=(d=i.createClientForm.get("firstName"))&&d.errors?59:-1),e.R7$(5),e.AVh("is-invalid",i.submitted&&(null==(r=i.createClientForm.get("lastName"))?null:r.errors)),e.R7$(),e.vxM(i.submitted&&null!=(v=i.createClientForm.get("lastName"))&&v.errors?65:-1),e.R7$(7),e.AVh("is-invalid",i.submitted&&(null==(b=i.createClientForm.get("email"))?null:b.errors)),e.R7$(),e.vxM(i.submitted&&null!=(F=i.createClientForm.get("email"))&&F.errors?73:-1),e.R7$(12),e.AVh("is-invalid",i.submitted&&(null==(h=i.createClientForm.get("entityType"))?null:h.errors)),e.R7$(13),e.vxM(i.submitted&&null!=(_=i.createClientForm.get("entityType"))&&_.errors?98:-1),e.R7$(7),e.AVh("is-invalid",i.submitted&&(null==(g=i.createClientForm.get("status"))?null:g.errors)),e.R7$(13),e.vxM(i.submitted&&null!=(E=i.createClientForm.get("status"))&&E.errors?118:-1),e.R7$(3),e.Y8G("disabled",i.loading),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(),e.vxM(i.loading?124:125),e.R7$(11),e.Y8G("formGroup",i.editClientForm),e.R7$(8),e.AVh("is-invalid",i.editSubmitted&&i.ef.firstName.errors),e.R7$(),e.vxM(i.editSubmitted&&i.ef.firstName.errors?144:-1),e.R7$(7),e.AVh("is-invalid",i.editSubmitted&&i.ef.lastName.errors),e.R7$(),e.vxM(i.editSubmitted&&i.ef.lastName.errors?152:-1),e.R7$(5),e.AVh("is-invalid",i.editSubmitted&&i.ef.email.errors),e.R7$(),e.vxM(i.editSubmitted&&i.ef.email.errors?158:-1),e.R7$(42),e.Y8G("disabled",i.editLoading),e.R7$(2),e.Y8G("disabled",i.editLoading),e.R7$(),e.vxM(i.editLoading?203:204),e.R7$(12),e.Y8G("formGroup",i.inviteClientForm),e.R7$(12),e.Lme(" ",null==i.selectedClient?null:i.selectedClient.firstName," ",null==i.selectedClient?null:i.selectedClient.lastName,""),e.R7$(4),e.SpI(" ",null==i.selectedClient?null:i.selectedClient.email,""),e.R7$(5),e.SpI(" ",(null==i.selectedClient?null:i.selectedClient.entityType)||"N/A",""),e.R7$(4),e.Y8G("ngClass","lead"===(null==i.selectedClient?null:i.selectedClient.status)?"bg-info":"active"===(null==i.selectedClient?null:i.selectedClient.status)?"bg-success":"bg-secondary"),e.R7$(),e.SpI(" ",(null==i.selectedClient?null:i.selectedClient.status)||"N/A"," "),e.R7$(7),e.Y8G("ngClass",i.getInvitationStatusClass(null==i.selectedClient?null:i.selectedClient.invitationStatus)),e.R7$(),e.SpI(" ",i.getInvitationStatusText(null==i.selectedClient?null:i.selectedClient.invitationStatus)," "),e.R7$(),e.vxM(null!=i.selectedClient&&i.selectedClient.lastInvitedAt?250:-1),e.R7$(9),e.Ld(" Available variables: ","{","clientName","}",", ","{","firmName","}",", ","{","invitationLink","}",", ","{","expiryDate","}"," "),e.R7$(4),e.Y8G("disabled",i.inviteLoading),e.R7$(2),e.vxM("pending"===(null==i.selectedClient?null:i.selectedClient.invitationStatus)||"sent"===(null==i.selectedClient?null:i.selectedClient.invitationStatus)?265:266)}},dependencies:[c.MD,c.YU,c.vh,a.YN,a.qT,a.xH,a.y7,a.me,a.wz,a.BC,a.cb,a.YS,a.tU,a.vS,a.X1,a.j4,a.JD,N.T,f.Q_,f.hZ]})}}return l})()}];let re=(()=>{class l{static{this.\u0275fac=function(n){return new(n||l)}}static{this.\u0275mod=e.$C({type:l})}static{this.\u0275inj=e.G2t({imports:[C.iI.forChild(ae),C.iI]})}}return l})(),de=(()=>{class l{static{this.\u0275fac=function(n){return new(n||l)}}static{this.\u0275mod=e.$C({type:l})}static{this.\u0275inj=e.G2t({imports:[c.MD,re]})}}return l})()}}]);
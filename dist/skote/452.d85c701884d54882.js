"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[452],{7452:(nt,_,l)=>{l.r(_),l.d(_,{TaxConsultantModule:()=>et});var m=l(177),c=l(9417),u=l(803),h=l(8032),d=l.n(h),t=l(4438);function f(i,r){if(1&i&&(t.j41(0,"div")(1,"h6",49),t.EFF(2),t.k0s(),t.j41(3,"span",59),t.EFF(4),t.k0s()()),2&i){const e=t.XpG().$implicit;t.R7$(2),t.JRh(e.projectName),t.R7$(2),t.SpI("ID: ",e.projectId,"")}}function b(i,r){1&i&&(t.j41(0,"span",65),t.EFF(1,"No Project"),t.k0s())}function j(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",66),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,s=t.XpG();return t.Njj(s.updateStatus(n,"reviewed"))}),t.nrm(1,"i",67),t.k0s()}}function F(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",68),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,s=t.XpG();return t.Njj(s.updateStatus(n,"needs-revision"))}),t.nrm(1,"i",69),t.k0s()}}function v(i,r){if(1&i){const e=t.RV6();t.j41(0,"tr")(1,"td")(2,"div")(3,"h6",49),t.EFF(4),t.k0s(),t.j41(5,"p",50),t.EFF(6),t.k0s()()(),t.j41(7,"td"),t.DNE(8,f,5,2,"div",48)(9,b,2,0,"span",51),t.k0s(),t.j41(10,"td")(11,"span",52),t.EFF(12),t.k0s()(),t.j41(13,"td"),t.EFF(14),t.nI1(15,"date"),t.k0s(),t.j41(16,"td")(17,"div",53)(18,"span",54),t.EFF(19),t.nI1(20,"titlecase"),t.k0s(),t.j41(21,"ul",55)(22,"li")(23,"a",56),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.updateStatus(n,"pending"))}),t.EFF(24,"Pending"),t.k0s()(),t.j41(25,"li")(26,"a",56),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.updateStatus(n,"reviewed"))}),t.EFF(27,"Reviewed"),t.k0s()(),t.j41(28,"li")(29,"a",56),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.updateStatus(n,"approved"))}),t.EFF(30,"Approved"),t.k0s()(),t.j41(31,"li")(32,"a",56),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.updateStatus(n,"needs-revision"))}),t.EFF(33,"Needs Revision"),t.k0s()()()()(),t.j41(34,"td")(35,"div",11)(36,"div",57),t.nrm(37,"div",58),t.k0s(),t.j41(38,"span",59),t.EFF(39),t.k0s()()(),t.j41(40,"td"),t.EFF(41),t.nI1(42,"date"),t.k0s(),t.j41(43,"td")(44,"div",60)(45,"button",61),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.viewForm(n))}),t.nrm(46,"i",62),t.k0s(),t.DNE(47,j,2,0,"button",63)(48,F,2,0,"button",64),t.k0s()()()}if(2&i){const e=r.$implicit,o=t.XpG();t.R7$(4),t.JRh(e.clientName),t.R7$(2),t.JRh(e.clientEmail),t.R7$(2),t.Y8G("ngIf",e.projectName),t.R7$(),t.Y8G("ngIf",!e.projectName),t.R7$(3),t.SpI(" ",o.getFormTypeDisplay(e.formType)," "),t.R7$(2),t.JRh(t.i5U(15,17,e.submissionDate,"short")),t.R7$(4),t.HbH(o.getStatusClass(e.status)),t.R7$(),t.SpI(" ",t.bMT(20,20,e.status)," "),t.R7$(18),t.HbH(100===e.completionPercentage?"bg-success":"bg-warning"),t.xc7("width",e.completionPercentage,"%"),t.R7$(2),t.SpI("",e.completionPercentage,"%"),t.R7$(2),t.JRh(t.i5U(42,22,e.lastModified,"short")),t.R7$(6),t.Y8G("ngIf","pending"===e.status),t.R7$(),t.Y8G("ngIf","reviewed"===e.status)}}function C(i,r){1&i&&(t.j41(0,"tr")(1,"td",70),t.EFF(2," No intake forms found matching your criteria. "),t.k0s()())}let k=(()=>{class i{constructor(){this.intakeForms=[],this.filteredForms=[],this.selectedStatus="all",this.selectedFormType="all",this.searchTerm="",this.stats={total:0,pending:0,reviewed:0,approved:0,needsRevision:0}}ngOnInit(){this.loadIntakeForms(),this.calculateStats()}loadIntakeForms(){this.intakeForms=[{id:1,clientId:101,clientName:"John Smith",clientEmail:"john.smith@email.com",projectId:1,projectName:"2024 Tax Return",submissionDate:"2024-02-15T10:30:00Z",status:"pending",formType:"tax-intake",completionPercentage:100,lastModified:"2024-02-15T10:30:00Z"},{id:2,clientId:102,clientName:"Sarah Johnson",clientEmail:"sarah.johnson@email.com",projectId:2,projectName:"2024 Business Tax",submissionDate:"2024-02-14T14:20:00Z",status:"reviewed",formType:"tax-intake",completionPercentage:100,lastModified:"2024-02-16T09:15:00Z"},{id:3,clientId:103,clientName:"Michael Brown",clientEmail:"michael.brown@email.com",projectId:3,projectName:"2024 Individual Return",submissionDate:"2024-02-13T16:45:00Z",status:"approved",formType:"tax-intake",completionPercentage:100,lastModified:"2024-02-17T11:30:00Z"},{id:4,clientId:104,clientName:"Emily Davis",clientEmail:"emily.davis@email.com",projectId:4,projectName:"2024 Amended Return",submissionDate:"2024-02-12T09:10:00Z",status:"needs-revision",formType:"tax-intake",completionPercentage:85,lastModified:"2024-02-16T15:20:00Z"},{id:5,clientId:105,clientName:"Robert Wilson",clientEmail:"robert.wilson@email.com",projectId:5,projectName:"2024 LLC Tax Filing",submissionDate:"2024-02-11T13:25:00Z",status:"pending",formType:"business-intake",completionPercentage:92,lastModified:"2024-02-11T13:25:00Z"}],this.filteredForms=[...this.intakeForms]}calculateStats(){this.stats.total=this.intakeForms.length,this.stats.pending=this.intakeForms.filter(e=>"pending"===e.status).length,this.stats.reviewed=this.intakeForms.filter(e=>"reviewed"===e.status).length,this.stats.approved=this.intakeForms.filter(e=>"approved"===e.status).length,this.stats.needsRevision=this.intakeForms.filter(e=>"needs-revision"===e.status).length}filterForms(){this.filteredForms=this.intakeForms.filter(e=>{const o="all"===this.selectedStatus||e.status===this.selectedStatus,n="all"===this.selectedFormType||e.formType===this.selectedFormType,s=e.clientName.toLowerCase().includes(this.searchTerm.toLowerCase())||e.clientEmail.toLowerCase().includes(this.searchTerm.toLowerCase());return o&&n&&s})}onStatusChange(){this.filterForms()}onFormTypeChange(){this.filterForms()}onSearchChange(){this.filterForms()}getStatusClass(e){switch(e){case"approved":return"badge bg-success";case"reviewed":return"badge bg-info";case"pending":return"badge bg-warning";case"needs-revision":return"badge bg-danger";default:return"badge bg-secondary"}}getFormTypeDisplay(e){switch(e){case"tax-intake":return"Tax Intake";case"business-intake":return"Business Intake";default:return e}}viewForm(e){d().fire({title:"View Intake Form",text:`Opening ${e.formType} form for ${e.clientName}`,icon:"info",timer:2e3,showConfirmButton:!1})}updateStatus(e,o){const n=e.status;e.status=o,e.lastModified=(new Date).toISOString(),this.calculateStats(),this.filterForms(),d().fire({title:"Status Updated",text:`Form status changed from ${n} to ${o}`,icon:"success",timer:2e3,showConfirmButton:!1})}exportForms(){d().fire({title:"Export Started",text:"Preparing intake forms export...",icon:"info",timer:2e3,showConfirmButton:!1})}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-intake-forms"]],decls:118,vars:9,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box","d-sm-flex","align-items-center","justify-content-between"],[1,"mb-sm-0","font-size-18"],[1,"page-title-right"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"ri-download-line","me-1"],[1,"col-xl-3","col-md-6"],[1,"card","card-h-100"],[1,"card-body"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"],[1,"text-muted","mb-3","lh-1","d-block","text-truncate"],[1,"mb-3"],[1,"flex-shrink-0"],["id","mini-chart1","data-colors",'["#5156be"]'],[1,"counter-value"],[1,"avatar-sm","rounded-circle","bg-warning-subtle"],[1,"avatar-title","rounded-circle","bg-warning-subtle","text-warning"],[1,"ri-time-line","font-size-24"],[1,"avatar-sm","rounded-circle","bg-success-subtle"],[1,"avatar-title","rounded-circle","bg-success-subtle","text-success"],[1,"ri-check-line","font-size-24"],[1,"avatar-sm","rounded-circle","bg-danger-subtle"],[1,"avatar-title","rounded-circle","bg-danger-subtle","text-danger"],[1,"ri-error-warning-line","font-size-24"],[1,"card"],[1,"row","mb-4"],[1,"col-md-3"],["for","statusFilter",1,"form-label"],["id","statusFilter",1,"form-select",3,"ngModelChange","change","ngModel"],["value","all"],["value","pending"],["value","reviewed"],["value","approved"],["value","needs-revision"],["for","formTypeFilter",1,"form-label"],["id","formTypeFilter",1,"form-select",3,"ngModelChange","change","ngModel"],["value","tax-intake"],["value","business-intake"],[1,"col-md-6"],["for","searchInput",1,"form-label"],["type","text","id","searchInput","placeholder","Search by client name or email...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"table-responsive"],[1,"table","table-nowrap","table-hover"],[1,"table-light"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"mb-1"],[1,"text-muted","mb-0","font-size-12"],["class","text-muted",4,"ngIf"],[1,"badge","bg-primary-subtle","text-primary"],[1,"dropdown"],["data-bs-toggle","dropdown",1,"dropdown-toggle",2,"cursor","pointer"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"progress","flex-grow-1","me-2",2,"height","6px"],[1,"progress-bar"],[1,"text-muted","font-size-12"],[1,"d-flex","gap-2"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"ri-eye-line"],["type","button","class","btn btn-sm btn-outline-success",3,"click",4,"ngIf"],["type","button","class","btn btn-sm btn-outline-warning",3,"click",4,"ngIf"],[1,"text-muted"],["type","button",1,"btn","btn-sm","btn-outline-success",3,"click"],[1,"ri-check-line"],["type","button",1,"btn","btn-sm","btn-outline-warning",3,"click"],[1,"ri-edit-line"],["colspan","8",1,"text-center","text-muted","py-4"]],template:function(o,n){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),t.EFF(5,"Client Intake Forms"),t.k0s(),t.j41(6,"div",5)(7,"button",6),t.bIt("click",function(){return n.exportForms()}),t.nrm(8,"i",7),t.EFF(9,"Export Forms "),t.k0s()()()()(),t.j41(10,"div",1)(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12)(16,"span",13),t.EFF(17,"Total Forms"),t.k0s(),t.j41(18,"h4",14),t.EFF(19),t.k0s()(),t.j41(20,"div",15),t.nrm(21,"div",16),t.k0s()()()()(),t.j41(22,"div",8)(23,"div",9)(24,"div",10)(25,"div",11)(26,"div",12)(27,"span",13),t.EFF(28,"Pending Review"),t.k0s(),t.j41(29,"h4",14)(30,"span",17),t.EFF(31),t.k0s()()(),t.j41(32,"div",15)(33,"div",18)(34,"span",19),t.nrm(35,"i",20),t.k0s()()()()()()(),t.j41(36,"div",8)(37,"div",9)(38,"div",10)(39,"div",11)(40,"div",12)(41,"span",13),t.EFF(42,"Approved"),t.k0s(),t.j41(43,"h4",14),t.EFF(44),t.k0s()(),t.j41(45,"div",15)(46,"div",21)(47,"span",22),t.nrm(48,"i",23),t.k0s()()()()()()(),t.j41(49,"div",8)(50,"div",9)(51,"div",10)(52,"div",11)(53,"div",12)(54,"span",13),t.EFF(55,"Needs Revision"),t.k0s(),t.j41(56,"h4",14),t.EFF(57),t.k0s()(),t.j41(58,"div",15)(59,"div",24)(60,"span",25),t.nrm(61,"i",26),t.k0s()()()()()()()(),t.j41(62,"div",1)(63,"div",2)(64,"div",27)(65,"div",10)(66,"div",28)(67,"div",29)(68,"label",30),t.EFF(69,"Filter by Status"),t.k0s(),t.j41(70,"select",31),t.mxI("ngModelChange",function(a){return t.DH7(n.selectedStatus,a)||(n.selectedStatus=a),a}),t.bIt("change",function(){return n.onStatusChange()}),t.j41(71,"option",32),t.EFF(72,"All Statuses"),t.k0s(),t.j41(73,"option",33),t.EFF(74,"Pending"),t.k0s(),t.j41(75,"option",34),t.EFF(76,"Reviewed"),t.k0s(),t.j41(77,"option",35),t.EFF(78,"Approved"),t.k0s(),t.j41(79,"option",36),t.EFF(80,"Needs Revision"),t.k0s()()(),t.j41(81,"div",29)(82,"label",37),t.EFF(83,"Filter by Form Type"),t.k0s(),t.j41(84,"select",38),t.mxI("ngModelChange",function(a){return t.DH7(n.selectedFormType,a)||(n.selectedFormType=a),a}),t.bIt("change",function(){return n.onFormTypeChange()}),t.j41(85,"option",32),t.EFF(86,"All Types"),t.k0s(),t.j41(87,"option",39),t.EFF(88,"Tax Intake"),t.k0s(),t.j41(89,"option",40),t.EFF(90,"Business Intake"),t.k0s()()(),t.j41(91,"div",41)(92,"label",42),t.EFF(93,"Search Forms"),t.k0s(),t.j41(94,"input",43),t.mxI("ngModelChange",function(a){return t.DH7(n.searchTerm,a)||(n.searchTerm=a),a}),t.bIt("input",function(){return n.onSearchChange()}),t.k0s()()(),t.j41(95,"div",44)(96,"table",45)(97,"thead",46)(98,"tr")(99,"th"),t.EFF(100,"Client"),t.k0s(),t.j41(101,"th"),t.EFF(102,"Project"),t.k0s(),t.j41(103,"th"),t.EFF(104,"Form Type"),t.k0s(),t.j41(105,"th"),t.EFF(106,"Submission Date"),t.k0s(),t.j41(107,"th"),t.EFF(108,"Status"),t.k0s(),t.j41(109,"th"),t.EFF(110,"Progress"),t.k0s(),t.j41(111,"th"),t.EFF(112,"Last Modified"),t.k0s(),t.j41(113,"th"),t.EFF(114,"Actions"),t.k0s()()(),t.j41(115,"tbody"),t.DNE(116,v,49,25,"tr",47)(117,C,3,0,"tr",48),t.k0s()()()()()()()()),2&o&&(t.R7$(19),t.JRh(n.stats.total),t.R7$(12),t.JRh(n.stats.pending),t.R7$(13),t.JRh(n.stats.approved),t.R7$(13),t.JRh(n.stats.needsRevision),t.R7$(13),t.R50("ngModel",n.selectedStatus),t.R7$(14),t.R50("ngModel",n.selectedFormType),t.R7$(10),t.R50("ngModel",n.searchTerm),t.R7$(22),t.Y8G("ngForOf",n.filteredForms),t.R7$(),t.Y8G("ngIf",0===n.filteredForms.length))},dependencies:[m.Sq,m.bT,c.xH,c.y7,c.me,c.wz,c.BC,c.vS,m.PV,m.vh],styles:[".card-h-100[_ngcontent-%COMP%]{height:100%}.avatar-sm[_ngcontent-%COMP%]{height:2rem;width:2rem}.avatar-title[_ngcontent-%COMP%]{align-items:center;background-color:#556ee6;color:#fff;display:flex;font-weight:500;height:100%;justify-content:center;width:100%}.bg-primary-subtle[_ngcontent-%COMP%]{background-color:#556ee61a!important}.bg-success-subtle[_ngcontent-%COMP%]{background-color:#34c38f1a!important}.bg-warning-subtle[_ngcontent-%COMP%]{background-color:#fcb92c1a!important}.bg-danger-subtle[_ngcontent-%COMP%]{background-color:#f46a6a1a!important}.progress[_ngcontent-%COMP%]{height:6px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;border-top:none}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.badge[_ngcontent-%COMP%]{font-size:.75rem}"]})}}return i})();function y(i,r){if(1&i&&(t.j41(0,"option",56),t.EFF(1),t.k0s()),2&i){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(),t.JRh(e.name)}}function x(i,r){if(1&i&&(t.j41(0,"p",60),t.nrm(1,"i",76),t.EFF(2),t.nI1(3,"slice"),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(2),t.SpI("",t.brH(3,1,e.notes,0,50),"... ")}}function w(i,r){if(1&i&&(t.j41(0,"div")(1,"span",77),t.EFF(2),t.k0s(),t.j41(3,"p",78),t.EFF(4),t.nI1(5,"date"),t.k0s()()),2&i){const e=t.XpG().$implicit;t.R7$(2),t.JRh(e.reviewedBy),t.R7$(2),t.JRh(t.i5U(5,2,e.reviewDate,"short"))}}function T(i,r){1&i&&(t.j41(0,"span",79),t.EFF(1,"Not reviewed"),t.k0s())}function I(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",80),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,s=t.XpG();return t.Njj(s.updateStatus(n,"approved"))}),t.nrm(1,"i",81),t.k0s()}}function E(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",82),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,s=t.XpG();return t.Njj(s.updateStatus(n,"rejected"))}),t.nrm(1,"i",83),t.k0s()}}function R(i,r){if(1&i){const e=t.RV6();t.j41(0,"tr")(1,"td")(2,"div",11),t.nrm(3,"i",57),t.j41(4,"div")(5,"h6",58),t.EFF(6),t.k0s(),t.DNE(7,x,4,5,"p",59),t.k0s()()(),t.j41(8,"td")(9,"div")(10,"h6",58),t.EFF(11),t.k0s(),t.j41(12,"p",60),t.EFF(13),t.k0s()()(),t.j41(14,"td")(15,"span"),t.EFF(16),t.k0s()(),t.j41(17,"td")(18,"div")(19,"span",61),t.EFF(20),t.k0s(),t.j41(21,"p",60),t.EFF(22),t.k0s()()(),t.j41(23,"td"),t.EFF(24),t.nI1(25,"date"),t.k0s(),t.j41(26,"td")(27,"div",62)(28,"span",63),t.EFF(29),t.nI1(30,"titlecase"),t.k0s(),t.j41(31,"ul",64)(32,"li")(33,"a",65),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.updateStatus(n,"pending"))}),t.EFF(34,"Pending"),t.k0s()(),t.j41(35,"li")(36,"a",65),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.updateStatus(n,"reviewed"))}),t.EFF(37,"Reviewed"),t.k0s()(),t.j41(38,"li")(39,"a",65),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.updateStatus(n,"approved"))}),t.EFF(40,"Approved"),t.k0s()(),t.j41(41,"li")(42,"a",65),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.updateStatus(n,"rejected"))}),t.EFF(43,"Rejected"),t.k0s()()()()(),t.j41(44,"td"),t.DNE(45,w,6,5,"div",55)(46,T,2,0,"span",66),t.k0s(),t.j41(47,"td")(48,"div",67)(49,"button",68),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.viewDocument(n))}),t.nrm(50,"i",69),t.k0s(),t.j41(51,"button",70),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.downloadDocument(n))}),t.nrm(52,"i",71),t.k0s(),t.j41(53,"button",72),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.addNotes(n))}),t.nrm(54,"i",73),t.k0s(),t.DNE(55,I,2,0,"button",74)(56,E,2,0,"button",75),t.k0s()()()}if(2&i){const e=r.$implicit,o=t.XpG();t.R7$(6),t.JRh(e.documentName),t.R7$(),t.Y8G("ngIf",e.notes),t.R7$(4),t.JRh(e.clientName),t.R7$(2),t.JRh(e.clientEmail),t.R7$(2),t.HbH(o.getCategoryClass(e.category)),t.R7$(),t.SpI(" ",o.getCategoryDisplay(e.category)," "),t.R7$(4),t.JRh(e.documentType),t.R7$(2),t.JRh(e.size),t.R7$(2),t.JRh(t.i5U(25,17,e.uploadDate,"short")),t.R7$(4),t.HbH(o.getStatusClass(e.status)),t.R7$(),t.SpI(" ",t.bMT(30,20,e.status)," "),t.R7$(16),t.Y8G("ngIf",e.reviewedBy),t.R7$(),t.Y8G("ngIf",!e.reviewedBy),t.R7$(9),t.Y8G("ngIf","pending"===e.status),t.R7$(),t.Y8G("ngIf","pending"===e.status||"reviewed"===e.status)}}function D(i,r){1&i&&(t.j41(0,"tr")(1,"td",84),t.EFF(2," No documents found matching your criteria. "),t.k0s()())}let P=(()=>{class i{constructor(){this.documents=[],this.filteredDocuments=[],this.selectedStatus="all",this.selectedCategory="all",this.selectedClient="all",this.searchTerm="",this.stats={total:0,pending:0,reviewed:0,approved:0,rejected:0},this.clients=[]}ngOnInit(){this.loadDocuments(),this.calculateStats(),this.extractClients()}loadDocuments(){this.documents=[{id:1,clientId:101,clientName:"John Smith",clientEmail:"john.smith@email.com",documentName:"W2_2024.pdf",documentType:"PDF",category:"tax-documents",size:"245 KB",uploadDate:"2024-02-15T10:30:00Z",status:"pending"},{id:2,clientId:102,clientName:"Sarah Johnson",clientEmail:"sarah.johnson@email.com",documentName:"Bank_Statement_Jan2024.pdf",documentType:"PDF",category:"financial-statements",size:"1.2 MB",uploadDate:"2024-02-14T14:20:00Z",status:"reviewed",reviewedBy:"Tax Consultant",reviewDate:"2024-02-16T09:15:00Z"},{id:3,clientId:103,clientName:"Michael Brown",clientEmail:"michael.brown@email.com",documentName:"Receipt_Office_Supplies.jpg",documentType:"Image",category:"receipts",size:"890 KB",uploadDate:"2024-02-13T16:45:00Z",status:"approved",reviewedBy:"Tax Consultant",reviewDate:"2024-02-17T11:30:00Z"},{id:4,clientId:104,clientName:"Emily Davis",clientEmail:"emily.davis@email.com",documentName:"1099_Form.pdf",documentType:"PDF",category:"tax-documents",size:"156 KB",uploadDate:"2024-02-12T09:10:00Z",status:"rejected",reviewedBy:"Tax Consultant",reviewDate:"2024-02-16T15:20:00Z",notes:"Document is unclear, please re-upload with better quality"},{id:5,clientId:105,clientName:"Robert Wilson",clientEmail:"robert.wilson@email.com",documentName:"Business_Expenses_Q1.xlsx",documentType:"Spreadsheet",category:"financial-statements",size:"2.1 MB",uploadDate:"2024-02-11T13:25:00Z",status:"pending"},{id:6,clientId:101,clientName:"John Smith",clientEmail:"john.smith@email.com",documentName:"Property_Tax_Statement.pdf",documentType:"PDF",category:"tax-documents",size:"340 KB",uploadDate:"2024-02-10T11:15:00Z",status:"approved",reviewedBy:"Tax Consultant",reviewDate:"2024-02-15T14:45:00Z"}],this.filteredDocuments=[...this.documents]}calculateStats(){this.stats.total=this.documents.length,this.stats.pending=this.documents.filter(e=>"pending"===e.status).length,this.stats.reviewed=this.documents.filter(e=>"reviewed"===e.status).length,this.stats.approved=this.documents.filter(e=>"approved"===e.status).length,this.stats.rejected=this.documents.filter(e=>"rejected"===e.status).length}extractClients(){const e=new Map;this.documents.forEach(o=>{e.has(o.clientId)||e.set(o.clientId,{id:o.clientId,name:o.clientName})}),this.clients=Array.from(e.values())}filterDocuments(){this.filteredDocuments=this.documents.filter(e=>{const o="all"===this.selectedStatus||e.status===this.selectedStatus,n="all"===this.selectedCategory||e.category===this.selectedCategory,s="all"===this.selectedClient||e.clientId.toString()===this.selectedClient,a=e.documentName.toLowerCase().includes(this.searchTerm.toLowerCase())||e.clientName.toLowerCase().includes(this.searchTerm.toLowerCase())||e.clientEmail.toLowerCase().includes(this.searchTerm.toLowerCase());return o&&n&&s&&a})}onStatusChange(){this.filterDocuments()}onCategoryChange(){this.filterDocuments()}onClientChange(){this.filterDocuments()}onSearchChange(){this.filterDocuments()}getStatusClass(e){switch(e){case"approved":return"badge bg-success";case"reviewed":return"badge bg-info";case"pending":return"badge bg-warning";case"rejected":return"badge bg-danger";default:return"badge bg-secondary"}}getCategoryDisplay(e){switch(e){case"tax-documents":return"Tax Documents";case"financial-statements":return"Financial Statements";case"receipts":return"Receipts";case"other":return"Other";default:return e}}getCategoryClass(e){switch(e){case"tax-documents":return"badge bg-primary-subtle text-primary";case"financial-statements":return"badge bg-success-subtle text-success";case"receipts":return"badge bg-warning-subtle text-warning";case"other":return"badge bg-info-subtle text-info";default:return"badge bg-secondary"}}viewDocument(e){d().fire({title:"View Document",text:`Opening ${e.documentName} for ${e.clientName}`,icon:"info",timer:2e3,showConfirmButton:!1})}downloadDocument(e){d().fire({title:"Download Started",text:`Downloading ${e.documentName}...`,icon:"info",timer:2e3,showConfirmButton:!1})}updateStatus(e,o){const n=e.status;e.status=o,e.reviewedBy="Tax Consultant",e.reviewDate=(new Date).toISOString(),this.calculateStats(),this.filterDocuments(),d().fire({title:"Status Updated",text:`Document status changed from ${n} to ${o}`,icon:"success",timer:2e3,showConfirmButton:!1})}addNotes(e){d().fire({title:"Add Notes",input:"textarea",inputLabel:"Review Notes",inputPlaceholder:"Enter your notes about this document...",inputValue:e.notes||"",showCancelButton:!0,confirmButtonText:"Save Notes",cancelButtonText:"Cancel"}).then(o=>{o.isConfirmed&&(e.notes=o.value,e.reviewedBy="Tax Consultant",e.reviewDate=(new Date).toISOString(),d().fire({title:"Notes Saved",text:"Review notes have been added to the document",icon:"success",timer:2e3,showConfirmButton:!1}))})}exportDocuments(){d().fire({title:"Export Started",text:"Preparing documents export...",icon:"info",timer:2e3,showConfirmButton:!1})}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-client-documents"]],decls:130,vars:11,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box","d-sm-flex","align-items-center","justify-content-between"],[1,"mb-sm-0","font-size-18"],[1,"page-title-right"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"ri-download-line","me-1"],[1,"col-xl-3","col-md-6"],[1,"card","card-h-100"],[1,"card-body"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"],[1,"text-muted","mb-3","lh-1","d-block","text-truncate"],[1,"mb-3"],[1,"flex-shrink-0"],[1,"avatar-sm","rounded-circle","bg-primary-subtle"],[1,"avatar-title","rounded-circle","bg-primary-subtle","text-primary"],[1,"ri-file-text-line","font-size-24"],[1,"avatar-sm","rounded-circle","bg-warning-subtle"],[1,"avatar-title","rounded-circle","bg-warning-subtle","text-warning"],[1,"ri-time-line","font-size-24"],[1,"avatar-sm","rounded-circle","bg-success-subtle"],[1,"avatar-title","rounded-circle","bg-success-subtle","text-success"],[1,"ri-check-line","font-size-24"],[1,"avatar-sm","rounded-circle","bg-danger-subtle"],[1,"avatar-title","rounded-circle","bg-danger-subtle","text-danger"],[1,"ri-close-line","font-size-24"],[1,"card"],[1,"row","mb-4"],[1,"col-md-2"],["for","statusFilter",1,"form-label"],["id","statusFilter",1,"form-select",3,"ngModelChange","change","ngModel"],["value","all"],["value","pending"],["value","reviewed"],["value","approved"],["value","rejected"],["for","categoryFilter",1,"form-label"],["id","categoryFilter",1,"form-select",3,"ngModelChange","change","ngModel"],["value","tax-documents"],["value","financial-statements"],["value","receipts"],["value","other"],[1,"col-md-3"],["for","clientFilter",1,"form-label"],["id","clientFilter",1,"form-select",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-5"],["for","searchInput",1,"form-label"],["type","text","id","searchInput","placeholder","Search by document name, client name, or email...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"table-responsive"],[1,"table","table-nowrap","table-hover"],[1,"table-light"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[1,"ri-file-text-line","me-2","text-muted"],[1,"mb-1"],["class","text-muted mb-0 font-size-12",4,"ngIf"],[1,"text-muted","mb-0","font-size-12"],[1,"badge","bg-light","text-dark"],[1,"dropdown"],["data-bs-toggle","dropdown",1,"dropdown-toggle",2,"cursor","pointer"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["class","text-muted font-size-12",4,"ngIf"],[1,"d-flex","gap-1"],["type","button","title","View Document",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"ri-eye-line"],["type","button","title","Download",1,"btn","btn-sm","btn-outline-info",3,"click"],[1,"ri-download-line"],["type","button","title","Add Notes",1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"ri-sticky-note-line"],["type","button","class","btn btn-sm btn-outline-success","title","Approve",3,"click",4,"ngIf"],["type","button","class","btn btn-sm btn-outline-danger","title","Reject",3,"click",4,"ngIf"],[1,"ri-sticky-note-line","me-1"],[1,"font-size-12"],[1,"text-muted","mb-0","font-size-11"],[1,"text-muted","font-size-12"],["type","button","title","Approve",1,"btn","btn-sm","btn-outline-success",3,"click"],[1,"ri-check-line"],["type","button","title","Reject",1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"ri-close-line"],["colspan","8",1,"text-center","text-muted","py-4"]],template:function(o,n){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),t.EFF(5,"Client Documents"),t.k0s(),t.j41(6,"div",5)(7,"button",6),t.bIt("click",function(){return n.exportDocuments()}),t.nrm(8,"i",7),t.EFF(9,"Export Documents "),t.k0s()()()()(),t.j41(10,"div",1)(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12)(16,"span",13),t.EFF(17,"Total Documents"),t.k0s(),t.j41(18,"h4",14),t.EFF(19),t.k0s()(),t.j41(20,"div",15)(21,"div",16)(22,"span",17),t.nrm(23,"i",18),t.k0s()()()()()()(),t.j41(24,"div",8)(25,"div",9)(26,"div",10)(27,"div",11)(28,"div",12)(29,"span",13),t.EFF(30,"Pending Review"),t.k0s(),t.j41(31,"h4",14),t.EFF(32),t.k0s()(),t.j41(33,"div",15)(34,"div",19)(35,"span",20),t.nrm(36,"i",21),t.k0s()()()()()()(),t.j41(37,"div",8)(38,"div",9)(39,"div",10)(40,"div",11)(41,"div",12)(42,"span",13),t.EFF(43,"Approved"),t.k0s(),t.j41(44,"h4",14),t.EFF(45),t.k0s()(),t.j41(46,"div",15)(47,"div",22)(48,"span",23),t.nrm(49,"i",24),t.k0s()()()()()()(),t.j41(50,"div",8)(51,"div",9)(52,"div",10)(53,"div",11)(54,"div",12)(55,"span",13),t.EFF(56,"Rejected"),t.k0s(),t.j41(57,"h4",14),t.EFF(58),t.k0s()(),t.j41(59,"div",15)(60,"div",25)(61,"span",26),t.nrm(62,"i",27),t.k0s()()()()()()()(),t.j41(63,"div",1)(64,"div",2)(65,"div",28)(66,"div",10)(67,"div",29)(68,"div",30)(69,"label",31),t.EFF(70,"Status"),t.k0s(),t.j41(71,"select",32),t.mxI("ngModelChange",function(a){return t.DH7(n.selectedStatus,a)||(n.selectedStatus=a),a}),t.bIt("change",function(){return n.onStatusChange()}),t.j41(72,"option",33),t.EFF(73,"All Statuses"),t.k0s(),t.j41(74,"option",34),t.EFF(75,"Pending"),t.k0s(),t.j41(76,"option",35),t.EFF(77,"Reviewed"),t.k0s(),t.j41(78,"option",36),t.EFF(79,"Approved"),t.k0s(),t.j41(80,"option",37),t.EFF(81,"Rejected"),t.k0s()()(),t.j41(82,"div",30)(83,"label",38),t.EFF(84,"Category"),t.k0s(),t.j41(85,"select",39),t.mxI("ngModelChange",function(a){return t.DH7(n.selectedCategory,a)||(n.selectedCategory=a),a}),t.bIt("change",function(){return n.onCategoryChange()}),t.j41(86,"option",33),t.EFF(87,"All Categories"),t.k0s(),t.j41(88,"option",40),t.EFF(89,"Tax Documents"),t.k0s(),t.j41(90,"option",41),t.EFF(91,"Financial Statements"),t.k0s(),t.j41(92,"option",42),t.EFF(93,"Receipts"),t.k0s(),t.j41(94,"option",43),t.EFF(95,"Other"),t.k0s()()(),t.j41(96,"div",44)(97,"label",45),t.EFF(98,"Client"),t.k0s(),t.j41(99,"select",46),t.mxI("ngModelChange",function(a){return t.DH7(n.selectedClient,a)||(n.selectedClient=a),a}),t.bIt("change",function(){return n.onClientChange()}),t.j41(100,"option",33),t.EFF(101,"All Clients"),t.k0s(),t.DNE(102,y,2,2,"option",47),t.k0s()(),t.j41(103,"div",48)(104,"label",49),t.EFF(105,"Search Documents"),t.k0s(),t.j41(106,"input",50),t.mxI("ngModelChange",function(a){return t.DH7(n.searchTerm,a)||(n.searchTerm=a),a}),t.bIt("input",function(){return n.onSearchChange()}),t.k0s()()(),t.j41(107,"div",51)(108,"table",52)(109,"thead",53)(110,"tr")(111,"th"),t.EFF(112,"Document"),t.k0s(),t.j41(113,"th"),t.EFF(114,"Client"),t.k0s(),t.j41(115,"th"),t.EFF(116,"Category"),t.k0s(),t.j41(117,"th"),t.EFF(118,"Type & Size"),t.k0s(),t.j41(119,"th"),t.EFF(120,"Upload Date"),t.k0s(),t.j41(121,"th"),t.EFF(122,"Status"),t.k0s(),t.j41(123,"th"),t.EFF(124,"Reviewed By"),t.k0s(),t.j41(125,"th"),t.EFF(126,"Actions"),t.k0s()()(),t.j41(127,"tbody"),t.DNE(128,R,57,22,"tr",54)(129,D,3,0,"tr",55),t.k0s()()()()()()()()),2&o&&(t.R7$(19),t.JRh(n.stats.total),t.R7$(13),t.JRh(n.stats.pending),t.R7$(13),t.JRh(n.stats.approved),t.R7$(13),t.JRh(n.stats.rejected),t.R7$(13),t.R50("ngModel",n.selectedStatus),t.R7$(14),t.R50("ngModel",n.selectedCategory),t.R7$(14),t.R50("ngModel",n.selectedClient),t.R7$(3),t.Y8G("ngForOf",n.clients),t.R7$(4),t.R50("ngModel",n.searchTerm),t.R7$(22),t.Y8G("ngForOf",n.filteredDocuments),t.R7$(),t.Y8G("ngIf",0===n.filteredDocuments.length))},dependencies:[m.Sq,m.bT,c.xH,c.y7,c.me,c.wz,c.BC,c.vS,m.P9,m.PV,m.vh],styles:[".card-h-100[_ngcontent-%COMP%]{height:100%}.avatar-sm[_ngcontent-%COMP%]{height:2rem;width:2rem}.avatar-title[_ngcontent-%COMP%]{align-items:center;background-color:#556ee6;color:#fff;display:flex;font-weight:500;height:100%;justify-content:center;width:100%}.bg-primary-subtle[_ngcontent-%COMP%]{background-color:#556ee61a!important}.bg-success-subtle[_ngcontent-%COMP%]{background-color:#34c38f1a!important}.bg-warning-subtle[_ngcontent-%COMP%]{background-color:#fcb92c1a!important}.bg-danger-subtle[_ngcontent-%COMP%]{background-color:#f46a6a1a!important}.bg-info-subtle[_ngcontent-%COMP%]{background-color:#50a5f11a!important}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;border-top:none}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.badge[_ngcontent-%COMP%]{font-size:.75rem}.font-size-11[_ngcontent-%COMP%]{font-size:.6875rem}.font-size-12[_ngcontent-%COMP%]{font-size:.75rem}.btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.75rem}"]})}}return i})();var M=l(1413),p=l(6977),S=l(6344);function N(i,r){1&i&&(t.j41(0,"div",1)(1,"div",2)(2,"div",12)(3,"div",13)(4,"div",14)(5,"span",15),t.EFF(6,"Loading..."),t.k0s()(),t.j41(7,"p",16),t.EFF(8,"Loading projects..."),t.k0s()()()()())}function $(i,r){if(1&i&&(t.j41(0,"p",35),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.description)}}function G(i,r){if(1&i){const e=t.RV6();t.j41(0,"li")(1,"a",36),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG().$implicit,a=t.XpG(3);return t.Njj(a.updateProjectStatus(s,n.value))}),t.EFF(2),t.k0s()()}if(2&i){const e=r.$implicit,o=t.XpG().$implicit;t.R7$(),t.AVh("active",o.status===e.value),t.R7$(),t.SpI(" ",e.label," ")}}function O(i,r){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.taxYear)}}function B(i,r){1&i&&(t.j41(0,"span",37),t.EFF(1,"N/A"),t.k0s())}function V(i,r){if(1&i){const e=t.RV6();t.j41(0,"tr")(1,"td")(2,"div")(3,"h5",24),t.EFF(4),t.k0s(),t.DNE(5,$,2,1,"p",25),t.k0s()(),t.j41(6,"td")(7,"span",26),t.EFF(8),t.k0s()(),t.j41(9,"td")(10,"div",27)(11,"button",28),t.EFF(12),t.k0s(),t.j41(13,"ul",29),t.DNE(14,G,3,3,"li",23),t.k0s()()(),t.j41(15,"td"),t.DNE(16,O,2,1,"span",30)(17,B,2,0,"span",31),t.k0s(),t.j41(18,"td")(19,"span"),t.EFF(20),t.k0s()(),t.j41(21,"td"),t.EFF(22),t.k0s(),t.j41(23,"td")(24,"div",32)(25,"button",33),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG(3);return t.Njj(s.viewProject(n))}),t.nrm(26,"i",34),t.k0s()()()()}if(2&i){const e=r.$implicit,o=t.XpG(3);t.R7$(4),t.JRh(e.name),t.R7$(),t.Y8G("ngIf",e.description),t.R7$(3),t.JRh(o.getTypeLabel(e.type)),t.R7$(3),t.ZvI("btn btn-sm ",o.getStatusClass(e.status)," dropdown-toggle"),t.R7$(),t.SpI(" ",o.getStatusLabel(e.status)," "),t.R7$(2),t.Y8G("ngForOf",o.projectStatuses),t.R7$(2),t.Y8G("ngIf",e.taxYear),t.R7$(),t.Y8G("ngIf",!e.taxYear),t.R7$(2),t.AVh("text-danger",o.isOverdue(e.dueDate)),t.R7$(),t.SpI(" ",o.formatDate(e.dueDate)," "),t.R7$(2),t.JRh(o.formatDate(e.createdAt))}}function X(i,r){if(1&i&&(t.j41(0,"div",20)(1,"table",21)(2,"thead")(3,"tr")(4,"th",22),t.EFF(5,"Project Name"),t.k0s(),t.j41(6,"th",22),t.EFF(7,"Type"),t.k0s(),t.j41(8,"th",22),t.EFF(9,"Status"),t.k0s(),t.j41(10,"th",22),t.EFF(11,"Tax Year"),t.k0s(),t.j41(12,"th",22),t.EFF(13,"Due Date"),t.k0s(),t.j41(14,"th",22),t.EFF(15,"Created"),t.k0s(),t.j41(16,"th",22),t.EFF(17,"Actions"),t.k0s()()(),t.j41(18,"tbody"),t.DNE(19,V,27,14,"tr",23),t.k0s()()()),2&i){const e=t.XpG(2);t.R7$(19),t.Y8G("ngForOf",e.projects)}}function Y(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",38)(1,"div",39),t.nrm(2,"i",40),t.k0s(),t.j41(3,"h5"),t.EFF(4,"No Projects Found"),t.k0s(),t.j41(5,"p",37),t.EFF(6,"This client doesn't have any projects yet. Create one to get started."),t.k0s(),t.j41(7,"button",7),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.openCreateModal())}),t.nrm(8,"i",8),t.EFF(9," Create First Project "),t.k0s()()}}function z(i,r){if(1&i&&(t.j41(0,"div",1)(1,"div",2)(2,"div",12)(3,"div",17),t.DNE(4,X,20,1,"div",18)(5,Y,10,0,"div",19),t.k0s()()()()),2&i){const e=t.XpG();t.R7$(4),t.Y8G("ngIf",e.projects.length>0),t.R7$(),t.Y8G("ngIf",0===e.projects.length)}}function A(i,r){if(1&i&&(t.j41(0,"option",65),t.EFF(1),t.k0s()),2&i){const e=r.$implicit;t.Y8G("value",e.value),t.R7$(),t.SpI(" ",e.label," ")}}function J(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",41)(1,"div",42)(2,"div",43)(3,"div",44)(4,"h5",45),t.EFF(5,"Create New Project"),t.k0s(),t.j41(6,"button",46),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.closeCreateModal())}),t.k0s()(),t.j41(7,"div",47)(8,"form")(9,"div",1)(10,"div",48)(11,"div",49)(12,"label",50),t.EFF(13,"Project Name *"),t.k0s(),t.j41(14,"input",51),t.mxI("ngModelChange",function(n){t.eBV(e);const s=t.XpG();return t.DH7(s.newProject.name,n)||(s.newProject.name=n),t.Njj(n)}),t.k0s()()(),t.j41(15,"div",52)(16,"div",49)(17,"label",53),t.EFF(18,"Project Type *"),t.k0s(),t.j41(19,"select",54),t.mxI("ngModelChange",function(n){t.eBV(e);const s=t.XpG();return t.DH7(s.newProject.type,n)||(s.newProject.type=n),t.Njj(n)}),t.DNE(20,A,2,2,"option",55),t.k0s()()()(),t.j41(21,"div",1)(22,"div",56)(23,"div",49)(24,"label",57),t.EFF(25,"Tax Year"),t.k0s(),t.j41(26,"input",58),t.mxI("ngModelChange",function(n){t.eBV(e);const s=t.XpG();return t.DH7(s.newProject.taxYear,n)||(s.newProject.taxYear=n),t.Njj(n)}),t.k0s()()(),t.j41(27,"div",56)(28,"div",49)(29,"label",59),t.EFF(30,"Due Date"),t.k0s(),t.j41(31,"input",60),t.mxI("ngModelChange",function(n){t.eBV(e);const s=t.XpG();return t.DH7(s.newProject.dueDate,n)||(s.newProject.dueDate=n),t.Njj(n)}),t.k0s()()()(),t.j41(32,"div",49)(33,"label",61),t.EFF(34,"Description"),t.k0s(),t.j41(35,"textarea",62),t.mxI("ngModelChange",function(n){t.eBV(e);const s=t.XpG();return t.DH7(s.newProject.description,n)||(s.newProject.description=n),t.Njj(n)}),t.k0s()()()(),t.j41(36,"div",63)(37,"button",64),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.closeCreateModal())}),t.EFF(38,"Cancel"),t.k0s(),t.j41(39,"button",7),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.createProject())}),t.EFF(40,"Create Project"),t.k0s()()()()()}if(2&i){const e=t.XpG();t.xc7("display",e.showCreateModal?"block":"none"),t.AVh("show",e.showCreateModal),t.R7$(14),t.R50("ngModel",e.newProject.name),t.R7$(5),t.R50("ngModel",e.newProject.type),t.R7$(),t.Y8G("ngForOf",e.projectTypes),t.R7$(6),t.R50("ngModel",e.newProject.taxYear),t.Y8G("min",2020)("max",2030),t.R7$(5),t.R50("ngModel",e.newProject.dueDate),t.R7$(4),t.R50("ngModel",e.newProject.description)}}function L(i,r){1&i&&t.nrm(0,"div",66)}let H=(()=>{class i{constructor(e,o,n){this.route=e,this.router=o,this.apiService=n,this.destroy$=new M.B,this.clientName="",this.projects=[],this.isLoading=!1,this.showCreateModal=!1,this.newProject={name:"",type:"tax_return",taxYear:(new Date).getFullYear(),dueDate:"",description:""},this.projectTypes=[{value:"tax_return",label:"Tax Return"},{value:"quarterly_filing",label:"Quarterly Filing"},{value:"business_setup",label:"Business Setup"},{value:"audit",label:"Audit"},{value:"consultation",label:"Consultation"},{value:"other",label:"Other"}],this.projectStatuses=[{value:"active",label:"Active",class:"badge bg-success"},{value:"in_progress",label:"In Progress",class:"badge bg-primary"},{value:"completed",label:"Completed",class:"badge bg-info"},{value:"on_hold",label:"On Hold",class:"badge bg-warning"},{value:"cancelled",label:"Cancelled",class:"badge bg-danger"}]}ngOnInit(){this.route.params.subscribe(e=>{this.clientId=+e.clientId,this.clientId&&(this.loadClientProjects(),this.loadClientInfo())})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadClientProjects(){this.isLoading=!0,this.apiService.getClientProjects(this.clientId).pipe((0,p.Q)(this.destroy$)).subscribe({next:e=>{e.success&&e.projects&&(this.projects=e.projects),this.isLoading=!1},error:e=>{console.error("Error loading client projects:",e),this.isLoading=!1,d().fire({title:"Error",text:"Failed to load client projects.",icon:"error"})}})}loadClientInfo(){this.apiService.getClients().pipe((0,p.Q)(this.destroy$)).subscribe({next:e=>{if(e.success&&e.clients){const o=e.clients.find(n=>n.id===this.clientId);o&&(this.clientName=`${o.firstName} ${o.lastName}`)}},error:e=>{console.error("Error loading client info:",e)}})}openCreateModal(){this.newProject={name:"",type:"tax_return",taxYear:(new Date).getFullYear(),dueDate:"",description:""},this.showCreateModal=!0}closeCreateModal(){this.showCreateModal=!1}createProject(){this.newProject.name.trim()?this.apiService.createClientProject(this.clientId,this.newProject).pipe((0,p.Q)(this.destroy$)).subscribe({next:e=>{e.success&&(d().fire({title:"Success!",text:"Project created successfully.",icon:"success",timer:2e3,showConfirmButton:!1}),this.closeCreateModal(),this.loadClientProjects())},error:e=>{console.error("Error creating project:",e),d().fire({title:"Error",text:"Failed to create project.",icon:"error"})}}):d().fire({title:"Validation Error",text:"Project name is required.",icon:"warning"})}getStatusClass(e){const o=this.projectStatuses.find(n=>n.value===e);return o?o.class:"badge bg-secondary"}getStatusLabel(e){const o=this.projectStatuses.find(n=>n.value===e);return o?o.label:e}getTypeLabel(e){const o=this.projectTypes.find(n=>n.value===e);return o?o.label:e}updateProjectStatus(e,o){this.apiService.updateProject(e.id,{status:o}).pipe((0,p.Q)(this.destroy$)).subscribe({next:n=>{n.success&&(e.status=o,d().fire({title:"Updated!",text:"Project status updated successfully.",icon:"success",timer:1500,showConfirmButton:!1}))},error:n=>{console.error("Error updating project status:",n),d().fire({title:"Error",text:"Failed to update project status.",icon:"error"})}})}viewProject(e){this.router.navigate(["/tax-consultant/intake-forms"],{queryParams:{projectId:e.id,clientId:this.clientId}})}isOverdue(e){return!!e&&new Date(e)<new Date}formatDate(e){return e?new Date(e).toLocaleDateString():"Not set"}goBack(){this.router.navigate(["/clients/list"])}static{this.\u0275fac=function(o){return new(o||i)(t.rXU(u.nX),t.rXU(u.Ix),t.rXU(S.G))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-client-projects"]],decls:15,vars:5,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box","d-sm-flex","align-items-center","justify-content-between"],[1,"mb-sm-0","font-size-18"],[1,"bx","bx-arrow-back","me-2","cursor-pointer",3,"click"],[1,"page-title-right"],["type","button",1,"btn","btn-primary",3,"click"],[1,"bx","bx-plus","me-1"],["class","row",4,"ngIf"],["class","modal fade","tabindex","-1",3,"show","display",4,"ngIf"],["class","modal-backdrop fade show",4,"ngIf"],[1,"card"],[1,"card-body","text-center"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],[1,"mt-2"],[1,"card-body"],["class","table-responsive",4,"ngIf"],["class","text-center py-5",4,"ngIf"],[1,"table-responsive"],[1,"table","table-nowrap","align-middle","mb-0"],["scope","col"],[4,"ngFor","ngForOf"],[1,"font-size-14","mb-1"],["class","text-muted mb-0",4,"ngIf"],[1,"badge","bg-light","text-dark"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown"],[1,"dropdown-menu"],[4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"d-flex","gap-2"],["type","button","title","View Project",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bx","bx-show"],[1,"text-muted","mb-0"],[1,"dropdown-item",3,"click"],[1,"text-muted"],[1,"text-center","py-5"],[1,"mb-4"],[1,"bx","bx-folder-open","display-4","text-muted"],["tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"col-md-8"],[1,"mb-3"],["for","projectName",1,"form-label"],["type","text","id","projectName","name","projectName","placeholder","Enter project name",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-4"],["for","projectType",1,"form-label"],["id","projectType","name","projectType",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-6"],["for","taxYear",1,"form-label"],["type","number","id","taxYear","name","taxYear",1,"form-control",3,"ngModelChange","ngModel","min","max"],["for","dueDate",1,"form-label"],["type","date","id","dueDate","name","dueDate",1,"form-control",3,"ngModelChange","ngModel"],["for","description",1,"form-label"],["id","description","rows","3","name","description","placeholder","Enter project description (optional)",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],[3,"value"],[1,"modal-backdrop","fade","show"]],template:function(o,n){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4)(5,"i",5),t.bIt("click",function(){return n.goBack()}),t.k0s(),t.EFF(6),t.k0s(),t.j41(7,"div",6)(8,"button",7),t.bIt("click",function(){return n.openCreateModal()}),t.nrm(9,"i",8),t.EFF(10," New Project "),t.k0s()()()()(),t.DNE(11,N,9,0,"div",9)(12,z,6,2,"div",9),t.k0s(),t.DNE(13,J,41,12,"div",10)(14,L,1,0,"div",11)),2&o&&(t.R7$(6),t.SpI(" ",n.clientName," - Projects "),t.R7$(5),t.Y8G("ngIf",n.isLoading),t.R7$(),t.Y8G("ngIf",!n.isLoading),t.R7$(),t.Y8G("ngIf",n.showCreateModal),t.R7$(),t.Y8G("ngIf",n.showCreateModal))},dependencies:[m.Sq,m.bT,c.qT,c.xH,c.y7,c.me,c.Q0,c.wz,c.BC,c.cb,c.VZ,c.zX,c.vS,c.cV],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:none;font-weight:600;color:#495057;background-color:#f8f9fa}.badge[_ngcontent-%COMP%]{font-size:.75rem}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important}.modal[_ngcontent-%COMP%]{background-color:#00000080}.modal-content[_ngcontent-%COMP%]{border-radius:.5rem;box-shadow:0 .5rem 1rem #00000026}.modal-header[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6;padding:1rem 1.5rem}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.modal-footer[_ngcontent-%COMP%]{border-top:1px solid #dee2e6;padding:1rem 1.5rem}.btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem}.dropdown-toggle[_ngcontent-%COMP%]:after{margin-left:.5rem}.empty-state[_ngcontent-%COMP%]{padding:3rem 0}.display-4[_ngcontent-%COMP%]{font-size:3.5rem}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}"]})}}return i})();var g=l(400);const Z=[{path:"intake-forms",component:k,canActivate:[g.K],data:{role:"ACCOUNTANT"}},{path:"client-documents",component:P,canActivate:[g.K],data:{role:"ACCOUNTANT"}},{path:"client-projects/:clientId",component:H,canActivate:[g.K],data:{role:"ACCOUNTANT"}}];let U=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[u.iI.forChild(Z),u.iI]})}}return i})();var Q=l(6551),K=l(1745),W=l(8580),q=l(779),tt=l(3816);let et=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[m.MD,c.YN,c.X1,U,Q.T,K.V,W.zE,q.Q_,tt.jr]})}}return i})()}}]);
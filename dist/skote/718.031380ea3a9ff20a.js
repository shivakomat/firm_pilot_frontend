"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[718],{5538:(D,y,h)=>{h.d(y,{m:()=>c});var n=h(1626),r=h(4412),p=h(1413),A=h(1985),E=h(5312),g=h(4438);let c=(()=>{class _{constructor(a){this.http=a,this.baseUrl=E.c.apiUrl||"http://localhost:9000",this.threadsSubject=new r.t([]),this.currentThreadSubject=new r.t(null),this.newMessageSubject=new p.B,this.threads$=this.threadsSubject.asObservable(),this.currentThread$=this.currentThreadSubject.asObservable(),this.newMessage$=this.newMessageSubject.asObservable()}getAllThreads(){const a=localStorage.getItem("authToken"),l=new n.Lr({"Content-Type":"application/json",Authorization:`Bearer ${a}`});return this.http.get(`${this.baseUrl}/threads`,{headers:l})}getThread(a){const l=localStorage.getItem("authToken"),m=new n.Lr({"Content-Type":"application/json",Authorization:`Bearer ${l}`});return this.http.get(`${this.baseUrl}/threads/${a}`,{headers:m})}sendMessage(a,l){const m=localStorage.getItem("authToken"),b=new n.Lr({"Content-Type":"application/json",Authorization:`Bearer ${m}`});return this.http.post(`${this.baseUrl}/threads/${a}/messages`,l,{headers:b})}getAIResponse(a,l){const m={message:this.generateMockAIResponse(a),confidence:.85,suggestedActions:["Schedule a consultation","Review tax documents","Check deduction eligibility"]};return new A.c(b=>{setTimeout(()=>{b.next(m),b.complete()},1e3)})}updateThreads(a){this.threadsSubject.next(a)}updateCurrentThread(a){this.currentThreadSubject.next(a)}emitNewMessage(a){this.newMessageSubject.next(a)}getCurrentUser(){const a=localStorage.getItem("currentUser");return a?JSON.parse(a):null}isClient(){const a=this.getCurrentUser();if(!a)return!1;const l=a.role?.toLowerCase(),m=a.userType?.toLowerCase(),b=a.roleType?.toLowerCase();return"client"===l||"client"===m||"client"===b}generateMockAIResponse(a){const l=["I understand you're asking about tax matters. Let me help you with that information.","Based on current tax regulations, here's what I can tell you about your question.","That's a great question about taxes. Here's some guidance that might help.","I can assist you with that tax-related inquiry. Let me provide some insights.","Thank you for your question. Here's what you should know about this tax matter."];return l[Math.floor(Math.random()*l.length)]+" For specific advice regarding your situation, I recommend discussing this with your accountant."}static{this.\u0275fac=function(l){return new(l||_)(g.KVO(n.Qq))}}static{this.\u0275prov=g.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}}return _})()},1745:(D,y,h)=>{h.d(y,{V:()=>g});var n=h(177),r=h(4438),p=h(4412);let A=(()=>{class c{constructor(){this.isLoading=new p.t(!1)}static{this.\u0275fac=function(a){return new(a||c)}}static{this.\u0275prov=r.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})();function E(c,_){1&c&&(r.j41(0,"div",0)(1,"div",1)(2,"div",2),r.nrm(3,"div",3)(4,"div",3)(5,"div",3)(6,"div",3)(7,"div",3)(8,"div",3),r.k0s()()())}let g=(()=>{class c{constructor(v){this.loaderService=v,this.loading=!0,this.loaderService.isLoading.subscribe(a=>{setTimeout(()=>{this.loading=a},1500)})}ngOnInit(){}static{this.\u0275fac=function(a){return new(a||c)(r.rXU(A))}}static{this.\u0275cmp=r.VBU({type:c,selectors:[["app-loader"]],standalone:!0,features:[r.aNF],decls:1,vars:1,consts:[["id","preloader"],["id","status"],[1,"spinner-chase"],[1,"chase-dot"]],template:function(a,l){1&a&&r.DNE(0,E,9,0,"div",0),2&a&&r.vxM(l.loading?0:-1)},dependencies:[n.MD]})}}return c})()},779:(D,y,h)=>{h.d(y,{I8:()=>T,hZ:()=>J,Q_:()=>q});var n=h(4438),r=h(425),p=h(177),A=h(6697);let g,E=(()=>{class i{constructor(){this._focusTrapStack=[]}register(e){this._focusTrapStack=this._focusTrapStack.filter(o=>o!==e);let t=this._focusTrapStack;t.length&&t[t.length-1]._disable(),t.push(e),e._enable()}deregister(e){e._disable();const t=this._focusTrapStack,o=t.indexOf(e);-1!==o&&(t.splice(o,1),t.length&&t[t.length-1]._enable())}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=n.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();try{g=typeof Intl<"u"&&Intl.v8BreakIterator}catch{g=!1}let c=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?(0,p.UE)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!g)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(t){return new(t||i)(n.KVO(n.Agw))}}static{this.\u0275prov=n.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),v=(()=>{class i{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function l(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const t=function a(i){try{return i.frameElement}catch{return null}}(function V(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(e));if(t&&(-1===M(t)||!this.isVisible(t)))return!1;let o=e.nodeName.toLowerCase(),d=M(e);return e.hasAttribute("contenteditable")?-1!==d:!("iframe"===o||"object"===o||this._platform.WEBKIT&&this._platform.IOS&&!function K(i){let s=i.nodeName.toLowerCase(),e="input"===s&&i.type;return"text"===e||"password"===e||"select"===s||"textarea"===s}(e))&&("audio"===o?!!e.hasAttribute("controls")&&-1!==d:"video"===o?-1!==d&&(null!==d||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,t){return function $(i){return!function b(i){return function U(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function m(i){let s=i.nodeName.toLowerCase();return"input"===s||"select"===s||"button"===s||"textarea"===s}(i)||function W(i){return function j(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||I(i))}(e)&&!this.isDisabled(e)&&(t?.ignoreVisibility||this.isVisible(e))}static{this.\u0275fac=function(t){return new(t||i)(n.KVO(c))}}static{this.\u0275prov=n.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function I(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let s=i.getAttribute("tabindex");return"-32768"!=s&&!(!s||isNaN(parseInt(s,10)))}function M(i){if(!I(i))return null;const s=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(s)?-1:s}function B(i){return null!=i&&"false"!=`${i}`}class X{get enabled(){return this._enabled}set enabled(s){this._enabled=s,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(s,this._startAnchor),this._toggleAnchorTabIndex(s,this._endAnchor))}constructor(s,e,t,o,d=!1){this._element=s,this._checker=e,this._ngZone=t,this._document=o,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,d||this.attachAnchors()}destroy(){const s=this._startAnchor,e=this._endAnchor;s&&(s.removeEventListener("focus",this.startAnchorListener),s.parentNode&&s.parentNode.removeChild(s)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(s=>{this._executeOnStable(()=>s(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(s=>{this._executeOnStable(()=>s(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(s=>{this._executeOnStable(()=>s(this.focusLastTabbableElement()))})}_getRegionBoundary(s){let e=this._element.querySelectorAll(`[cdk-focus-region-${s}], [cdkFocusRegion${s}], [cdk-focus-${s}]`);for(let t=0;t<e.length;t++)e[t].hasAttribute(`cdk-focus-${s}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${s}', use 'cdkFocusRegion${s}' instead. The deprecated attribute will be removed in 8.0.0.`,e[t]):e[t].hasAttribute(`cdk-focus-region-${s}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${s}', use 'cdkFocusRegion${s}' instead. The deprecated attribute will be removed in 8.0.0.`,e[t]);return"start"==s?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const s=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(s){if(s.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",s),!this._checker.isFocusable(s)){const e=this._getFirstTabbableElement(s);return e?.focus(),!!e}return s.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){const s=this._getRegionBoundary("start");return s&&s.focus(),!!s}focusLastTabbableElement(){const s=this._getRegionBoundary("end");return s&&s.focus(),!!s}hasAttached(){return this._hasAttached}_getFirstTabbableElement(s){if(this._checker.isFocusable(s)&&this._checker.isTabbable(s))return s;let e=s.children||s.childNodes;for(let t=0;t<e.length;t++){let o=e[t].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[t]):null;if(o)return o}return null}_getLastTabbableElement(s){if(this._checker.isFocusable(s)&&this._checker.isTabbable(s))return s;let e=s.children||s.childNodes;for(let t=e.length-1;t>=0;t--){let o=e[t].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[t]):null;if(o)return o}return null}_createAnchor(){const s=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,s),s.classList.add("cdk-visually-hidden"),s.classList.add("cdk-focus-trap-anchor"),s.setAttribute("aria-hidden","true"),s}_toggleAnchorTabIndex(s,e){s?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(s){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(s,this._startAnchor),this._toggleAnchorTabIndex(s,this._endAnchor))}_executeOnStable(s){this._ngZone.isStable?s():this._ngZone.onStable.pipe((0,A.s)(1)).subscribe(s)}}let G=(()=>{class i{constructor(e,t,o){this._checker=e,this._ngZone=t,this._document=o}create(e,t=!1){return new X(e,this._checker,this._ngZone,this._document,t)}static{this.\u0275fac=function(t){return new(t||i)(n.KVO(v),n.KVO(n.SKi),n.KVO(p.qQ))}}static{this.\u0275prov=n.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Z=(()=>{class i{get enabled(){return this.focusTrap.enabled}set enabled(e){this.focusTrap.enabled=B(e)}get autoCapture(){return this._autoCapture}set autoCapture(e){this._autoCapture=B(e)}constructor(e,t,o){this._elementRef=e,this._focusTrapFactory=t,this._previouslyFocusedElement=null,this._autoCapture=!1,this._document=o,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(e){const t=e.autoCapture;t&&!t.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=this._document.activeElement,this.focusTrap.focusInitialElementWhenReady()}static{this.\u0275fac=function(t){return new(t||i)(n.rXU(n.aKT),n.rXU(G),n.rXU(p.qQ))}}static{this.\u0275dir=n.FsC({type:i,selectors:[["","focusTrap",""]],inputs:{enabled:[0,"cdkTrapFocus","enabled"],autoCapture:[0,"cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["focusTrap"],features:[n.OA$]})}}return i})(),O=(()=>{class i{static forRoot(){return{ngModule:i,providers:[E,c,v]}}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=n.$C({type:i})}static{this.\u0275inj=n.G2t({imports:[p.MD]})}}return i})();var C=h(6932),R=h(1946);const Q=["*"];let L=(()=>{class i{constructor(){this.hide=()=>{},this.setClass=()=>{}}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=n.jDH({token:i,factory:i.\u0275fac,providedIn:"platform"})}}return i})(),F=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=n.jDH({token:i,factory:i.\u0275fac,providedIn:"platform"})}}return i})();const S={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",animated:!0,initialState:{},closeInterceptor:void 0},N=new n.nKC("override-default-config"),f_OPEN="modal-open";let z=(()=>{class i{constructor(e,t,o){this._element=t,this._renderer=o,this.isShown=!1,this.isAnimated=!1,this._focusEl=null,this.isModalHiding=!1,this.clickStartedInContent=!1,this.config=Object.assign({},e)}ngOnInit(){this._focusEl=r.Al.activeElement,this.isAnimated&&this._renderer.addClass(this._element.nativeElement,"fade"),this._renderer.setStyle(this._element.nativeElement,"display","block"),setTimeout(()=>{this.isShown=!0,this._renderer.addClass(this._element.nativeElement,"show")},this.isAnimated?150:0),r.Al&&r.Al.body&&(this.bsModalService&&1===this.bsModalService.getModalsCount()&&(this.bsModalService.checkScrollbar(),this.bsModalService.setScrollbar()),this._renderer.addClass(r.Al.body,f_OPEN),this._renderer.setStyle(r.Al.body,"overflow-y","hidden")),this._element.nativeElement&&this._element.nativeElement.focus()}onClickStarted(e){this.clickStartedInContent=e.target!==this._element.nativeElement}onClickStop(e){this.config.ignoreBackdropClick||"static"===this.config.backdrop||e.target!==this._element.nativeElement||this.clickStartedInContent?this.clickStartedInContent=!1:(this.bsModalService?.setDismissReason("backdrop-click"),this.hide())}onPopState(){this.bsModalService?.setDismissReason("browser-back-navigation-clicked"),this.hide()}onEsc(e){this.isShown&&((27===e.keyCode||"Escape"===e.key)&&e.preventDefault(),this.config.keyboard&&this.level===this.bsModalService?.getModalsCount()&&(this.bsModalService?.setDismissReason("esc"),this.hide()))}ngOnDestroy(){this.isShown&&this._hide()}hide(){if(!this.isModalHiding){if(this.config.closeInterceptor)return void this.config.closeInterceptor().then(()=>this._hide(),()=>{});this._hide()}}_hide(){this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,"show"),setTimeout(()=>{this.isShown=!1,r.Al&&r.Al.body&&1===this.bsModalService?.getModalsCount()&&(this._renderer.removeClass(r.Al.body,f_OPEN),this._renderer.setStyle(r.Al.body,"overflow-y","")),this.bsModalService?.hide(this.config.id),this.isModalHiding=!1,this._focusEl&&this._focusEl.focus()},this.isAnimated?300:0)}static{this.\u0275fac=function(t){return new(t||i)(n.rXU(F),n.rXU(n.aKT),n.rXU(n.sFG))}}static{this.\u0275cmp=n.VBU({type:i,selectors:[["modal-container"]],hostAttrs:["role","dialog","tabindex","-1",1,"modal"],hostVars:3,hostBindings:function(t,o){1&t&&n.bIt("mousedown",function(u){return o.onClickStarted(u)})("click",function(u){return o.onClickStop(u)})("popstate",function(){return o.onPopState()},!1,n.tSv)("keydown.esc",function(u){return o.onEsc(u)},!1,n.tSv),2&t&&n.BMQ("aria-modal",!0)("aria-labelledby",o.config.ariaLabelledBy)("aria-describedby",o.config.ariaDescribedby)},ngContentSelectors:Q,decls:3,vars:2,consts:[["role","document","focusTrap",""],[1,"modal-content"]],template:function(t,o){1&t&&(n.NAR(),n.j41(0,"div",0)(1,"div",1),n.SdG(2),n.k0s()()),2&t&&n.HbH("modal-dialog"+(o.config.class?" "+o.config.class:""))},dependencies:[Z],encapsulation:2})}}return i})(),H=(()=>{class i{get isAnimated(){return this._isAnimated}set isAnimated(e){this._isAnimated=e}get isShown(){return this._isShown}set isShown(e){this._isShown=e,e?this.renderer.addClass(this.element.nativeElement,"show"):this.renderer.removeClass(this.element.nativeElement,"show")}constructor(e,t){this._isAnimated=!1,this._isShown=!1,this.element=e,this.renderer=t}ngOnInit(){this.isAnimated&&(this.renderer.addClass(this.element.nativeElement,"fade"),r.Aq.reflow(this.element.nativeElement)),this.isShown=!0}static{this.\u0275fac=function(t){return new(t||i)(n.rXU(n.aKT),n.rXU(n.sFG))}}static{this.\u0275cmp=n.VBU({type:i,selectors:[["bs-modal-backdrop"]],hostAttrs:[1,"modal-backdrop"],decls:0,vars:0,template:function(t,o){},encapsulation:2})}}return i})(),J=(()=>{class i{set config(e){this._config=this.getConfig(e)}get config(){return this._config}get isShown(){return this._isShown}constructor(e,t,o,d,u){this._element=e,this._renderer=o,this.onShow=new n.bkB,this.onShown=new n.bkB,this.onHide=new n.bkB,this.onHidden=new n.bkB,this._isShown=!1,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.timerHideModal=0,this.timerRmBackDrop=0,this.isNested=!1,this.clickStartedInContent=!1,this._focusEl=null,this._backdrop=d.createLoader(e,t,o),this._config=u||S}onClickStarted(e){this.clickStartedInContent=e.target!==this._element.nativeElement}onClickStop(e){this.config.ignoreBackdropClick||"static"===this.config.backdrop||e.target!==this._element.nativeElement||this.clickStartedInContent?this.clickStartedInContent=!1:(this.dismissReason="backdrop-click",this.hide(e))}onEsc(e){this._isShown&&((27===e.keyCode||"Escape"===e.key)&&e.preventDefault(),this.config.keyboard&&(this.dismissReason="esc",this.hide()))}ngOnDestroy(){this._isShown&&(this._isShown=!1,this.hideModal(),this._backdrop.dispose())}ngOnInit(){this._config=this._config||this.getConfig(),setTimeout(()=>{this._config.show&&this.show()},0)}toggle(){return this._isShown?this.hide():this.show()}show(){this.dismissReason=void 0,this.onShow.emit(this),!this._isShown&&(clearTimeout(this.timerHideModal),clearTimeout(this.timerRmBackDrop),this._isShown=!0,this.checkScrollbar(),this.setScrollbar(),r.Al&&r.Al.body&&(r.Al.body.classList.contains(f_OPEN)?this.isNested=!0:(this._renderer.addClass(r.Al.body,f_OPEN),this._renderer.setStyle(r.Al.body,"overflow-y","hidden"))),this.showBackdrop(()=>{this.showElement()}))}hide(e){if(this._isShown){if(e&&e.preventDefault(),this.config.closeInterceptor)return void this.config.closeInterceptor().then(()=>this._hide(),()=>{});this._hide()}}_hide(){this.onHide.emit(this),r.x.clearTimeout(this.timerHideModal),r.x.clearTimeout(this.timerRmBackDrop),this._isShown=!1,this._renderer.removeClass(this._element.nativeElement,"show"),this._config.animated?this.timerHideModal=r.x.setTimeout(()=>this.hideModal(),300):this.hideModal(),this._focusEl&&this._focusEl.focus()}getConfig(e){return Object.assign({},this._config,e)}showElement(){(!this._element.nativeElement.parentNode||this._element.nativeElement.parentNode.nodeType!==Node.ELEMENT_NODE)&&r.Al&&r.Al.body&&r.Al.body.appendChild(this._element.nativeElement),this._renderer.setAttribute(this._element.nativeElement,"aria-hidden","false"),this._renderer.setAttribute(this._element.nativeElement,"aria-modal","true"),this._renderer.setStyle(this._element.nativeElement,"display","block"),this._renderer.setProperty(this._element.nativeElement,"scrollTop",0),this._config.animated&&r.Aq.reflow(this._element.nativeElement),this._renderer.addClass(this._element.nativeElement,"show");const e=()=>{this._config.focus&&this._element.nativeElement.focus(),this.onShown.emit(this)};this._config.animated?setTimeout(e,300):e()}hideModal(){this._renderer.setAttribute(this._element.nativeElement,"aria-hidden","true"),this._renderer.setStyle(this._element.nativeElement,"display","none"),this.showBackdrop(()=>{this.isNested||(r.Al&&r.Al.body&&(this._renderer.removeClass(r.Al.body,f_OPEN),this._renderer.setStyle(r.Al.body,"overflow-y","")),this.resetScrollbar()),this.resetAdjustments(),this.focusOtherModal(),this.onHidden.emit(this)})}showBackdrop(e){if(!this._isShown||!this.config.backdrop||this.backdrop&&this.backdrop.instance.isShown)if(!this._isShown&&this.backdrop){this.backdrop.instance.isShown=!1;const t=()=>{this.removeBackdrop(),e&&e()};this.backdrop.instance.isAnimated?this.timerRmBackDrop=r.x.setTimeout(t,150):t()}else e&&e();else{if(this.removeBackdrop(),this._backdrop.attach(H).to("body").show({isAnimated:this._config.animated}),this.backdrop=this._backdrop._componentRef,!e)return;if(!this._config.animated)return void e();setTimeout(e,150)}}removeBackdrop(){this._backdrop.hide()}focusOtherModal(){if(null==this._element.nativeElement.parentElement)return;const e=this._element.nativeElement.parentElement.querySelectorAll(".in[bsModal]");e.length&&e[e.length-1].focus()}resetAdjustments(){this._renderer.setStyle(this._element.nativeElement,"paddingLeft",""),this._renderer.setStyle(this._element.nativeElement,"paddingRight","")}checkScrollbar(){this.isBodyOverflowing=r.Al.body.clientWidth<r.x.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){r.Al&&(this.originalBodyPadding=parseInt(r.x.getComputedStyle(r.Al.body).getPropertyValue("padding-right")||0,10),this.isBodyOverflowing&&(r.Al.body.style.paddingRight=`${this.originalBodyPadding+this.scrollbarWidth}px`))}resetScrollbar(){r.Al.body.style.paddingRight=`${this.originalBodyPadding}px`}getScrollbarWidth(){const e=this._renderer.createElement("div");this._renderer.addClass(e,"modal-scrollbar-measure"),this._renderer.appendChild(r.Al.body,e);const t=e.offsetWidth-e.clientWidth;return this._renderer.removeChild(r.Al.body,e),t}static{this.\u0275fac=function(t){return new(t||i)(n.rXU(n.aKT),n.rXU(n.c1b),n.rXU(n.sFG),n.rXU(C.Li),n.rXU(N,8))}}static{this.\u0275dir=n.FsC({type:i,selectors:[["","bsModal",""]],hostBindings:function(t,o){1&t&&n.bIt("mousedown",function(u){return o.onClickStarted(u)})("mouseup",function(u){return o.onClickStop(u)})("keydown.esc",function(u){return o.onEsc(u)})},inputs:{config:"config",closeInterceptor:"closeInterceptor"},outputs:{onShow:"onShow",onShown:"onShown",onHide:"onHide",onHidden:"onHidden"},exportAs:["bs-modal"]})}}return i})(),Y=1,T=(()=>{class i{constructor(e,t,o){this.clf=t,this.modalDefaultOption=o,this.onShow=new n.bkB,this.onShown=new n.bkB,this.onHide=new n.bkB,this.onHidden=new n.bkB,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.loaders=[],this._focusEl=null,this._backdropLoader=this.clf.createLoader(),this._renderer=e.createRenderer(null,null),this.config=o?Object.assign({},S,o):S}show(e,t){this._focusEl=r.Al.activeElement,this.modalsCount++,this._createLoaders();const o=t?.id||Y++;return this.config=this.modalDefaultOption?Object.assign({},S,this.modalDefaultOption,t):Object.assign({},S,t),this.config.id=o,this._showBackdrop(),this.lastDismissReason=void 0,this._showModal(e)}hide(e){(1===this.modalsCount||null==e)&&(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1&&null!=e?this.modalsCount-1:0,setTimeout(()=>{this._hideModal(e),this.removeLoaders(e)},this.config.animated?150:0),this._focusEl&&this._focusEl.focus()}_showBackdrop(){const e=!0===this.config.backdrop||"static"===this.config.backdrop,t=!this.backdropRef||!this.backdropRef.instance.isShown;1===this.modalsCount&&(this.removeBackdrop(),e&&t&&(this._backdropLoader.attach(H).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))}_hideBackdrop(){this.backdropRef&&(this.backdropRef.instance.isShown=!1,setTimeout(()=>this.removeBackdrop(),this.config.animated?150:0))}_showModal(e){const t=this.loaders[this.loaders.length-1];if(this.config&&this.config.providers)for(const u of this.config.providers)t.provide(u);const o=new L,d=t.provide({provide:F,useValue:this.config}).provide({provide:L,useValue:o}).attach(z).to("body");return o.hide=()=>this.hide(o.id),o.setClass=u=>{d.instance&&(d.instance.config.class=u)},o.onHidden=new n.bkB,o.onHide=new n.bkB,this.copyEvent(t.onBeforeHide,o.onHide),this.copyEvent(t.onHidden,o.onHidden),d.show({content:e,isAnimated:this.config.animated,initialState:this.config.initialState,bsModalService:this,id:this.config.id}),d.instance&&(d.instance.level=this.getModalsCount(),o.content=t.getInnerComponent(),o.id=d.instance.config?.id),o}_hideModal(e){if(null!=e){const t=this.loaders.findIndex(d=>d.instance?.config.id===e),o=this.loaders[t];o&&o.hide(e)}else this.loaders.forEach(t=>{t.instance&&t.hide(t.instance.config.id)})}getModalsCount(){return this.modalsCount}setDismissReason(e){this.lastDismissReason=e}removeBackdrop(){this._renderer.removeClass(r.Al.body,f_OPEN),this._renderer.setStyle(r.Al.body,"overflow-y",""),this._backdropLoader.hide(),this.backdropRef=void 0}checkScrollbar(){this.isBodyOverflowing=r.Al.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){r.Al&&(this.originalBodyPadding=parseInt(window.getComputedStyle(r.Al.body).getPropertyValue("padding-right")||"0",10),this.isBodyOverflowing&&(r.Al.body.style.paddingRight=`${this.originalBodyPadding+this.scrollbarWidth}px`))}resetScrollbar(){r.Al.body.style.paddingRight=`${this.originalBodyPadding}px`}getScrollbarWidth(){const e=this._renderer.createElement("div");this._renderer.addClass(e,"modal-scrollbar-measure"),this._renderer.appendChild(r.Al.body,e);const t=e.offsetWidth-e.clientWidth;return this._renderer.removeChild(r.Al.body,e),t}_createLoaders(){const e=this.clf.createLoader();this.copyEvent(e.onBeforeShow,this.onShow),this.copyEvent(e.onShown,this.onShown),this.copyEvent(e.onBeforeHide,this.onHide),this.copyEvent(e.onHidden,this.onHidden),this.loaders.push(e)}removeLoaders(e){if(null!=e){const t=this.loaders.findIndex(o=>o.instance?.config.id===e);t>=0&&(this.loaders.splice(t,1),this.loaders.forEach((o,d)=>{o.instance&&(o.instance.level=d+1)}))}else this.loaders.splice(0,this.loaders.length)}copyEvent(e,t){e.subscribe(o=>{t.emit(this.lastDismissReason||o)})}static{this.\u0275fac=function(t){return new(t||i)(n.KVO(n._9s),n.KVO(C.Li),n.KVO(N,8))}}static{this.\u0275prov=n.jDH({token:i,factory:i.\u0275fac,providedIn:"platform"})}}return i})();O.forRoot();let q=(()=>{class i{static forRoot(){return{ngModule:i,providers:[T,C.Li,R.DF]}}static forChild(){return{ngModule:i,providers:[T,C.Li,R.DF]}}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=n.$C({type:i})}static{this.\u0275inj=n.G2t({imports:[O]})}}return i})()}}]);
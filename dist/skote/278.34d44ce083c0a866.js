"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[278],{2278:(ce,p,m)=>{m.r(p),m.d(p,{ClientsModule:()=>ue});var c=m(177),C=m(803),r=m(9417),E=m(6551),f=m(779),j=m(8032),u=m.n(j),e=m(4438),N=m(6344);const y=["newClientModal"],T=["editClientModal"],S=["inviteClientModal"],R=(l,s)=>s.value,M=(l,s)=>s.id;function $(l,s){if(1&l&&(e.j41(0,"option",30),e.EFF(1),e.k0s()),2&l){const t=s.$implicit;e.Y8G("value",t.value),e.R7$(),e.JRh(t.label)}}function I(l,s){if(1&l&&(e.j41(0,"div",107),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&l){const t=e.XpG().$implicit;e.R7$(),e.JRh(e.i5U(2,1,t.lastInvitedAt,"short"))}}function x(l,s){if(1&l){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td")(10,"span",104),e.EFF(11),e.k0s()(),e.j41(12,"td")(13,"span",104),e.EFF(14),e.k0s()(),e.j41(15,"td")(16,"span",104),e.EFF(17),e.k0s(),e.DNE(18,I,3,4,"div",107),e.k0s(),e.j41(19,"td"),e.EFF(20),e.nI1(21,"date"),e.k0s(),e.j41(22,"td")(23,"div",114)(24,"button",115),e.bIt("click",function(){const i=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.openInviteModal(i))}),e.nrm(25,"i",116),e.k0s(),e.j41(26,"button",117),e.bIt("click",function(){const i=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.openEditModal(i))}),e.nrm(27,"i",118),e.k0s(),e.j41(28,"button",119),e.nrm(29,"i",120),e.k0s()()()()}if(2&l){const t=s.$implicit,n=e.XpG();e.R7$(2),e.JRh(t.firstName),e.R7$(2),e.JRh(t.lastName),e.R7$(2),e.JRh(t.email||"N/A"),e.R7$(2),e.JRh(n.formatPhoneForDisplay(t.phone)),e.R7$(2),e.Y8G("ngClass","INDIVIDUAL"===t.entityType?"bg-primary":"bg-info"),e.R7$(),e.SpI(" ",t.entityType||"N/A"," "),e.R7$(2),e.Y8G("ngClass",n.getClientStatusClass(t.status)),e.R7$(),e.SpI(" ",n.getClientStatusText(t.status)," "),e.R7$(2),e.Y8G("ngClass",n.getInvitationStatusClass(t.invitationStatus)),e.R7$(),e.SpI(" ",n.getInvitationStatusText(t.invitationStatus)," "),e.R7$(),e.vxM(t.lastInvitedAt?18:-1),e.R7$(2),e.JRh(e.i5U(21,13,t.createdAt,"short")),e.R7$(4),e.Y8G("disabled","accepted"===t.invitationStatus)}}function L(l,s){1&l&&(e.j41(0,"tr")(1,"td",121)(2,"div",111),e.nrm(3,"i",122),e.EFF(4,' No clients found. Click "New Client" to add your first client. '),e.k0s()()())}function D(l,s){1&l&&e.EFF(0," First name is required. ")}function B(l,s){if(1&l&&(e.j41(0,"div",51),e.DNE(1,D,1,0),e.k0s()),2&l){let t;const n=e.XpG();e.R7$(),e.vxM(null!=(t=n.createClientForm.get("firstName"))&&null!=t.errors&&t.errors.required?1:-1)}}function G(l,s){1&l&&e.EFF(0," Last name is required. ")}function w(l,s){if(1&l&&(e.j41(0,"div",51),e.DNE(1,G,1,0),e.k0s()),2&l){let t;const n=e.XpG();e.R7$(),e.vxM(null!=(t=n.createClientForm.get("lastName"))&&null!=t.errors&&t.errors.required?1:-1)}}function V(l,s){1&l&&e.EFF(0," Email is required. ")}function A(l,s){1&l&&e.EFF(0," Please enter a valid email address. ")}function X(l,s){if(1&l&&(e.j41(0,"div",51),e.DNE(1,V,1,0)(2,A,1,0),e.k0s()),2&l){let t,n;const i=e.XpG();e.R7$(),e.vxM(null!=(t=i.createClientForm.get("email"))&&null!=t.errors&&t.errors.required?1:-1),e.R7$(),e.vxM(null!=(n=i.createClientForm.get("email"))&&null!=n.errors&&n.errors.email?2:-1)}}function P(l,s){1&l&&e.EFF(0," Entity type is required. ")}function Y(l,s){if(1&l&&(e.j41(0,"div",51),e.DNE(1,P,1,0),e.k0s()),2&l){let t;const n=e.XpG();e.R7$(),e.vxM(null!=(t=n.createClientForm.get("entityType"))&&null!=t.errors&&t.errors.required?1:-1)}}function q(l,s){1&l&&e.EFF(0," Status is required. ")}function O(l,s){if(1&l&&(e.j41(0,"div",51),e.DNE(1,q,1,0),e.k0s()),2&l){let t;const n=e.XpG();e.R7$(),e.vxM(null!=(t=n.createClientForm.get("status"))&&null!=t.errors&&t.errors.required?1:-1)}}function U(l,s){1&l&&(e.nrm(0,"span",123),e.EFF(1," Creating... "))}function J(l,s){1&l&&e.EFF(0," Add Client ")}function z(l,s){1&l&&e.EFF(0," First name is required. ")}function K(l,s){if(1&l&&(e.j41(0,"div",51),e.DNE(1,z,1,0),e.k0s()),2&l){const t=e.XpG();e.R7$(),e.vxM(null!=t.ef.firstName.errors&&t.ef.firstName.errors.required?1:-1)}}function H(l,s){1&l&&e.EFF(0," Last name is required. ")}function Q(l,s){if(1&l&&(e.j41(0,"div",51),e.DNE(1,H,1,0),e.k0s()),2&l){const t=e.XpG();e.R7$(),e.vxM(null!=t.ef.lastName.errors&&t.ef.lastName.errors.required?1:-1)}}function Z(l,s){1&l&&e.EFF(0," Please enter a valid email address. ")}function W(l,s){if(1&l&&(e.j41(0,"div",51),e.DNE(1,Z,1,0),e.k0s()),2&l){const t=e.XpG();e.R7$(),e.vxM(null!=t.ef.email.errors&&t.ef.email.errors.email?1:-1)}}function ee(l,s){1&l&&(e.nrm(0,"span",123),e.EFF(1," Updating... "))}function te(l,s){1&l&&e.EFF(0," Update Client ")}function ie(l,s){if(1&l&&(e.j41(0,"div",107),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&l){const t=e.XpG();e.R7$(),e.SpI("Last sent: ",e.i5U(2,1,null==t.selectedClient?null:t.selectedClient.lastInvitedAt,"medium"),"")}}function ne(l,s){1&l&&(e.nrm(0,"span",123),e.EFF(1," Resending... "))}function le(l,s){1&l&&(e.nrm(0,"i",124),e.EFF(1,"Resend Invitation "))}function se(l,s){if(1&l&&(e.j41(0,"button",112),e.DNE(1,ne,2,0)(2,le,2,0),e.k0s()),2&l){const t=e.XpG();e.Y8G("disabled",t.inviteLoading),e.R7$(),e.vxM(t.inviteLoading?1:2)}}function oe(l,s){1&l&&(e.nrm(0,"span",123),e.EFF(1," Sending... "))}function ae(l,s){1&l&&(e.nrm(0,"i",125),e.EFF(1,"Send Invitation "))}function re(l,s){if(1&l&&(e.j41(0,"button",113),e.DNE(1,oe,2,0)(2,ae,2,0),e.k0s()),2&l){const t=e.XpG();e.Y8G("disabled",t.inviteLoading),e.R7$(),e.vxM(t.inviteLoading?1:2)}}const de=[{path:"list",component:(()=>{class l{constructor(t,n){this.apiService=t,this.formBuilder=n,this.clients=[],this.filteredClients=[],this.searchTerm="",this.statusFilter="all",this.statusOptions=[{value:"all",label:"All Clients"},{value:"lead",label:"Lead"},{value:"invited",label:"Invited"},{value:"active",label:"Active"},{value:"complete",label:"Complete"}],this.submitted=!1,this.loading=!1,this.error="",this.editSubmitted=!1,this.editLoading=!1,this.selectedClient=null,this.inviteSubmitted=!1,this.inviteLoading=!1}applyFilters(){let t=[...this.clients];if("all"!==this.statusFilter&&(t=t.filter(n=>n.status===this.statusFilter)),this.searchTerm.trim()){const n=this.searchTerm.toLowerCase();t=t.filter(i=>i.firstName?.toLowerCase().includes(n)||i.lastName?.toLowerCase().includes(n)||i.email?.toLowerCase().includes(n))}this.filteredClients=t}searchClients(){this.applyFilters()}onStatusFilterChange(){this.applyFilters()}ngOnInit(){this.breadCrumbItems=[{label:"Clients"},{label:"Clients List",active:!0}],this.createClientForm=this.formBuilder.group({firstName:["",[r.k0.required]],lastName:["",[r.k0.required]],email:["",[r.k0.required,r.k0.email]],phoneNumber:[""],entityType:["",[r.k0.required]],status:["lead",[r.k0.required]]}),this.editClientForm=this.formBuilder.group({firstName:["",[r.k0.required]],lastName:["",[r.k0.required]],email:["",[r.k0.email]],phoneNumber:[""],entityType:[""],status:[""]}),this.inviteClientForm=this.formBuilder.group({emailTemplate:[this.getDefaultEmailTemplate()]}),this.loadClients()}saveClient(){if(this.submitted=!0,this.createClientForm.valid){this.loading=!0,this.error="",this.apiService.debugTokenStatus();const t={email:this.createClientForm.value.email,firstName:this.createClientForm.value.firstName,lastName:this.createClientForm.value.lastName};this.createClientForm.value.phoneNumber&&this.createClientForm.value.phoneNumber.trim()&&(t.phone=this.cleanPhoneNumber(this.createClientForm.value.phoneNumber)),this.createClientForm.value.entityType&&(t.entityType=this.createClientForm.value.entityType),this.createClientForm.value.status&&(t.status=this.createClientForm.value.status),this.apiService.createClient(t).subscribe({next:n=>{this.loading=!1,n.success?(u().fire({title:"Success!",text:"Client has been created successfully.",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"OK"}),this.createClientForm.reset(),this.createClientForm.patchValue({entityType:"INDIVIDUAL",status:"lead"}),this.submitted=!1,this.loadClients(),this.newClientModal?.hide()):(this.error=n.message||"Failed to create client",u().fire({title:"Error!",text:this.error,icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"}))},error:n=>{this.loading=!1,console.error("Error creating client:",n);let i="Failed to create client. Please try again.";401===n.status||403===n.status?i="Authentication failed. Please log in again.":n.error?.message?i=n.error.message:n.message&&(i=n.message),this.error=i,u().fire({title:"Error!",text:i,icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"})}})}else console.log("Form is invalid"),Object.keys(this.createClientForm.controls).forEach(t=>{this.createClientForm.get(t)?.markAsTouched()})}loadClients(){this.apiService.getClients().subscribe({next:t=>{console.log("Clients response:",t),t.success&&t.clients?(this.clients=t.clients,this.applyFilters()):(console.warn("No clients found in response"),this.clients=[],this.filteredClients=[])},error:t=>{console.error("Error loading clients:",t),this.clients=[],this.filteredClients=[]}})}get f(){return this.createClientForm.controls}get ef(){return this.editClientForm.controls}formatPhoneNumber(t){let n=t.target.value.replace(/\D/g,"");n.length>=6?n=`(${n.slice(0,3)}) ${n.slice(3,6)}-${n.slice(6,10)}`:n.length>=3?n=`(${n.slice(0,3)}) ${n.slice(3)}`:n.length>0&&(n=`(${n}`),n.length>14&&(n=n.slice(0,14)),t.target.value=n,"client-phone-input"===t.target.id?this.createClientForm.patchValue({phoneNumber:n}):"editPhoneNumber"===t.target.id&&this.editClientForm.patchValue({phoneNumber:n})}cleanPhoneNumber(t){return t?t.replace(/\D/g,""):""}formatPhoneForDisplay(t){if(!t)return"";const n=t.replace(/\D/g,"");return 10===n.length?`(${n.slice(0,3)}) ${n.slice(3,6)}-${n.slice(6)}`:t}openEditModal(t){this.selectedClient=t;const n=this.formatPhoneForDisplay(t.phone||"");this.editClientForm.patchValue({firstName:t.firstName||"",lastName:t.lastName||"",email:t.email||"",phoneNumber:n,entityType:t.entityType||"",status:t.status||""}),this.editSubmitted=!1,this.editClientModal?.show()}updateClient(){if(this.editSubmitted=!0,this.editClientForm.invalid)return;this.editLoading=!0;const t={firstName:this.ef.firstName.value,lastName:this.ef.lastName.value,email:this.ef.email.value||void 0,phone:this.ef.phoneNumber.value?this.cleanPhoneNumber(this.ef.phoneNumber.value):void 0,entityType:this.ef.entityType.value||void 0,status:this.ef.status.value||void 0};this.apiService.updateClient(this.selectedClient.id,t).subscribe({next:n=>{console.log("Client updated:",n),n.success?(u().fire({title:"Success!",text:"Client has been updated successfully.",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"OK"}),this.editClientModal?.hide(),this.loadClients(),this.editClientForm.reset(),this.selectedClient=null):u().fire({title:"Error!",text:n.message||"Failed to update client.",icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"}),this.editLoading=!1},error:n=>{console.error("Error updating client:",n),this.editLoading=!1;let i="Failed to update client. Please try again.";n.error?.message?i=n.error.message:n.message&&(i=n.message),u().fire({title:"Error!",text:i,icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"})}})}getDefaultEmailTemplate(){return"Dear {clientName},\n\nYou have been invited to access your client portal for Firm Pilot.\n\nAs a valued client, you now have secure access to:\n\u2022 View your account information\n\u2022 Upload and manage documents\n\u2022 Track the progress of your services\n\u2022 Communicate directly with our team\n\nTo get started, please click the link below to set up your account:\n{invitationLink}\n\nThis invitation will expire on {expiryDate}. If you have any questions, please don't hesitate to contact us.\n\nBest regards,\n{firmName}"}openInviteModal(t){this.selectedClient=t,this.inviteClientForm.patchValue({emailTemplate:this.getDefaultEmailTemplate()}),this.inviteSubmitted=!1,this.inviteClientModal?.show()}sendInvitation(){this.inviteSubmitted=!0,!this.inviteClientForm.invalid&&this.selectedClient?.id&&(this.inviteLoading=!0,this.apiService.inviteClient(this.selectedClient.id,{message:this.inviteClientForm.value.emailTemplate||void 0}).subscribe({next:n=>{console.log("Invitation sent:",n),n.success?(u().fire({title:"Success!",text:"Invitation has been sent successfully.",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"OK"}),this.inviteClientModal?.hide(),this.loadClients(),this.inviteClientForm.reset(),this.selectedClient=null):u().fire({title:"Error!",text:n.message||"Failed to send invitation.",icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"}),this.inviteLoading=!1},error:n=>{console.error("Error sending invitation:",n),this.inviteLoading=!1;let i="Failed to send invitation. Please try again.";401===n.status||403===n.status?i="Authentication failed. Please log in again.":n.error?.message?i=n.error.message:n.message&&(i=n.message),u().fire({title:"Error!",text:i,icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"})}}))}getInvitationStatusClass(t){switch(t){case"pending":return"bg-warning";case"sent":return"bg-info";case"accepted":return"bg-success";case"expired":return"bg-danger";default:return"bg-secondary"}}getInvitationStatusText(t){switch(t){case"pending":return"Pending";case"sent":return"Sent";case"accepted":return"Accepted";case"expired":return"Expired";default:return"Not Invited"}}get if(){return this.inviteClientForm.controls}getClientStats(){return{total:this.clients.length,lead:this.clients.filter(o=>"lead"===o.status).length,invited:this.clients.filter(o=>"invited"===o.status).length,active:this.clients.filter(o=>"active"===o.status).length,complete:this.clients.filter(o=>"complete"===o.status).length}}getClientStatusClass(t){switch(t){case"lead":return"bg-warning";case"invited":return"bg-info";case"active":return"bg-success";case"complete":return"bg-primary";default:return"bg-secondary"}}getClientStatusText(t){switch(t){case"lead":return"Lead";case"invited":return"Invited";case"active":return"Active";case"complete":return"Complete";default:return"Unknown"}}static{this.\u0275fac=function(n){return new(n||l)(e.rXU(N.G),e.rXU(r.ze))}}static{this.\u0275cmp=e.VBU({type:l,selectors:[["app-clientlist"]],viewQuery:function(n,i){if(1&n&&(e.GBs(y,5),e.GBs(T,5),e.GBs(S,5)),2&n){let a;e.mGM(a=e.lsd())&&(i.newClientModal=a.first),e.mGM(a=e.lsd())&&(i.editClientModal=a.first),e.mGM(a=e.lsd())&&(i.inviteClientModal=a.first)}},standalone:!0,features:[e.aNF],decls:320,vars:60,consts:[["newClientModal","bs-modal"],["editClientModal","bs-modal"],["inviteClientModal","bs-modal"],[1,"container-fluid"],[1,"mt-5","pt-4"],["title","Clients List",3,"breadcrumbItems"],[1,"row","mb-4"],[1,"col-xl-3","col-md-6"],[1,"card"],[1,"card-body"],[1,"d-flex"],[1,"flex-1","overflow-hidden"],[1,"text-truncate","font-size-14","mb-2"],[1,"mb-0"],[1,"text-primary"],[1,"bx","bx-user","font-size-24"],[1,"text-warning"],[1,"bx","bx-user-plus","font-size-24"],[1,"text-success"],[1,"bx","bx-check-circle","font-size-24"],[1,"bx","bx-check-double","font-size-24"],[1,"row"],[1,"col-lg-12"],[1,"row","mb-2"],[1,"col-sm-4"],[1,"search-box","me-2","mb-2","d-inline-block"],[1,"position-relative"],["type","text","id","searchTableList","placeholder","Search clients...",1,"form-control",3,"ngModelChange","ngModel"],[1,"bx","bx-search-alt","search-icon"],[1,"form-select","form-select-primary",3,"ngModelChange","ngModel"],[3,"value"],[1,"text-sm-end"],["type","button",1,"btn","btn-info","btn-rounded","waves-effect","waves-light","mb-2","me-2",3,"click"],[1,"mdi","mdi-refresh","me-1"],["type","button","data-bs-toggle","modal",1,"btn","btn-success","btn-rounded","waves-effect","waves-light","addClient-modal","mb-2",3,"click"],[1,"mdi","mdi-plus","me-1"],[1,"table-responsive"],[1,"table","table-nowrap","align-middle"],[1,"table-light"],["bsModal","","id","newClientModal","tabindex","-1","aria-labelledby","newClientModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","newClientModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],["autocomplete","off","id","createClient-form","novalidate","",1,"needs-validation","createClient-form",3,"ngSubmit","formGroup"],[1,"col-lg-6"],[1,"mb-3"],["for","client-firstName-input",1,"form-label"],["type","text","id","client-firstName-input","placeholder","Enter first name","formControlName","firstName","required","",1,"form-control"],[1,"invalid-feedback"],["for","client-lastName-input",1,"form-label"],["type","text","id","client-lastName-input","placeholder","Enter last name","formControlName","lastName","required","",1,"form-control"],["for","client-email-input",1,"form-label"],[1,"text-danger"],["type","email","id","client-email-input","placeholder","Enter email address","formControlName","email","required","",1,"form-control"],["for","client-phone-input",1,"form-label"],["type","tel","id","client-phone-input","placeholder","(XXX) XXX-XXXX","formControlName","phoneNumber","maxlength","14",1,"form-control",3,"input"],["for","client-entityType-input",1,"form-label"],["id","client-entityType-input","formControlName","entityType","required","",1,"form-select"],["value",""],["value","INDIVIDUAL"],["value","BUSINESS"],["value","CORPORATION"],["value","PARTNERSHIP"],["value","LLC"],["for","client-status-input",1,"form-label"],["id","client-status-input","formControlName","status","required","",1,"form-select"],["value","lead"],["value","invited"],["value","active"],["value","inactive"],["value","suspended"],[1,"text-end"],["type","button",1,"btn","btn-outline-secondary","me-2",3,"click","disabled"],["type","submit","id","addClient-btn",1,"btn","btn-success",3,"disabled"],["bsModal","","id","editClientModal","tabindex","-1","aria-labelledby","editClientModalLabel","aria-hidden","true",1,"modal","fade"],["id","editClientModalLabel",1,"modal-title"],[3,"ngSubmit","formGroup"],["for","editFirstName",1,"form-label"],["type","text","id","editFirstName","formControlName","firstName",1,"form-control"],["for","editLastName",1,"form-label"],["type","text","id","editLastName","formControlName","lastName",1,"form-control"],["for","editEmail",1,"form-label"],["type","email","id","editEmail","formControlName","email",1,"form-control"],["for","editPhoneNumber",1,"form-label"],["type","tel","id","editPhoneNumber","formControlName","phoneNumber","placeholder","(XXX) XXX-XXXX","maxlength","14",1,"form-control",3,"input"],["for","editEntityType",1,"form-label"],["id","editEntityType","formControlName","entityType",1,"form-select"],["for","editStatus",1,"form-label"],["id","editStatus","formControlName","status",1,"form-select"],["type","submit","id","updateClient-btn",1,"btn","btn-primary",3,"disabled"],["bsModal","","id","inviteClientModal","tabindex","-1","aria-labelledby","inviteClientModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],["id","inviteClientModalLabel",1,"modal-title"],[1,"bx","bx-mail-send","me-2"],["autocomplete","off","id","inviteClient-form","novalidate","",1,"needs-validation","inviteClient-form",3,"ngSubmit","formGroup"],[1,"col-12"],[1,"card","bg-light"],[1,"card-body","p-3"],[1,"card-title","mb-2"],[1,"col-md-6"],[1,"mb-1"],[1,"badge",3,"ngClass"],[1,"form-label"],[1,"mt-2"],[1,"text-muted","small","mt-1"],["for","invite-template-input",1,"form-label"],["id","invite-template-input","rows","8","formControlName","emailTemplate","placeholder","Customize the invitation email...",1,"form-control"],[1,"form-text"],[1,"text-muted"],["type","submit",1,"btn","btn-warning",3,"disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"d-flex","gap-2"],["type","button","title","Invite Client",1,"btn","btn-sm","btn-outline-primary",3,"click","disabled"],[1,"bx","bx-mail-send"],["type","button","title","Edit",1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"bx","bx-pencil"],["type","button","title","Delete",1,"btn","btn-sm","btn-outline-danger"],[1,"bx","bx-trash"],["colspan","9",1,"text-center","py-4"],[1,"bx","bx-user-plus","font-size-48","text-muted","d-block","mb-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"bx","bx-refresh","me-1"],[1,"bx","bx-mail-send","me-1"]],template:function(n,i){if(1&n){const a=e.RV6();e.j41(0,"div",3)(1,"div",4),e.nrm(2,"app-page-title",5),e.k0s(),e.j41(3,"div",6)(4,"div",7)(5,"div",8)(6,"div",9)(7,"div",10)(8,"div",11)(9,"p",12),e.EFF(10,"Total Clients"),e.k0s(),e.j41(11,"h4",13),e.EFF(12),e.k0s()(),e.j41(13,"div",14),e.nrm(14,"i",15),e.k0s()()()()(),e.j41(15,"div",7)(16,"div",8)(17,"div",9)(18,"div",10)(19,"div",11)(20,"p",12),e.EFF(21,"Leads"),e.k0s(),e.j41(22,"h4",13),e.EFF(23),e.k0s()(),e.j41(24,"div",16),e.nrm(25,"i",17),e.k0s()()()()(),e.j41(26,"div",7)(27,"div",8)(28,"div",9)(29,"div",10)(30,"div",11)(31,"p",12),e.EFF(32,"Active"),e.k0s(),e.j41(33,"h4",13),e.EFF(34),e.k0s()(),e.j41(35,"div",18),e.nrm(36,"i",19),e.k0s()()()()(),e.j41(37,"div",7)(38,"div",8)(39,"div",9)(40,"div",10)(41,"div",11)(42,"p",12),e.EFF(43,"Complete"),e.k0s(),e.j41(44,"h4",13),e.EFF(45),e.k0s()(),e.j41(46,"div",14),e.nrm(47,"i",20),e.k0s()()()()()(),e.j41(48,"div",21)(49,"div",22)(50,"div",8)(51,"div",9)(52,"div",23)(53,"div",24)(54,"div",25)(55,"div",26)(56,"input",27),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(i.searchTerm,o)||(i.searchTerm=o),e.Njj(o)}),e.bIt("ngModelChange",function(){return e.eBV(a),e.Njj(i.searchClients())}),e.k0s(),e.nrm(57,"i",28),e.k0s()()(),e.j41(58,"div",24)(59,"select",29),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(i.statusFilter,o)||(i.statusFilter=o),e.Njj(o)}),e.bIt("ngModelChange",function(){return e.eBV(a),e.Njj(i.onStatusFilterChange())}),e.Z7z(60,$,2,2,"option",30,R),e.k0s()(),e.j41(62,"div",24)(63,"div",31)(64,"button",32),e.bIt("click",function(){return e.eBV(a),e.Njj(i.loadClients())}),e.nrm(65,"i",33),e.EFF(66," Refresh "),e.k0s(),e.j41(67,"button",34),e.bIt("click",function(){e.eBV(a);const o=e.sdS(97);return e.Njj(o.show())}),e.nrm(68,"i",35),e.EFF(69," New Client"),e.k0s()()()(),e.j41(70,"div",36)(71,"table",37)(72,"thead",38)(73,"tr")(74,"th"),e.EFF(75,"First Name"),e.k0s(),e.j41(76,"th"),e.EFF(77,"Last Name"),e.k0s(),e.j41(78,"th"),e.EFF(79,"Email"),e.k0s(),e.j41(80,"th"),e.EFF(81,"Phone Number"),e.k0s(),e.j41(82,"th"),e.EFF(83,"Entity Type"),e.k0s(),e.j41(84,"th"),e.EFF(85,"Status"),e.k0s(),e.j41(86,"th"),e.EFF(87,"Invitation"),e.k0s(),e.j41(88,"th"),e.EFF(89,"Created Date"),e.k0s(),e.j41(90,"th"),e.EFF(91,"Actions"),e.k0s()()(),e.j41(92,"tbody"),e.Z7z(93,x,30,16,"tr",null,M,!1,L,5,0,"tr"),e.k0s()()()()()()()(),e.j41(96,"div",39,0)(98,"div",40)(99,"div",41)(100,"div",42)(101,"h5",43),e.EFF(102,"Add New Client"),e.k0s(),e.j41(103,"button",44),e.bIt("click",function(){e.eBV(a);const o=e.sdS(97);return e.Njj(o.hide())}),e.k0s()(),e.j41(104,"div",45)(105,"form",46),e.bIt("ngSubmit",function(){return e.eBV(a),e.Njj(i.saveClient())}),e.j41(106,"div",21)(107,"div",47)(108,"div",48)(109,"label",49),e.EFF(110,"First Name"),e.k0s(),e.nrm(111,"input",50),e.DNE(112,B,2,1,"div",51),e.k0s()(),e.j41(113,"div",47)(114,"div",48)(115,"label",52),e.EFF(116,"Last Name"),e.k0s(),e.nrm(117,"input",53),e.DNE(118,w,2,1,"div",51),e.k0s()(),e.j41(119,"div",47)(120,"div",48)(121,"label",54),e.EFF(122,"Email Address "),e.j41(123,"span",55),e.EFF(124,"*"),e.k0s()(),e.nrm(125,"input",56),e.DNE(126,X,3,2,"div",51),e.k0s()(),e.j41(127,"div",47)(128,"div",48)(129,"label",57),e.EFF(130,"Phone Number"),e.k0s(),e.j41(131,"input",58),e.bIt("input",function(o){return e.eBV(a),e.Njj(i.formatPhoneNumber(o))}),e.k0s()()(),e.j41(132,"div",47)(133,"div",48)(134,"label",59),e.EFF(135,"Entity Type "),e.j41(136,"span",55),e.EFF(137,"*"),e.k0s()(),e.j41(138,"select",60)(139,"option",61),e.EFF(140,"Select Entity Type"),e.k0s(),e.j41(141,"option",62),e.EFF(142,"Individual"),e.k0s(),e.j41(143,"option",63),e.EFF(144,"Business"),e.k0s(),e.j41(145,"option",64),e.EFF(146,"Corporation"),e.k0s(),e.j41(147,"option",65),e.EFF(148,"Partnership"),e.k0s(),e.j41(149,"option",66),e.EFF(150,"LLC"),e.k0s()(),e.DNE(151,Y,2,1,"div",51),e.k0s()(),e.j41(152,"div",47)(153,"div",48)(154,"label",67),e.EFF(155,"Status "),e.j41(156,"span",55),e.EFF(157,"*"),e.k0s()(),e.j41(158,"select",68)(159,"option",61),e.EFF(160,"Select Status"),e.k0s(),e.j41(161,"option",69),e.EFF(162,"Lead"),e.k0s(),e.j41(163,"option",70),e.EFF(164,"Invited"),e.k0s(),e.j41(165,"option",71),e.EFF(166,"Active"),e.k0s(),e.j41(167,"option",72),e.EFF(168,"Inactive"),e.k0s(),e.j41(169,"option",73),e.EFF(170,"Suspended"),e.k0s()(),e.DNE(171,O,2,1,"div",51),e.k0s()(),e.j41(172,"div",22)(173,"div",74)(174,"button",75),e.bIt("click",function(){e.eBV(a);const o=e.sdS(97);return e.Njj(o.hide())}),e.EFF(175,"Cancel"),e.k0s(),e.j41(176,"button",76),e.DNE(177,U,2,0)(178,J,1,0),e.k0s()()()()()()()()(),e.j41(179,"div",77,1)(181,"div",40)(182,"div",41)(183,"div",42)(184,"h5",78),e.EFF(185,"Edit Client"),e.k0s(),e.j41(186,"button",44),e.bIt("click",function(){e.eBV(a);const o=e.sdS(180);return e.Njj(o.hide())}),e.k0s()(),e.j41(187,"div",45)(188,"form",79),e.bIt("ngSubmit",function(){return e.eBV(a),e.Njj(i.updateClient())}),e.j41(189,"div",21)(190,"div",47)(191,"div",48)(192,"label",80),e.EFF(193,"First Name "),e.j41(194,"span",55),e.EFF(195,"*"),e.k0s()(),e.nrm(196,"input",81),e.DNE(197,K,2,1,"div",51),e.k0s()(),e.j41(198,"div",47)(199,"div",48)(200,"label",82),e.EFF(201,"Last Name "),e.j41(202,"span",55),e.EFF(203,"*"),e.k0s()(),e.nrm(204,"input",83),e.DNE(205,Q,2,1,"div",51),e.k0s()(),e.j41(206,"div",47)(207,"div",48)(208,"label",84),e.EFF(209,"Email"),e.k0s(),e.nrm(210,"input",85),e.DNE(211,W,2,1,"div",51),e.k0s()(),e.j41(212,"div",47)(213,"div",48)(214,"label",86),e.EFF(215,"Phone Number"),e.k0s(),e.j41(216,"input",87),e.bIt("input",function(o){return e.eBV(a),e.Njj(i.formatPhoneNumber(o))}),e.k0s()()(),e.j41(217,"div",47)(218,"div",48)(219,"label",88),e.EFF(220,"Entity Type"),e.k0s(),e.j41(221,"select",89)(222,"option",61),e.EFF(223,"Select Entity Type"),e.k0s(),e.j41(224,"option",62),e.EFF(225,"Individual"),e.k0s(),e.j41(226,"option",63),e.EFF(227,"Business"),e.k0s(),e.j41(228,"option",64),e.EFF(229,"Corporation"),e.k0s(),e.j41(230,"option",65),e.EFF(231,"Partnership"),e.k0s(),e.j41(232,"option",66),e.EFF(233,"LLC"),e.k0s()()()(),e.j41(234,"div",47)(235,"div",48)(236,"label",90),e.EFF(237,"Status"),e.k0s(),e.j41(238,"select",91)(239,"option",61),e.EFF(240,"Select Status"),e.k0s(),e.j41(241,"option",69),e.EFF(242,"Lead"),e.k0s(),e.j41(243,"option",70),e.EFF(244,"Invited"),e.k0s(),e.j41(245,"option",71),e.EFF(246,"Active"),e.k0s(),e.j41(247,"option",72),e.EFF(248,"Inactive"),e.k0s(),e.j41(249,"option",73),e.EFF(250,"Suspended"),e.k0s()()()(),e.j41(251,"div",22)(252,"div",74)(253,"button",75),e.bIt("click",function(){e.eBV(a);const o=e.sdS(180);return e.Njj(o.hide())}),e.EFF(254,"Cancel"),e.k0s(),e.j41(255,"button",92),e.DNE(256,ee,2,0)(257,te,1,0),e.k0s()()()()()()()()(),e.j41(258,"div",93,2)(260,"div",94)(261,"div",41)(262,"div",42)(263,"h5",95),e.nrm(264,"i",96),e.EFF(265,"Send Client Invitation "),e.k0s(),e.j41(266,"button",44),e.bIt("click",function(){e.eBV(a);const o=e.sdS(259);return e.Njj(o.hide())}),e.k0s()(),e.j41(267,"div",45)(268,"form",97),e.bIt("ngSubmit",function(){return e.eBV(a),e.Njj(i.sendInvitation())}),e.j41(269,"div",6)(270,"div",98)(271,"div",99)(272,"div",100)(273,"h6",101),e.EFF(274,"Client Information"),e.k0s(),e.j41(275,"div",21)(276,"div",102)(277,"p",103)(278,"strong"),e.EFF(279,"Name:"),e.k0s(),e.EFF(280),e.k0s(),e.j41(281,"p",103)(282,"strong"),e.EFF(283,"Email:"),e.k0s(),e.EFF(284),e.k0s()(),e.j41(285,"div",102)(286,"p",103)(287,"strong"),e.EFF(288,"Entity Type:"),e.k0s(),e.EFF(289),e.k0s(),e.j41(290,"p",103)(291,"strong"),e.EFF(292,"Status:"),e.k0s(),e.j41(293,"span",104),e.EFF(294),e.k0s()()()()()()()(),e.j41(295,"div",21)(296,"div",98)(297,"div",48)(298,"label",105),e.EFF(299,"Current Invitation Status"),e.k0s(),e.j41(300,"div",106)(301,"span",104),e.EFF(302),e.k0s(),e.DNE(303,ie,3,4,"div",107),e.k0s()()()(),e.j41(304,"div",21)(305,"div",98)(306,"div",48)(307,"label",108),e.EFF(308,"Email Template"),e.k0s(),e.nrm(309,"textarea",109),e.j41(310,"div",110)(311,"small",111),e.EFF(312),e.k0s()()()()(),e.j41(313,"div",21)(314,"div",98)(315,"div",74)(316,"button",75),e.bIt("click",function(){e.eBV(a);const o=e.sdS(259);return e.Njj(o.hide())}),e.EFF(317,"Cancel"),e.k0s(),e.DNE(318,se,3,2,"button",112)(319,re,3,2,"button",113),e.k0s()()()()()()()()}if(2&n){let a,d,o,v,h,F,b,_,g,k;e.R7$(2),e.Y8G("breadcrumbItems",i.breadCrumbItems),e.R7$(10),e.JRh(i.getClientStats().total),e.R7$(11),e.JRh(i.getClientStats().lead),e.R7$(11),e.JRh(i.getClientStats().active),e.R7$(11),e.JRh(i.getClientStats().complete),e.R7$(11),e.R50("ngModel",i.searchTerm),e.R7$(3),e.R50("ngModel",i.statusFilter),e.R7$(),e.Dyx(i.statusOptions),e.R7$(33),e.Dyx(i.filteredClients),e.R7$(12),e.Y8G("formGroup",i.createClientForm),e.R7$(6),e.AVh("is-invalid",i.submitted&&(null==(a=i.createClientForm.get("firstName"))?null:a.errors)),e.R7$(),e.vxM(i.submitted&&null!=(d=i.createClientForm.get("firstName"))&&d.errors?112:-1),e.R7$(5),e.AVh("is-invalid",i.submitted&&(null==(o=i.createClientForm.get("lastName"))?null:o.errors)),e.R7$(),e.vxM(i.submitted&&null!=(v=i.createClientForm.get("lastName"))&&v.errors?118:-1),e.R7$(7),e.AVh("is-invalid",i.submitted&&(null==(h=i.createClientForm.get("email"))?null:h.errors)),e.R7$(),e.vxM(i.submitted&&null!=(F=i.createClientForm.get("email"))&&F.errors?126:-1),e.R7$(12),e.AVh("is-invalid",i.submitted&&(null==(b=i.createClientForm.get("entityType"))?null:b.errors)),e.R7$(13),e.vxM(i.submitted&&null!=(_=i.createClientForm.get("entityType"))&&_.errors?151:-1),e.R7$(7),e.AVh("is-invalid",i.submitted&&(null==(g=i.createClientForm.get("status"))?null:g.errors)),e.R7$(13),e.vxM(i.submitted&&null!=(k=i.createClientForm.get("status"))&&k.errors?171:-1),e.R7$(3),e.Y8G("disabled",i.loading),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(),e.vxM(i.loading?177:178),e.R7$(11),e.Y8G("formGroup",i.editClientForm),e.R7$(8),e.AVh("is-invalid",i.editSubmitted&&i.ef.firstName.errors),e.R7$(),e.vxM(i.editSubmitted&&i.ef.firstName.errors?197:-1),e.R7$(7),e.AVh("is-invalid",i.editSubmitted&&i.ef.lastName.errors),e.R7$(),e.vxM(i.editSubmitted&&i.ef.lastName.errors?205:-1),e.R7$(5),e.AVh("is-invalid",i.editSubmitted&&i.ef.email.errors),e.R7$(),e.vxM(i.editSubmitted&&i.ef.email.errors?211:-1),e.R7$(42),e.Y8G("disabled",i.editLoading),e.R7$(2),e.Y8G("disabled",i.editLoading),e.R7$(),e.vxM(i.editLoading?256:257),e.R7$(12),e.Y8G("formGroup",i.inviteClientForm),e.R7$(12),e.Lme(" ",null==i.selectedClient?null:i.selectedClient.firstName," ",null==i.selectedClient?null:i.selectedClient.lastName,""),e.R7$(4),e.SpI(" ",null==i.selectedClient?null:i.selectedClient.email,""),e.R7$(5),e.SpI(" ",(null==i.selectedClient?null:i.selectedClient.entityType)||"N/A",""),e.R7$(4),e.Y8G("ngClass","lead"===(null==i.selectedClient?null:i.selectedClient.status)?"bg-info":"active"===(null==i.selectedClient?null:i.selectedClient.status)?"bg-success":"bg-secondary"),e.R7$(),e.SpI(" ",(null==i.selectedClient?null:i.selectedClient.status)||"N/A"," "),e.R7$(7),e.Y8G("ngClass",i.getInvitationStatusClass(null==i.selectedClient?null:i.selectedClient.invitationStatus)),e.R7$(),e.SpI(" ",i.getInvitationStatusText(null==i.selectedClient?null:i.selectedClient.invitationStatus)," "),e.R7$(),e.vxM(null!=i.selectedClient&&i.selectedClient.lastInvitedAt?303:-1),e.R7$(9),e.Ld(" Available variables: ","{","clientName","}",", ","{","firmName","}",", ","{","invitationLink","}",", ","{","expiryDate","}"," "),e.R7$(4),e.Y8G("disabled",i.inviteLoading),e.R7$(2),e.vxM("pending"===(null==i.selectedClient?null:i.selectedClient.invitationStatus)||"sent"===(null==i.selectedClient?null:i.selectedClient.invitationStatus)?318:319)}},dependencies:[c.MD,c.YU,c.vh,r.YN,r.qT,r.xH,r.y7,r.me,r.wz,r.BC,r.cb,r.YS,r.tU,r.vS,r.X1,r.j4,r.JD,E.T,f.Q_,f.hZ]})}}return l})()}];let me=(()=>{class l{static{this.\u0275fac=function(n){return new(n||l)}}static{this.\u0275mod=e.$C({type:l})}static{this.\u0275inj=e.G2t({imports:[C.iI.forChild(de),C.iI]})}}return l})(),ue=(()=>{class l{static{this.\u0275fac=function(n){return new(n||l)}}static{this.\u0275mod=e.$C({type:l})}static{this.\u0275inj=e.G2t({imports:[c.MD,me]})}}return l})()}}]);